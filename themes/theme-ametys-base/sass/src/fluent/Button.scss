/*
 *  Copyright 2015 Anyware Services
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */

@mixin ametys-ribbon-button($ui, $ui-background-color)
{
    @include extjs-button-small-ui(
        $ui: $ui,
    
        $border-width: 0,
        
        $padding: 1px,
        $icon-spacing: $ametys-ribbon-button-iconspacing-small,
        $text-padding: $ametys-ribbon-button-textpadding-small,
        
        $arrow-width: 10px + ($ametys-ribbon-button-padding-small - 1px),
        $split-width: 10px + ($ametys-ribbon-button-padding-small - 1px),
        
        $body-outline-color-focus: $ametys-ribbon-button-outline-color,
        $inner-border-color-focus: $ametys-ribbon-button-outline-color,
        
        $font-size: $ametys-ribbon-button-font-size,
        $font-size-over: $ametys-ribbon-button-font-size,
        $font-size-focus: $ametys-ribbon-button-font-size,
        $font-size-pressed: $ametys-ribbon-button-font-size,
        
        $line-height: $ametys-ribbon-button-line-height,
        
        $font-weight: $ametys-ribbon-button-font-weight,
        $font-weight-over: $ametys-ribbon-button-font-weight,
        $font-weight-focus: $ametys-ribbon-button-font-weight,
        $font-weight-pressed: $ametys-ribbon-button-font-weight,
        $font-weight-focus-over: $ametys-ribbon-button-font-weight,
        $font-weight-focus-pressed: $ametys-ribbon-button-font-weight,
        $font-weight-disabled: $ametys-ribbon-button-font-weight,
                
        $arrow-glyph-color: $ametys-ribbon-button-arrow-glyph-color,

        $color: $ametys-ribbon-button-color,
        $background-color: $ui-background-color,
        
        $color-over: $ametys-ribbon-button-color-over,
        $background-color-over: $ametys-ribbon-button-background-color-over,
        
        $color-pressed: $ametys-ribbon-button-color-pressed,
        $background-color-pressed: $ametys-ribbon-button-background-color-pressed,
        
        $color-focus: $ametys-ribbon-button-color-focus,
        $background-color-focus: $ametys-ribbon-button-background-color-focus    
    );  
    .#{$prefix}btn-button-#{$ui}-small {
        padding: ($ametys-ribbon-button-padding-small - 1px); 
    }
    .a-fluent-control-button-menu .#{$prefix}btn-button-#{$ui}-small {
        padding-right: 0;
    }
    .#{$prefix}btn-wrap-#{$ui}-small.#{$prefix}btn-arrow-right:after,
    .#{$prefix}btn-wrap-#{$ui}-small.#{$prefix}btn-split-right:after {
        background-position: ($ametys-ribbon-button-padding-small - 1px) center;
    }
    
    .#{$prefix}btn-inner-#{$ui}-small {
        margin-top: $ametys-ribbon-button-texticonalignadjust-small - 1px;
        
        .#{$prefix}chrome & {
            margin-top: $ametys-ribbon-button-texticonalignadjust-small;
        }
    }
    .#{$prefix}btn-icon-el-#{$ui}-small {
        margin-bottom: $ametys-ribbon-button-texticonalignadjust-small;
        
        .#{$prefix}gecko &:before {
            vertical-align: top;
        }
    }
    .#{$prefix}btn-wrap-#{$ui}-small.#{$prefix}btn-split-right:after,
    .#{$prefix}btn-wrap-#{$ui}-small.#{$prefix}btn-arrow-right:after {
        font-size: $ametys-ribbon-button-font-size;
    }  
      
    @include extjs-button-large-ui(
        $ui: $ui,
        
        $border-width: 0,
        
        $padding: 1px,
        $icon-spacing: $ametys-ribbon-button-iconspacing-large,
        $text-padding: $ametys-ribbon-button-textpadding-large,
        
        $body-outline-color-focus: $ametys-ribbon-button-outline-color,
        $inner-border-color-focus: $ametys-ribbon-button-outline-color,
        
        $font-size: $ametys-ribbon-button-font-size,
        $font-size-over: $ametys-ribbon-button-font-size,
        $font-size-focus: $ametys-ribbon-button-font-size,
        $font-size-pressed: $ametys-ribbon-button-font-size,
        
        $line-height: $ametys-ribbon-button-line-height,
        
        $font-weight: $ametys-ribbon-button-font-weight,
        $font-weight-over: $ametys-ribbon-button-font-weight,
        $font-weight-focus: $ametys-ribbon-button-font-weight,
        $font-weight-pressed: $ametys-ribbon-button-font-weight,
        $font-weight-focus-over: $ametys-ribbon-button-font-weight,
        $font-weight-focus-pressed: $ametys-ribbon-button-font-weight,
        $font-weight-disabled: $ametys-ribbon-button-font-weight,
        
        $arrow-glyph-color: $ametys-ribbon-button-arrow-glyph-color,
                
        $color: $ametys-ribbon-button-color,
        $background-color: $ui-background-color,
        
        $color-over: $ametys-ribbon-button-color-over,
        $background-color-over: $ametys-ribbon-button-background-color-over,
        
        $color-pressed: $ametys-ribbon-button-color-pressed,
        $background-color-pressed: $ametys-ribbon-button-background-color-pressed,
        
        $color-focus: $ametys-ribbon-button-color-focus,
        $background-color-focus: $ametys-ribbon-button-background-color-focus        
    );   
    .#{$prefix}btn-arrow-bottom,
    .#{$prefix}btn-split-bottom {
        > .#{$prefix}btn-button-#{$ui}-large {
            padding-bottom: 0;
        }
    }
    
    .#{$prefix}btn-text.#{$prefix}btn-icon-top > .#{$prefix}btn-icon-el.#{$prefix}btn-icon-el-#{$ui}-large {
        margin-top: ($ametys-ribbon-button-padding-large - 1px) - 1px;
        margin-right: ($ametys-ribbon-button-padding-large - 1px);
        margin-left: ($ametys-ribbon-button-padding-large - 1px); 
        margin-bottom: $ametys-ribbon-button-iconspacing-large + 1px;
        
        &:before {
            vertical-align: top;
        }
    }
    .#{$prefix}btn-inner-#{$ui}-large {
        padding: ($ametys-ribbon-button-texticonalignadjust-large - 2px) ($ametys-ribbon-button-padding-large - 1px) 2px ($ametys-ribbon-button-padding-large - 1px);
        
        .#{$prefix}chrome & {
            padding: ($ametys-ribbon-button-texticonalignadjust-large - 1px) ($ametys-ribbon-button-padding-large - 1px) 1px ($ametys-ribbon-button-padding-large - 1px);
        }
         
        height: 2*$ametys-ribbon-button-line-height;
    }
    
    .#{$prefix}btn-text.#{$prefix}btn-icon-top > .#{$prefix}btn-icon-el-#{$ui}-large {
        margin-bottom: $ametys-ribbon-button-iconspacing-large - 1px;
        margin-top: 1px; 
    }
    
    .#{$prefix}btn-inner-#{$ui}-large .arrow {
        @if $enable-font-icons and ($button-large-arrow-glyph != null) {
            &:after {
                @include font-icon($glyph: $button-large-arrow-glyph, $pseudo: false);
                color: $ametys-ribbon-button-arrow-glyph-color;
                font-size: $ametys-ribbon-button-font-size;
            }
        } @else {
            padding-right: 7px;
            background-image: theme-background-image('button/#{$ui}-large-arrow');
        }
        width: 7px;
        display: inline;
    }
    .#{$prefix}btn-inner-#{$ui}-large .arrow.arrow-with-text {
        margin-left: $ametys-ribbon-button-font-size / 6;
    }
    .#{$prefix}btn-wrap-#{$ui}-large.#{$prefix}btn-arrow-bottom:after,
    .#{$prefix}btn-wrap-#{$ui}-large.#{$prefix}btn-split-bottom:after {
        display: none;
    }
    
    .#{$prefix}btn-wrap-#{$ui}-large > .#{$prefix}btn-button-#{$ui}-large {
    	display: inline-block;
    }
    
    .#{$prefix}btn-button-#{$ui}-large > .#{$prefix}btn-icon-el-#{$ui}-large {
    	position: relative;
    	display: inline-block;
    }
    
    .#{$prefix}btn-#{$ui}-large .#{$prefix}btn-icon-el-#{$ui}-large {
    	&:before {
	    	margin-left: 0px;
	    	font-size: 32px;
    	}
    	
    	&:after {
	    	margin-left: 0px;
	    	position: absolute;
	    	right:-2px;
	    	bottom:-2px;
	    	font-size: 18px;
	    	line-height:18px;
	    	text-shadow: 0px 0px 2px #eeeeee;
    	}
    }
    
    .#{$prefix}btn-#{$ui}-small .#{$prefix}btn-icon-el-#{$ui}-small {
    	&:before {
	    	margin-left: 0px;
	    	font-size: 16px;
    	}
    	
    	&:after {
	    	margin-left: 0px;
	    	position: absolute;
	    	left:8px;
	    	bottom:0px;
	    	line-height:10px;
	    	font-size: 10px;
    	}
    }
    
    .#{$prefix}btn-#{$ui}-large .#{$prefix}btn-icon-el-#{$ui}-large, .#{$prefix}btn-#{$ui}-small .#{$prefix}btn-icon-el-#{$ui}-small {
        &:before { color: $ametys-ribbon-button-glyph-color; }
        &:after { color: $ametys-ribbon-button-glyph-decorator-color; }
    }
    .#{$prefix}btn-pressed.#{$prefix}btn-#{$ui}-large .#{$prefix}btn-icon-el-#{$ui}-large, .#{$prefix}btn-pressed.#{$prefix}btn-#{$ui}-small .#{$prefix}btn-icon-el-#{$ui}-small {
        &:before { color: $ametys-ribbon-button-glyph-color-pressed; }
        &:after { color: $ametys-ribbon-button-glyph-decorator-color-pressed; }
    }
    .#{$prefix}btn-over.#{$prefix}btn-#{$ui}-large .#{$prefix}btn-icon-el-#{$ui}-large, .#{$prefix}btn-pressed.#{$prefix}btn-#{$ui}-small .#{$prefix}btn-icon-el-#{$ui}-small {
        &:before { color:$ametys-ribbon-button-glyph-color-over; }
        &:after { color: $ametys-ribbon-button-glyph-decorator-color-over; }
    }
    
    
    /* over menu */
    .#{$prefix}btn-over.a-fluent-control-button-split {
        /* button */
        .#{$prefix}btn-button-#{$ui}-small,
        .#{$prefix}btn-button-#{$ui}-large {
            background-color: $ametys-ribbon-button-background-color-over;
        }
        .#{$prefix}btn-wrap-#{$ui}-small.#{$prefix}btn-split-right:after,
        .#{$prefix}btn-inner-#{$ui}-large {
            background-color: $ui-background-color;
        }
        &.#{$prefix}btn-pressed {
            .#{$prefix}btn-wrap-#{$ui}-small.#{$prefix}btn-split-right:after,
            .#{$prefix}btn-inner-#{$ui}-large {
                background-color: $ametys-ribbon-button-background-color-pressed;
            }
        }
        /* trigger */
        &.a-fluent-control-button-split-overtrigger {
            .#{$prefix}btn-button-#{$ui}-small,
            .#{$prefix}btn-button-#{$ui}-large {
                background-color: $ui-background-color;
            }    
            &.#{$prefix}btn-pressed {
                .#{$prefix}btn-button-#{$ui}-small,
                .#{$prefix}btn-button-#{$ui}-large {
                    background-color: $ametys-ribbon-button-background-color-pressed;
                }
            }
            .#{$prefix}btn-wrap-#{$ui}-small.#{$prefix}btn-split-right:after,
            .#{$prefix}btn-inner-#{$ui}-large {
                background-color: $ametys-ribbon-button-background-color-over;
            }
        }
    }
};
    
@include ametys-ribbon-button('ribbon-component', $ametys-ribbon-button-background-color);
@include ametys-ribbon-button('ribbon-menu', $ametys-ribbon-menu-background-color);

/**
 * Loading
 */
.a-fluent-loading .#{$prefix}btn-wrap
{
    position: relative;
    text-align: left;
    
    .#{$prefix}btn-button
    {
        &:before {
            position: absolute;
            content: " ";
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            background-image: theme-background-image('loadmask/loading', 'gif');
            background-repeat: no-repeat;
        }
        
        .#{$prefix}btn-icon-el {
            @include opacity(0.1);
        }
    }
}
.#{$prefix}btn-ribbon-component-large.a-fluent-loading .#{$prefix}btn-wrap .#{$prefix}btn-button:before {
    background-position: center 11px;
}
.#{$prefix}btn-ribbon-component-small.a-fluent-loading .#{$prefix}btn-wrap .#{$prefix}btn-button:before {
    background-position: left center;
}

