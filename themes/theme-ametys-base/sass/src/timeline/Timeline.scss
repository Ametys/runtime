/*
 *  Copyright 2015 Anyware Services
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */
 
.a-timeline {
	.#{$prefix}grid-cell-inner {
	    padding: 0;
	}
	
	.#{$prefix}grid-view {
	
		.#{$prefix}grid-item {
			background: #fff none repeat scroll 0 0 !important;
		    border: 0 none !important;
		    border-width: 0px !important;
		    
		    &:first-child {
				margin-top: $ametys-timeline-font-size*2/3;
			}
		    
		    &.#{$prefix}grid-item-over, &.#{$prefix}grid-item-selected, &.#{$prefix}grid-item-selected {
		    	background: #fff none repeat scroll 0 0 !important;
			    border: 0 none !important;
			    border-width: 0px !important;
		    }
		    
		    &.#{$prefix}grid-item-selected {
		    	.#{$prefix}grid-cell:first-child {
					border-left-width: 0px;
					
					.#{$prefix}grid-cell-inner {
					    padding-left: 0px;
					}
		    	}
		    }
		}
	}
	
	.#{$prefix}grid-group-hd {
		background: #fff none repeat scroll 0 0;
		border: 0 none;
		padding: 0;
		
		&:before {
		    background: $ametys-timeline-border-color none repeat scroll 0 0;
		    content: "";
		    height: 100%;
		    left: $ametys-timeline-font-size*1.2 + 50px;
		    position: absolute;
		    width: 3px;
		}
		
		.timeline-day {
		    background: #fff none repeat scroll 0 0;
		    border: 2px solid $ametys-timeline-border-color;
		    border-radius: 3px;
		    color: $ametys-timeline-border-color;
		    font-size: $ametys-timeline-font-size*1.1;
		    padding: $ametys-timeline-font-size*1.2/4;
		    position: relative;
		    text-align: center;
		    width: 100px;
		    font-weight: normal;
		    margin: 0 $ametys-timeline-font-size*1.2 $ametys-timeline-font-size*1.3;
		}
	}

	.timeline-item {
		margin: 0 $ametys-timeline-font-size*1.2;
		
		&:before {
			background: $ametys-timeline-border-color none repeat scroll 0 0;
		    content: "";
		    height: 100%;
		    left: $ametys-timeline-font-size*1.2 + 50px;
		    position: absolute;
		    width: 3px;
		}
		
		.profile-img-wrap {
		    background: #fff none repeat scroll 0 0;
		    float: left;
		    padding: 5px 0;
		    position: relative;
		    text-align: center;
		    width: 100px;
		    color: $ametys-timeline-color;
		    font-size: 0.9em;
		    
		    img {
			    border-radius: 50%;
			    height: 46px;
			    width: 46px;
			}
		}
		
		.contents-wrap {
		    border: 1px solid $ametys-timeline-border-color;
		    margin: 0 0 15px 110px;
		    padding: 10px 10px 7px 15px;
		    position: relative;
		    white-space: normal;
		    min-height: 70px;
		    z-index:0;
		    
		    &:before, &:after {
		    	content: "";
			    display: block;
			    height: 0;
			    left: 0;
			    position: absolute;
			    top: 0;
			    width: 0;
			    border-bottom: 9px solid transparent;
			    border-top: 9px solid transparent;
		    }
		    
		    &:before {
			    border-right: 9px solid $ametys-timeline-border-color;
			    margin: 15px 0 0 -9px;
			}
			
			&:after {
			    border-right: 9px solid #fff;
			    margin: 15px 0 0 -8px;
			}
		    
		    .bg-image {
			  background-repeat: no-repeat;
			  background-position: right bottom;
			  opacity:0.7;
			  top: 0;
			  left: 0;
			  bottom: 6px;
			  right: 6px;
			  position: absolute;
			  z-index: -1;   
			}
			
			.icon-glyph {
				&:before {
					font-size: 32px;
					line-height: 32px;
					position: absolute;
					bottom: 5px;
					right:2px;
					color:#717171;
				}
			}
			
			.comment {
			    border-left: 5px solid $ametys-timeline-border-color;
			    padding: 10px 20px 10px 35px;
			    color: $ametys-timeline-comment-color;
			    text-indent: -30px;
			    
			    span {
				    color:  $ametys-timeline-color-lighter;
				    font-size: $ametys-timeline-font-size*2;
				    margin-right: 8px;
				    text-indent:-15px;
				    font-style:italic;
				}
			}
			
			.top {
				text-align: right;
				color: $ametys-timeline-color-light;
				padding-bottom: $ametys-timeline-font-size/4;
			}
			
			.text {
				padding-bottom: $ametys-timeline-font-size/4;
				padding-right: 32px;
				line-height: $ametys-timeline-font-size*1.5;
				
				a {
				    color: $ametys-timeline-color;
				    text-decoration: none;
				    
				    &:hover {
						text-decoration: underline;
					}
				}
				
				strong {
				    color: $ametys-timeline-color;
				}
				
			}
		}
		
		&.warn  {
			.contents-wrap {
				border-color: $ametys-timeline-border-color-warn;
				
				&:before {
					border-right-color: $ametys-timeline-border-color-warn;
				}
				
				.text {
					strong {
					    color: $ametys-timeline-color-warn;
					}
				}
			}
		}
		
		&.error  {
			.contents-wrap {
				border-color: $ametys-timeline-border-color-error;
				
				&:before {
					border-right-color: $ametys-timeline-border-color-error;
				}
				
				.text {
					strong {
					    color: $ametys-timeline-color-error;
					}
				}
			}
		}
	}
}

@for $i from 1 through length($ametys-tool-tab-colors) {
    $index: $i - 1;

    $active-color-dark: nth($ametys-tool-tab-colors-dark, $i);
    $active-color: nth($ametys-tool-tab-colors, $i);
    $active-color-light: nth($ametys-tool-tab-colors-light, $i);
    
    .a-tool-layout-zoned-focused.a-tool-layout-zoned-panel-#{$index*10} {
		.a-timeline {
			.#{$prefix}group-hd-container:before {
    			background-color: $active-color;
			}
			
			.#{$prefix}grid-group-hd {
				&:before {
					background-color: $active-color;
				}
				
				.timeline-day {
					color: $active-color;
					border-color: $active-color;
				}
			}
			
			.timeline-item {
				&:before {
    				background-color: $active-color;
				}
			
				.profile-img-wrap {
					/*color: $active-color;*/
				}
		
				.text {
					a {
					    color: $active-color;
					    text-decoration: none;
					}
					
					strong  {
						color: $active-color;
					}
		
				}
				
				&.warn {
					.contents-wrap {
						border-color: $ametys-timeline-border-color-warn;
						
						:before {
							border-right-color: $ametys-timeline-border-color-warn;
						}
						
						.text {
							strong {
								 color: $ametys-timeline-color-warn;
							}
						}
						
						a {
					    	color: $ametys-timeline-color-warn;
						}
					}
				}
				
				&.error {
					.contents-wrap {
						border-color: $ametys-timeline-border-color-error;
						
						:before {
							border-right-color: $ametys-timeline-border-color-error;
						}
						
						.text {
							strong {
								 color: $ametys-timeline-color-error;
							}
						}
						
						a {
					    	color: $ametys-timeline-color-error;
						}
					}
				}
			}
		}
    }
}
