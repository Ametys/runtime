/*
 *  Copyright 2015 Anyware Services
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */

.#{$prefix}container-tool-layout {
    background-color: $ametys-tool-base-color;
    padding: $ametys-tool-layout-padding;
}

@include extjs-tab-panel-ui(
    $ui: 'tool-layoutzone',
    
    $ui-tab-border-width: $ametys-tool-border-top-width $ametys-tool-border-width 0 $ametys-tool-border-width,
    $ui-tab-border-radius: 0,
    
    $ui-tab-font-size: $ametys-tool-tab-font-size,
    $ui-tab-line-height: $ametys-tool-tab-line-height,
    $ui-tab-font-weight: $ametys-tool-tab-normal-font-weight,
    
    $ui-strip-border-width: $ametys-tool-border-width $ametys-tool-border-width 0 $ametys-tool-border-width,
    $ui-strip-height: top($ametys-tool-inner-border-width) + $ametys-tool-border-width,
    $ui-bar-background-color: $ametys-tool-background-color,

    $ui-tab-padding: $ametys-tool-tab-padding,

    $ui-tab-outline-width-focus: transparent,
    $ui-tab-inner-border-color-focus: transparent,
    $ui-tab-inner-border-color-focus-over: transparent,
    $ui-tab-inner-border-color-active: transparent,
    $ui-tab-inner-border-color-focus-active: transparent,
    
    $ui-tab-closable-icon-width: $ametys-tool-tab-close-icon-size,
    $ui-tab-closable-icon-height: $ametys-tool-tab-close-icon-size           
);

// Fix because right padding is too large by default
.#{$prefix}tab-closable.#{$prefix}tab-tool-layoutzone .#{$prefix}tab-button {
    padding-right: $ametys-tool-tab-close-icon-size + $tab-closable-icon-spacing - right($tab-padding);
}
@if $include-rtl {
    .#{$prefix}rtl.#{$prefix}tab-closable.#{$prefix}tab-tool-layoutzone .#{$prefix}tab-button {
        padding-right: 0px;
        padding-left: $ametys-tool-tab-close-icon-size + $tab-closable-icon-spacing - right($tab-padding);
    }
}


// As there is a bug in extjs https://www.sencha.com/forum/showthread.php?305990-6.0.1-Issue-in-theme-neutral-Scss-mixin-extjs-tab-ui&p=1118297#post1118297
// We have to define size our selves
.#{$prefix}tab-tool-layoutzone,
.#{$prefix}tab-tool-layoutzone.#{$prefix}tab-active {
    .#{$prefix}tab-close-btn {
        background-position: 0 -$ametys-tool-tab-close-icon-size;
    }
    .#{$prefix}tab-close-btn-over {
        background-position: -$ametys-tool-tab-close-icon-size -$ametys-tool-tab-close-icon-size;
    }
    .#{$prefix}tab-close-btn-pressed {
        background-position: -2*$ametys-tool-tab-close-icon-size -$ametys-tool-tab-close-icon-size;
    }
}

// Hide close tool on non active tool
.#{$prefix}tab-tool-layoutzone .#{$prefix}tab-close-btn { @include opacity(0); }
.#{$prefix}tab-tool-layoutzone.#{$prefix}tab-over .#{$prefix}tab-close-btn { @include opacity(0.5); }
.#{$prefix}tab-tool-layoutzone.#{$prefix}tab-active .#{$prefix}tab-close-btn { @include opacity(1); }

.#{$prefix}tab-tool-layoutzone .#{$prefix}tab-icon-el-tool-layoutzone {
	&[class^="flaticon-"]:before, &[class*=" flaticon-"]:before {
	   	margin-left: 0px;
	   	color:#e1e1e1;
	   	position: absolute;
	   	font-size: 16px;
	  	line-height:16px;
	   	top:0;
	   	left:0;
	   	height: 100%;
	}
   	
	&[class^="flaticon-decorator-"]:after, &[class*=" flaticon-decorator-"]:after {
	  	margin-left: 0px;
	  	position: absolute;
	  	right:-2px;
	  	bottom:-2px;
	  	color:#FFFFFF;
	  	font-size: 10px;
	  	line-height:10px;
	  	text-shadow: 2px 2px #666;
	}
}



.#{$prefix}tab-tool-layoutzone > div {
    overflow: hidden;
}

@include extjs-panel-ui(
    $ui: 'tool-layoutzone',
    
    $ui-border-radius: 0,
    $ui-border-width: 0 right($ametys-tool-border-width) bottom($ametys-tool-border-width) left($ametys-tool-border-width)        
);

@include extjs-panel-ui(
    $ui: 'ametys-tool-panel',
    
    $ui-border-width: 0 right($ametys-tool-inner-border-width) bottom($ametys-tool-inner-border-width) left($ametys-tool-inner-border-width)
);

@for $i from 1 through length($ametys-tool-tab-colors) {
    $index: $i - 1;
    
    .a-tool-layout-zoned-panel-#{$index*10}.#{$prefix}panel-tool-layoutzone {
            @include tab-color(
                $ui: 'tool-layoutzone',
                
                $tab-color-active: $ametys-tool-tab-gray-dark,
                $tab-border-color-active: $ametys-tool-tab-gray-light,
                $tab-background-color-active: $ametys-tool-tab-gray-light,
    
                $tab-color: $ametys-tool-tab-gray-dark,
                $tab-border-color: $ametys-tool-background-color, 
                $tab-background-color: $ametys-tool-background-color, 
    
                $tab-color-over: nth($ametys-tool-tab-colors-dark, $i),
                $tab-border-color-over: nth($ametys-tool-tab-colors-light, $i),
                $tab-background-color-over: nth($ametys-tool-tab-colors-light, $i),
                
                $strip-border-color: $ametys-tool-tab-gray-light,       // active border color
                $strip-background-color: $ametys-tool-tab-gray-light    // active background color
            );
            
            // bottom part of the tab            
            .#{$prefix}panel-tool-layoutzone-outer-border-rbl {
                border-color: $ametys-tool-tab-gray-light !important;   // active border color
            }
            // For docked items and inner bottom part of tab
            .#{$prefix}panel-body-ametys-tool-panel,
            .#{$prefix}panel-ametys-tool-panel > .x-docked {
                border-color: $ametys-tool-tab-gray-light !important;   // active background color
            }
            
    }
}

@for $i from 1 through length($ametys-tool-tab-colors) {
    $index: $i - 1;
    
    .a-tool-layout-zoned-panel-#{$index*10}.a-tool-layout-zoned-focused {
            @include tab-color(
                $ui: 'tool-layoutzone',
                
                $tab-color-active: nth($ametys-tool-tab-colors-light, $i),
                $tab-border-color-active: nth($ametys-tool-tab-colors, $i), 
                $tab-background-color-active: nth($ametys-tool-tab-colors, $i),
    
                $tab-color: $ametys-tool-tab-gray-dark,
                $tab-border-color: $ametys-tool-background-color, 
                $tab-background-color: $ametys-tool-background-color, 
    
                $tab-color-over: nth($ametys-tool-tab-colors-dark, $i),
                $tab-border-color-over: nth($ametys-tool-tab-colors-light, $i),
                $tab-background-color-over: nth($ametys-tool-tab-colors-light, $i),
                
                $strip-border-color: nth($ametys-tool-tab-colors, $i),      // active border color
                $strip-background-color: nth($ametys-tool-tab-colors, $i)   // active background color              
            );

            // bottom part of the tab            
            .#{$prefix}panel-tool-layoutzone-outer-border-rbl {
                border-color: nth($ametys-tool-tab-colors, $i) !important;  // active border color
            }
            // For docked items and inner bottom part of tab
            .#{$prefix}panel-body-ametys-tool-panel,
            .#{$prefix}panel-ametys-tool-panel > .x-docked {
                border-color: nth($ametys-tool-tab-colors, $i) !important;  // active background color
            }
    }
} 

/**
 * Contextual menu
 */
.a-tools-menu-close {
    background-image: theme-background-image('ui-tools/close_16');
}
.a-tools-menu-close-others {
    background-image: theme-background-image('ui-tools/close_others_16');
}
.a-tools-menu-close-all {
    background-image: theme-background-image('ui-tools/close_all_16');
}
