<?xml version="1.0" encoding="UTF-8"?>
<!--
   Copyright 2015 Anyware Services

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
   -->
<plugin xmlns="http://www.ametys.org/schema/plugin"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.ametys.org/schema/plugin http://www.ametys.org/schema/plugin-4.0.xsd"
        runtimeVersion="4.0" version="4.0">
    
    <config>
        <!-- Debug parameters -->
        <param id="runtime.mode.dev" type="boolean">
            <!-- 
                This parameter allows to load UI in debug mode (i.e. load CSS/JS not minified)
             -->
            <label i18n="true">PLUGINS_CORE_UI_DEBUG_UI_LABEL</label>
            <description i18n="true">PLUGINS_CORE_UI_DEBUG_UI_DESCRIPTION</description>
            <enumeration>
                <entry>
                    <label i18n="true">PLUGINS_CORE_UI_DEBUG_UI_VAL_0</label>
                    <value>false</value>
                </entry>
                <entry>
                    <label i18n="true">PLUGINS_CORE_UI_DEBUG_UI_VAL_1</label>
                    <value>true</value>
                </entry>
            </enumeration>
            <validation>
                <mandatory/>
            </validation>
            <default-value>0</default-value>
            <category i18n="true">plugin.core:PLUGINS_CORE_SYSTEM_CONFIG_CATEGORY</category>
            <group i18n="true">plugin.core:PLUGINS_CORE_DEBUG_GROUP</group>
            <order>20</order>
        </param>
    </config>
    
    <extension-points>
        <extension-point id="org.ametys.core.ui.dispatcher.DispatchProcessExtensionPoint" 
                         class="org.ametys.core.ui.dispatcher.DispatchProcessExtensionPoint"
                         safe="true"/>
                         
        <extension-point id="org.ametys.core.ui.StaticFileImportsManager"
                         class="org.ametys.core.ui.StaticFileImportsManager"
                         safe="true">
            <!-- Handles the static import files that are used on client side -->
        </extension-point>
        
        <extension-point id="org.ametys.core.ui.RibbonControlsManager"
                         class="org.ametys.core.ui.RibbonControlsManager"
                         safe="true">
            <!-- Handles the controls that may takes place in the ribbon -->
        </extension-point>

        <extension-point id="org.ametys.core.ui.RibbonTabsManager"
                         class="org.ametys.core.ui.RibbonTabsManager"
                         safe="true">
            <!-- Handles the dynamic tabs that may takes place in the ribbon -->
        </extension-point>

        <extension-point id="org.ametys.core.ui.UIToolsFactoriesManager"
                         class="org.ametys.core.ui.UIToolsFactoriesManager"
                         safe="true">
            <!-- Handles the factories that are used on client side -->
        </extension-point>

        <extension-point id="org.ametys.core.ui.RelationsManager"
                         class="org.ametys.core.ui.RelationsManager"
                         safe="true">
            <!-- Handles the handlers that are used on client side to create relations between objects (e.g. by drag and droping) -->
        </extension-point>
        
        <extension-point id="org.ametys.core.ui.widgets.WidgetsManager"
                         class="org.ametys.core.ui.widgets.WidgetsManager"
                         config="/WEB-INF/param/default-widgets.xml"
                         safe="true">
            <!-- Handles the widgets that are used on client side to creates forms (e.g. editing content) -->
            <normal>
                <single>
                    <boolean>edition.checkbox</boolean>
                    <content>edition.select-content</content>
                    <date>edition.date</date>
                    <datetime>edition.datetime</datetime>
                    <double>edition.doublefield</double>
                    <file>edition.file</file>
                    <geocode>edition.geocode</geocode>
                    <long>edition.longfield</long>
                    <password>edition.password</password>
                    <reference>edition.url-reference</reference>
                    <rich_text>edition.richtext</rich_text>
                    <string>edition.textfield</string>
                    <sub_content>edition.compose-content</sub_content>
                    <user>edition.user</user>
                    <url>edition.textfield</url>
                </single>
                <multiple>
                    <content>edition.select-content</content>
                    <string>edition.textfield</string>
                    <reference>edition.url-reference</reference>
                    <sub_content>edition.compose-content</sub_content>
                    <user>edition.user</user>
                    <url>edition.textfield</url>
                </multiple>
            </normal>
            <enumerated>
                <single>
                    <string>edition.combobox</string>
                </single>
                <multiple>
                    <string>edition.boxselect</string>
                </multiple>
            </enumerated>
        </extension-point>

        <extension-point id="org.ametys.core.ui.MessageTargetFactoriesManager"
                         class="org.ametys.core.ui.MessageTargetFactoriesManager"
                         safe="true">
            <!-- Handles the factories for message bus targets that are used on client side -->
        </extension-point>
        
        <extension-point id="org.ametys.plugins.core.ui.script.ScriptBindingExtensionPoint"
                         class="org.ametys.plugins.core.ui.script.ScriptBindingExtensionPoint"
                         safe="true">
            <!-- Provided additional script binding for the admin JS scripts tool -->
        </extension-point>
        
        <extension-point id="org.ametys.core.ui.RibbonImportManager"
                         class="org.ametys.core.ui.RibbonImportManager"
                         safe="true">
            <!-- Handles the imports for the ribbon configuration -->
        </extension-point>
    </extension-points>
    
    <feature name="saxclienthelper" safe="true">
        <components>
            <component class="org.ametys.core.ui.SAXClientSideElementHelper"
                       id="org.ametys.core.ui.SAXClientSideElementHelper" 
                       role="org.ametys.core.ui.SAXClientSideElementHelper"/>
        </components>
    </feature>
    
    <feature name="runtime.debug">
        <!-- Mark the Developer mode parameter as available. If your application does not handle it you can unactivate it. -->
        <config>
            <param-ref id="runtime.mode.dev"/>
        </config>
    </feature>
    
    <feature name="runtime.appmenu.reload" safe="true">
        <extensions>
            <extension id="org.ametys.plugins.core.ReloadWorkspace"
                     point="org.ametys.core.ui.RibbonControlsManager"
                     class="org.ametys.core.ui.StaticClientSideElement">
              <class name="Ametys.ribbon.element.ui.ButtonController">
                 <action>Ametys.plugins.coreui.system.reload.ReloadActions.reload</action>
                  
                 <label i18n="true">PLUGINS_CORE_UI_RELOAD_WORKSPACE_LABEL</label>
                 <description i18n="true">PLUGINS_CORE_UI_RELOAD_WORKSPACE_DESCRIPTION</description>
                  
                 <icon-glyph>ametysicon-reload8</icon-glyph>
                 <param name="icon-small" file="true">img/system/reload_16.png</param>
                 <param name="icon-medium" file="true">img/system/reload_32.png</param>
                 <param name="icon-large" file="true">img/system/reload_48.png</param>
              </class>
              <scripts>
                <file>js/Ametys/plugins/coreui/system/reload/ReloadActions.js</file>
              </scripts>
         </extension>
        </extensions>
    </feature>
    
    <feature name="staticimports.helpers" safe="true">
        <extensions>
            <extension id="org.ametys.runtime.helpers"
                       point="org.ametys.core.ui.StaticFileImportsManager"
                       class="org.ametys.core.ui.StaticFileImportsClientSideElement">
                <scripts>
                    <file>js/Ametys/helper/SelectUser.js</file>
                    <file>js/Ametys/helper/SelectGroup.js</file>
                    
                    <file>js/Ametys/helper/EnterURL.js</file>
                    <file>js/Ametys/helper/FileUpload.js</file>

                    <file>js/Ametys/helper/ChooseLocation.js</file>
                    <file>js/Ametys/helper/ChooseLocation/LoadGoogleMaps.js</file>

                    <file>js/Ametys/clipboard/Clipboard.js</file>

                    <file>js/Ametys/helper/ChooseColor.js</file>
                </scripts>
            </extension>
            
            <extension id="org.ametys.runtime.Widgets"
                       point="org.ametys.core.ui.StaticFileImportsManager"
                       class="org.ametys.core.ui.StaticFileImportsClientSideElement">
                <scripts>
                    <file>js/Ametys/form/widget/File.js</file>
                    <file>js/Ametys/form/widget/File/FileSource.js</file>
                    
                    <file>js/Ametys/form/widget/File/External.js</file>
                </scripts>
                <depends>
                    <org.ametys.core.ui.StaticFileImportsManager>org.ametys.runtime.helpers</org.ametys.core.ui.StaticFileImportsManager>
                </depends>
            </extension>
        </extensions>
    </feature>
    
    <feature name="widgets.default.text" safe="true">
        <extensions>
            <extension id="edition.textfield"
                point="org.ametys.core.ui.widgets.WidgetsManager"
                class="org.ametys.core.ui.widgets.StaticClientSideWidget">
                <class name="Ametys.form.widget.Text">
                    <ftypes>string</ftypes>
                    <supports-enumerated>false</supports-enumerated>
                    <supports-non-enumerated>true</supports-non-enumerated>
                    <supports-multiple>true</supports-multiple>
                    <supports-non-multiple>true</supports-non-multiple>
                </class>
                <scripts>
                    <file>js/Ametys/form/widget/DefaultWidgets.js</file>
                </scripts>                
            </extension>
        </extensions>
    </feature>
    <feature name="widgets.others.hidden" safe="true">
        <extensions>
            <extension id="edition.hidden"
                point="org.ametys.core.ui.widgets.WidgetsManager"
                class="org.ametys.core.ui.widgets.StaticClientSideWidget">
                <class name="Ext.form.field.Hidden">
                    <ftypes>string</ftypes>
                    <supports-enumerated>false</supports-enumerated>
                    <supports-non-enumerated>true</supports-non-enumerated>
                    <supports-multiple>false</supports-multiple>
                    <supports-non-multiple>true</supports-non-multiple>
                </class>
            </extension>
        </extensions>
    </feature>
    <feature name="widgets.default.password" safe="true">
        <extensions>
            <extension id="edition.password"
                point="org.ametys.core.ui.widgets.WidgetsManager"
                class="org.ametys.core.ui.widgets.StaticClientSideWidget">
                <class name="Ametys.form.field.Password">
                    <ftypes>password</ftypes>
                    <supports-enumerated>false</supports-enumerated>
                    <supports-non-enumerated>true</supports-non-enumerated>
                    <supports-multiple>false</supports-multiple>
                    <supports-non-multiple>true</supports-non-multiple>
                </class>
            </extension>
        </extensions>
    </feature>
    <feature name="widgets.default.changepassword" safe="true">
        <extensions>
            <extension id="edition.changepassword"
                point="org.ametys.core.ui.widgets.WidgetsManager"
                class="org.ametys.core.ui.widgets.StaticClientSideWidget">
                <class name="Ametys.form.field.ChangePassword">
                    <ftypes>password</ftypes>
                    <supports-enumerated>false</supports-enumerated>
                    <supports-non-enumerated>true</supports-non-enumerated>
                    <supports-multiple>false</supports-multiple>
                    <supports-non-multiple>true</supports-non-multiple>
                </class>
            </extension>
        </extensions>
    </feature>
    <feature name="widgets.default.combo" safe="true">
        <extensions>
            <extension id="edition.combobox"
                point="org.ametys.core.ui.widgets.WidgetsManager"
                class="org.ametys.core.ui.widgets.StaticClientSideWidget">
                <class name="Ametys.form.widget.ComboBox">
                    <ftypes>string,long,boolean,double</ftypes>
                    <supports-enumerated>true</supports-enumerated>
                    <supports-non-enumerated>false</supports-non-enumerated>
                    <supports-multiple>true</supports-multiple>
                    <supports-non-multiple>true</supports-non-multiple>
                </class>
                <scripts>
                    <file>js/Ametys/form/widget/DefaultWidgets.js</file>
                </scripts>
            </extension>
        </extensions>
    </feature>
    <feature name="widgets.others.boxselect" safe="true">
        <extensions>
            <extension id="edition.boxselect"
                point="org.ametys.core.ui.widgets.WidgetsManager"
                class="org.ametys.core.ui.widgets.StaticClientSideWidget">
                <class name="Ametys.form.widget.LocalComboBox">
                    <ftypes>string</ftypes>
                    <supports-enumerated>true</supports-enumerated>
                    <supports-non-enumerated>false</supports-non-enumerated>
                    <supports-multiple>true</supports-multiple>
                    <supports-non-multiple>true</supports-non-multiple>
                </class>
                <scripts>
                    <file>js/Ametys/form/widget/LocalComboBox.js</file>
                </scripts>
            </extension>
        </extensions>
    </feature>     
    <feature name="widgets.default.long" safe="true">
        <extensions>
            <extension id="edition.longfield"
                point="org.ametys.core.ui.widgets.WidgetsManager"
                class="org.ametys.core.ui.widgets.StaticClientSideWidget">
                <class name="Ametys.form.widget.Long">
                    <ftypes>long</ftypes>
                    <supports-enumerated>false</supports-enumerated>
                    <supports-non-enumerated>true</supports-non-enumerated>
                    <supports-multiple>false</supports-multiple>
                    <supports-non-multiple>true</supports-non-multiple>
                </class>
                <scripts>
                    <file>js/Ametys/form/widget/DefaultWidgets.js</file>
                </scripts>                
            </extension>
        </extensions>
    </feature>    
    <feature name="widgets.default.double" safe="true">
        <extensions>
            <extension id="edition.doublefield"
                point="org.ametys.core.ui.widgets.WidgetsManager"
                class="org.ametys.core.ui.widgets.StaticClientSideWidget">
                <class name="Ametys.form.widget.Double">
                    <ftypes>double</ftypes>
                    <supports-enumerated>false</supports-enumerated>
                    <supports-non-enumerated>true</supports-non-enumerated>
                    <supports-multiple>false</supports-multiple>
                    <supports-non-multiple>true</supports-non-multiple>
                </class>
                <scripts>
                    <file>js/Ametys/form/widget/DefaultWidgets.js</file>
                </scripts>                
            </extension>
        </extensions>
    </feature>    
    <feature name="widgets.default.checkbox" safe="true">
        <extensions>
            <extension id="edition.checkbox"
                point="org.ametys.core.ui.widgets.WidgetsManager"
                class="org.ametys.core.ui.widgets.StaticClientSideWidget">
                <class name="Ametys.form.widget.Checkbox">
                    <ftypes>boolean</ftypes>
                    <supports-enumerated>false</supports-enumerated>
                    <supports-non-enumerated>true</supports-non-enumerated>
                    <supports-multiple>false</supports-multiple>
                    <supports-non-multiple>true</supports-non-multiple>
                </class>
                <scripts>
                    <file>js/Ametys/form/widget/DefaultWidgets.js</file>
                </scripts>                
            </extension>
        </extensions>
    </feature>    
    <feature name="widgets.default.date" safe="true">
        <extensions>
            <extension id="edition.date"
                point="org.ametys.core.ui.widgets.WidgetsManager"
                class="org.ametys.core.ui.widgets.StaticClientSideWidget">
                <class name="Ametys.form.widget.Date">
                    <ftypes>date,datetime</ftypes>
                    <supports-enumerated>false</supports-enumerated>
                    <supports-non-enumerated>true</supports-non-enumerated>
                    <supports-multiple>false</supports-multiple>
                    <supports-non-multiple>true</supports-non-multiple>
                </class>
                <scripts>
                    <file>js/Ametys/form/widget/DefaultWidgets.js</file>
                </scripts>
            </extension>
        </extensions>
    </feature>    
    <feature name="widgets.default.datetime" safe="true">
        <extensions>
            <extension id="edition.datetime"
                point="org.ametys.core.ui.widgets.WidgetsManager"
                class="org.ametys.core.ui.widgets.StaticClientSideWidget">
                <class name="Ametys.form.widget.DateTime">
                    <ftypes>datetime</ftypes>
                    <supports-enumerated>false</supports-enumerated>
                    <supports-non-enumerated>true</supports-non-enumerated>
                    <supports-multiple>false</supports-multiple>
                    <supports-non-multiple>true</supports-non-multiple>
                </class>
                <scripts>
                    <file>js/Ametys/form/widget/DefaultWidgets.js</file>
                </scripts>                
            </extension>
        </extensions>
    </feature>    
    <feature name="widgets.others.stringhour" safe="true"> 
        <extensions> 
            <extension id="edition.string-time" 
                point="org.ametys.core.ui.widgets.WidgetsManager" 
                class="org.ametys.core.ui.widgets.StaticClientSideWidget"> 
                <class name="Ametys.form.widget.StringTime"> 
                    <ftypes>string</ftypes> 
                    <supports-enumerated>false</supports-enumerated> 
                    <supports-non-enumerated>true</supports-non-enumerated> 
                    <supports-multiple>false</supports-multiple> 
                    <supports-non-multiple>true</supports-non-multiple> 
                </class> 
                <!-- scripts are loaded as static to be extensible -->                 
            </extension>
        </extensions>
    </feature>
    <feature name="widgets.default.datasource.sql" safe="true">
        <extensions>
            <extension id="edition.datasource-sql"
                       point="org.ametys.core.ui.widgets.WidgetsManager"
                       class="org.ametys.core.ui.widgets.StaticClientSideWidget">
               <class name="Ametys.form.widget.SQLDataSource">
                    <ftypes>datasource</ftypes>
                    <supports-enumerated>false</supports-enumerated> 
                    <supports-non-enumerated>true</supports-non-enumerated> 
                    <supports-multiple>false</supports-multiple> 
                    <supports-non-multiple>true</supports-non-multiple>
                </class>
                <scripts>
                    <file>js/Ametys/form/widget/AbstractDataSource.js</file>
                    <file>js/Ametys/form/widget/SQLDataSource.js</file>
                </scripts>
            </extension> 
        </extensions>
    </feature>  
    <feature name="widgets.default.datasource.ldap" safe="true">
        <extensions>
            <extension id="edition.datasource-ldap"
                       point="org.ametys.core.ui.widgets.WidgetsManager"
                       class="org.ametys.core.ui.widgets.StaticClientSideWidget">
               <class name="Ametys.form.widget.LDAPDataSource">
                    <ftypes>datasource</ftypes>
                    <supports-enumerated>false</supports-enumerated> 
                    <supports-non-enumerated>true</supports-non-enumerated> 
                    <supports-multiple>false</supports-multiple> 
                    <supports-non-multiple>true</supports-non-multiple>
                </class>
                <scripts>
                    <file>js/Ametys/form/widget/AbstractDataSource.js</file>
                    <file>js/Ametys/form/widget/LDAPDataSource.js</file>
                </scripts>
            </extension> 
        </extensions>
    </feature> 
    <feature name="widgets.others.tricheckbox" safe="true">
        <extensions>
            <extension id="edition.tricheckbox"
                point="org.ametys.core.ui.widgets.WidgetsManager"
                class="org.ametys.core.ui.widgets.StaticClientSideWidget">
                <class name="Ametys.form.field.TriStateCheckbox">
                    <ftypes>string</ftypes>
                    <supports-enumerated>false</supports-enumerated>
                    <supports-non-enumerated>true</supports-non-enumerated>
                    <supports-multiple>false</supports-multiple>
                    <supports-non-multiple>true</supports-non-multiple>
                </class>
                <scripts>
                    <file>js/Ametys/form/field/TriStateCheckbox.js</file>
                </scripts>
            </extension>
        </extensions>
    </feature>
    <feature name="widgets.default.richtext" safe="true">
        <extensions>
            <extension id="edition.richtext"
                point="org.ametys.core.ui.widgets.WidgetsManager"
                class="org.ametys.core.ui.widgets.StaticClientSideWidget">
                <class name="Ametys.cms.form.widget.RichText">
                    <ftypes>rich_text</ftypes>
                    <supports-enumerated>false</supports-enumerated>
                    <supports-non-enumerated>true</supports-non-enumerated>
                    <supports-multiple>false</supports-multiple>
                    <supports-non-multiple>true</supports-non-multiple>
                </class>
                <scripts>
                    <file>js/Ametys/form/widget/DefaultWidgets.js</file>
                    <file>js/Ametys/form/widget/RichText/RichTextConfiguration.js</file>
                </scripts>                
            </extension>
        </extensions>
    </feature>    
    <feature name="widgets.default.textarea" safe="true">
        <extensions>
            <extension id="edition.textarea"
                point="org.ametys.core.ui.widgets.WidgetsManager"
                class="org.ametys.core.ui.widgets.StaticClientSideWidget">
                <class name="Ametys.form.widget.TextArea">
                    <ftypes>string</ftypes>
                    <supports-enumerated>false</supports-enumerated>
                    <supports-non-enumerated>true</supports-non-enumerated>
                    <supports-multiple>false</supports-multiple>
                    <supports-non-multiple>true</supports-non-multiple>
                </class>
                <scripts>
                    <file>js/Ametys/form/widget/DefaultWidgets.js</file>
                </scripts>                
            </extension>
        </extensions>
    </feature>
    <feature name="widgets.default.code" safe="true">
        <extensions>
            <extension id="edition.code"
                point="org.ametys.core.ui.widgets.WidgetsManager"
                class="org.ametys.core.ui.widgets.StaticClientSideWidget">
                <class name="Ametys.form.field.Code">
                    <ftypes>string</ftypes>
                    <supports-enumerated>false</supports-enumerated>
                    <supports-non-enumerated>true</supports-non-enumerated>
                    <supports-multiple>false</supports-multiple>
                    <supports-non-multiple>true</supports-non-multiple>
                </class>
            </extension>
        </extensions>
    </feature>
    <feature name="widgets.default.reference.url" safe="true">
        <extensions>
            <extension id="edition.url-reference"
                point="org.ametys.core.ui.widgets.WidgetsManager"
                class="org.ametys.core.ui.widgets.StaticClientSideWidget">
                <class name="Ametys.form.widget.UrlReference">
                    <ftypes>reference</ftypes>
                    <supports-enumerated>false</supports-enumerated>
                    <supports-non-enumerated>true</supports-non-enumerated>
                    <supports-multiple>true</supports-multiple>
                    <supports-non-multiple>true</supports-non-multiple>
                </class>
                <scripts>
                    <file>js/Ametys/form/widget/DefaultWidgets.js</file>
                </scripts>
            </extension>
        </extensions>
    </feature>
    <feature name="widgets.others.file" safe="true">
        <extensions>
            <extension id="edition.file"
                point="org.ametys.core.ui.widgets.WidgetsManager"
                class="org.ametys.core.ui.widgets.StaticClientSideWidget">
                <class name="Ametys.form.widget.File">
                    <ftypes>file,binary</ftypes>
                    <supports-enumerated>false</supports-enumerated>
                    <supports-non-enumerated>true</supports-non-enumerated>
                    <supports-multiple>false</supports-multiple>
                    <supports-non-multiple>true</supports-non-multiple>
                </class>
                <depends>
                    <org.ametys.core.ui.StaticFileImportsManager>org.ametys.runtime.helpers</org.ametys.core.ui.StaticFileImportsManager>
                    <org.ametys.core.ui.StaticFileImportsManager>org.ametys.runtime.Widgets</org.ametys.core.ui.StaticFileImportsManager>
                </depends>
            </extension>
        </extensions>
    </feature>

    <feature name="widgets.others.flipflap" safe="true">
        <extensions>
            <extension id="edition.flipflap"
                point="org.ametys.core.ui.widgets.WidgetsManager"
                class="org.ametys.core.ui.widgets.StaticClientSideWidget">
                <class name="Ametys.form.widget.FlipFlap">
                    <ftypes>string</ftypes>
                    <supports-enumerated>true</supports-enumerated>
                    <supports-non-enumerated>false</supports-non-enumerated>
                    <supports-multiple>true</supports-multiple>
                    <supports-non-multiple>false</supports-non-multiple>
                </class>
                <scripts>
                    <file>js/Ametys/form/widget/FlipFlap.js</file>
                </scripts>                
            </extension>
        </extensions>
    </feature>    
    <feature name="widgets.others.group" safe="true">
        <extensions>
            <extension id="edition.group"
                point="org.ametys.core.ui.widgets.WidgetsManager"
                class="org.ametys.core.ui.widgets.StaticClientSideWidget">
                <class name="Ametys.form.widget.Group">
                    <ftypes>string</ftypes>
                    <supports-enumerated>false</supports-enumerated>
                    <supports-non-enumerated>true</supports-non-enumerated>
                    <supports-multiple>true</supports-multiple>
                    <supports-non-multiple>true</supports-non-multiple>
                </class>
                <scripts>
                    <file>js/Ametys/form/widget/Group.js</file>
                </scripts>                
            </extension>
        </extensions>
    </feature>    
    <feature name="widgets.others.user" safe="true">
        <extensions>
            <extension id="edition.user"
                point="org.ametys.core.ui.widgets.WidgetsManager"
                class="org.ametys.core.ui.widgets.StaticClientSideWidget">
                <class name="Ametys.form.widget.User">
                    <ftypes>user,string</ftypes>
                    <supports-enumerated>false</supports-enumerated>
                    <supports-non-enumerated>true</supports-non-enumerated>
                    <supports-multiple>true</supports-multiple>
                    <supports-non-multiple>true</supports-non-multiple>
                </class>
                <scripts>
                    <file>js/Ametys/form/widget/User.js</file>
                </scripts>                
            </extension>
        </extensions>
    </feature>    
    <feature name="widgets.others.userpopulation" safe="true">
        <extensions>
            <extension id="edition.userpopulation"
                point="org.ametys.core.ui.widgets.WidgetsManager"
                class="org.ametys.core.ui.widgets.StaticClientSideWidget">
                <class name="Ametys.form.widget.UserPopulation">
                    <ftypes>string</ftypes>
                    <supports-enumerated>false</supports-enumerated>
                    <supports-non-enumerated>true</supports-non-enumerated>
                    <supports-multiple>true</supports-multiple>
                    <supports-non-multiple>true</supports-non-multiple>
                </class>
                <scripts>
                    <file>js/Ametys/form/widget/UserPopulation.js</file>
                </scripts>
            </extension>
        </extensions>
    </feature>    
    <feature name="widgets.others.userdirectory" safe="true">
        <extensions>
            <extension id="edition.userdirectory"
                point="org.ametys.core.ui.widgets.WidgetsManager"
                class="org.ametys.core.ui.widgets.StaticClientSideWidget">
                <class name="Ametys.form.field.SelectUserDirectory">
                    <ftypes>string</ftypes>
                    <supports-enumerated>false</supports-enumerated>
                    <supports-non-enumerated>true</supports-non-enumerated>
                    <supports-multiple>false</supports-multiple>
                    <supports-non-multiple>true</supports-non-multiple>
                </class>
            </extension>
        </extensions>
    </feature>    
    <feature name="widgets.others.externalizable">
        <extensions>
            <extension id="edition.externalizable"
                point="org.ametys.core.ui.widgets.WidgetsManager"
                class="org.ametys.core.ui.widgets.StaticClientSideWidget">
                <class name="Ametys.form.widget.Externalizable">
                    <ftypes>*</ftypes>
                    <supports-enumerated>true</supports-enumerated>
                    <supports-non-enumerated>true</supports-non-enumerated>
                    <supports-multiple>true</supports-multiple>
                    <supports-non-multiple>true</supports-non-multiple>
                </class>
                <scripts>
                    <file>js/Ametys/form/widget/Externalizable.js</file>
                </scripts>  
                <css>
                    <file>css/Ametys/form/externalizable.css</file>
                </css>                
            </extension>
        </extensions>
    </feature>
    <feature name="widgets.others.right">
        <extensions>
            <extension id="edition.right"
                point="org.ametys.core.ui.widgets.WidgetsManager"
                class="org.ametys.core.ui.widgets.StaticClientSideWidget">
                <class name="Ametys.form.widget.Right">
                    <ftypes>string</ftypes>
                    <supports-enumerated>false</supports-enumerated>
                    <supports-non-enumerated>true</supports-non-enumerated>
                    <supports-multiple>true</supports-multiple>
                    <supports-non-multiple>true</supports-non-multiple>
                </class>
                <scripts>
                    <file>js/Ametys/form/widget/Right.js</file>
                </scripts>
            </extension>
        </extensions>
    </feature>   
    <feature name="widgets.others.geocode" safe="true">
        <config>
            <param-ref id="runtime.google-api-key"/>
        </config>
        
        <extensions>
            <extension id="edition.geocode"
                point="org.ametys.core.ui.widgets.WidgetsManager"
                class="org.ametys.core.ui.widgets.StaticClientSideWidget">
                <class name="Ametys.form.widget.GeoCode">
                    <ftypes>geocode</ftypes>
                    <supports-enumerated>false</supports-enumerated>
                    <supports-non-enumerated>true</supports-non-enumerated>
                    <supports-multiple>false</supports-multiple>
                    <supports-non-multiple>true</supports-non-multiple>
                </class>
                <scripts>
                    <file>js/Ametys/form/widget/GeoCode.js</file>
                </scripts>
                <depends>
                    <org.ametys.core.ui.StaticFileImportsManager>org.ametys.runtime.helpers</org.ametys.core.ui.StaticFileImportsManager>
                </depends>
            </extension>
        </extensions>
    </feature>
    <feature name="widgets.others.boolean.combobox" safe="true">
        <extensions>
            <extension id="edition.boolean-combobox"
                point="org.ametys.core.ui.widgets.WidgetsManager"
                class="org.ametys.core.ui.widgets.StaticClientSideWidget">
                <class name="Ametys.form.widget.BooleanCombobox">
                    <ftypes>boolean</ftypes>
                    <supports-enumerated>false</supports-enumerated>
                    <supports-non-enumerated>true</supports-non-enumerated>
                    <supports-multiple>false</supports-multiple>
                    <supports-non-multiple>true</supports-non-multiple>
                </class>
                <scripts>
                    <file>js/Ametys/form/widget/BooleanCombobox.js</file>
                </scripts>
            </extension>
        </extensions>
    </feature>
    
    <feature name="widgets.others.colorpicker" safe="true">
        <extensions>
            <extension id="edition.colorpicker"
                point="org.ametys.core.ui.widgets.WidgetsManager"
                class="org.ametys.core.ui.widgets.StaticClientSideWidget">
                <class name="Ametys.form.widget.ColorPicker">
                    <ftypes>string</ftypes>
                    <supports-enumerated>false</supports-enumerated>
                    <supports-non-enumerated>true</supports-non-enumerated>
                    <supports-multiple>false</supports-multiple>
                    <supports-non-multiple>true</supports-non-multiple>
                </class>
                <scripts>
                    <file>js/Ametys/form/widget/ColorPicker.js</file>
                </scripts>
            </extension>
        </extensions>
    </feature>
    <feature name="widgets.others.random-number" safe="true">
        <extensions>
            <extension id="edition.random-number"
                point="org.ametys.core.ui.widgets.WidgetsManager"
                class="org.ametys.core.ui.widgets.StaticClientSideWidget">
                <class name="Ametys.form.widget.RandomNumber">
                    <ftypes>string,long</ftypes>
                    <supports-enumerated>false</supports-enumerated>
                    <supports-non-enumerated>true</supports-non-enumerated>
                    <supports-multiple>false</supports-multiple>
                    <supports-non-multiple>true</supports-non-multiple>
                </class>
                <scripts>
                    <file>js/Ametys/form/widget/RandomNumber.js</file>
                </scripts>
            </extension>
        </extensions>
    </feature>   
    
    <!-- HELP TOOL -->
	<feature name="userinterface.help" safe="true">
		<extensions>
			
			<extension 	id="org.ametys.coreui.Help"
						point="org.ametys.core.ui.RibbonControlsManager"
						class="org.ametys.core.ui.StaticClientSideElement">
				<class name="Ametys.ribbon.element.ui.button.OpenToolButtonController">
					<opentool-id>uitool-help</opentool-id>
					<label i18n="true">PLUGINS_CORE_UI_TOOLS_HELP_LABEL</label>
					<description i18n="true">PLUGINS_CORE_UI_TOOLS_HELP_DESCRIPTION</description>
                    
                    <icon-glyph>ametysicon-question13</icon-glyph>
					<icon-small file="true">img/uitool-help/help_16.png</icon-small>
					<icon-medium file="true">img/uitool-help/help_32.png</icon-medium>
					<icon-large file="true">img/uitool-help/help_48.png</icon-large>
				</class>
                <depends>
                    <org.ametys.core.ui.UIToolsFactoriesManager>uitool-help</org.ametys.core.ui.UIToolsFactoriesManager>
                </depends>
			</extension>

			<extension 	id="uitool-help"
						point="org.ametys.core.ui.UIToolsFactoriesManager"
						class="org.ametys.core.ui.StaticClientSideElement">
				<class name="Ametys.tool.factory.UniqueToolFactory">
					<toolClass>Ametys.plugins.coreui.help.HelpTool</toolClass>
					
					<title i18n="true">PLUGINS_CORE_UI_TOOLS_HELP_LABEL</title>
					<description i18n="true">PLUGINS_CORE_UI_TOOLS_HELP_DESCRIPTION</description>
                    
                    <icon-glyph>ametysicon-question13</icon-glyph>
					<icon-small file="true">img/uitool-help/help_16.png</icon-small>
					<icon-medium file="true">img/uitool-help/help_32.png</icon-medium>
					<icon-large file="true">img/uitool-help/help_48.png</icon-large>
					<default-location>r</default-location>
				</class>
				<scripts>
					<file>js/Ametys/plugins/coreui/help/HelpTool.js</file>
				</scripts>
			</extension>
		</extensions>
		
		<components>
			<component role="org.ametys.plugins.core.ui.help.HelpUrlProvider"   
                       id="org.ametys.plugins.core.ui.help.HelpUrlProvider"   
                       class="org.ametys.plugins.core.ui.help.HelpUrlProvider" />
        </components>
    </feature>
    
    <!-- +  
         |  REQUESTS TRACKER    
         + -->     
    <feature name="userinterface.requests-tracker" safe="true">
        <extensions>
            <extension point="org.ametys.core.right.RightsExtensionPoint"
                       id="core.dev.rights.requesttracker">
                <right id="CORE_Rights_RequestTracker">
                    <label>PLUGINS_CORE_RIGHT_RIGHTS_DEV_REQUESTTRACKER_LABEL</label>
                    <description>PLUGINS_CORE_RIGHT_RIGHTS_DEV_REQUESTTRACKER_DESCRIPTION</description>
                    <category>PLUGINS_CORE_RIGHTS_DEV_CATEGORY</category>
                </right>
            </extension>
            
            <extension id="org.ametys.runtime.userinterface.RequestTrackerControl"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.button.OpenToolButtonController">
                    <opentool-id>uitool-requeststracker</opentool-id>
                    
                    <label i18n="true">PLUGINS_CORE_UI_TOOLS_REQUESTS_TRACKER_LABEL</label>
                    <default-description i18n="true">PLUGINS_CORE_UI_TOOLS_REQUESTS_TRACKER_DESCRIPTION</default-description>
                    <help>org.ametys.runtime.requesttracker</help>
                    
                    <icon-glyph>ametysicon-server19</icon-glyph>
                    <icon-small file="true">img/uitool-requeststracker/requests_16.png</icon-small>
                    <icon-medium file="true">img/uitool-requeststracker/requests_32.png</icon-medium>
                    <icon-large file="true">img/uitool-requeststracker/requests_48.png</icon-large>
                </class> 
                <depends>
                    <org.ametys.core.ui.UIToolsFactoriesManager>uitool-requeststracker</org.ametys.core.ui.UIToolsFactoriesManager>
                </depends>
                <right>CORE_Rights_RequestTracker</right>                  
            </extension>
            <extension id="org.ametys.runtime.userinterface.RequestTrackerControl.clear"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.coreui.system.requesttracker.RequestTrackerTool.removeAll</action>
                    
                    <tool-id>uitool-requeststracker</tool-id>
                    <tool-enable-on-status>active</tool-enable-on-status>
                    <tool-description-inactive i18n="true">PLUGINS_CORE_UI_TOOLS_REQUESTS_TRACKER_CLEAR_DESCRIPTION2</tool-description-inactive>
                    
                    <label i18n="true">PLUGINS_CORE_UI_TOOLS_REQUESTS_TRACKER_CLEAR_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_TOOLS_REQUESTS_TRACKER_CLEAR_DESCRIPTION</description>
                    <help>org.ametys.runtime.requesttracker</help>
                    
                    <icon-glyph>ametysicon-garbage11</icon-glyph>
                    <icon-small file="true">img/uitool-requeststracker/delete_16.gif</icon-small>
                    <icon-medium file="true">img/uitool-requeststracker/delete_16.gif</icon-medium>
                    <icon-large file="true">img/uitool-requeststracker/delete_16.gif</icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/coreui/system/requesttracker/RequestTrackerTool.js</file>
                    <file>js/Ametys/plugins/coreui/system/requesttracker/RequestTrackerTool/RequestEntry.js</file>
                    <file>js/Ametys/plugins/coreui/system/requesttracker/RequestTrackerTool/MessageEntry.js</file>
                </scripts>
                <right context-prefix="/contributor">CORE_Rights_RequestTracker</right>
            </extension>
            <extension id="uitool-requeststracker"
                       point="org.ametys.core.ui.UIToolsFactoriesManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.tool.factory.UniqueToolFactory">
                    <toolClass>Ametys.plugins.coreui.system.requesttracker.RequestTrackerTool</toolClass>
                    
                    <title i18n="true">PLUGINS_CORE_UI_TOOLS_REQUESTS_TRACKER_LABEL</title>
                    <description i18n="true">PLUGINS_CORE_UI_TOOLS_REQUESTS_TRACKER_DESCRIPTION</description>
                    <help>org.ametys.runtime.requesttracker</help>
                    <icon-glyph>ametysicon-server19</icon-glyph>
                    <icon-small file="true">img/uitool-requeststracker/requests_16.png</icon-small>
                    <icon-medium file="true">img/uitool-requeststracker/requests_32.png</icon-medium>
                    <icon-large file="true">img/uitool-requeststracker/requests_48.png</icon-large>
                    
                    <default-location>b</default-location>
                </class>               
                <scripts>
                    <file>js/Ametys/plugins/coreui/system/requesttracker/RequestTrackerTool.js</file>
                    <file>js/Ametys/plugins/coreui/system/requesttracker/RequestTrackerTool/RequestEntry.js</file>
                    <file>js/Ametys/plugins/coreui/system/requesttracker/RequestTrackerTool/MessageEntry.js</file>
                </scripts>
            </extension>
        </extensions>
    </feature>    
    
    <!-- +  
         |  MESSAGES TRACKER    
         + -->     
    <feature name="userinterface.messages-tracker" safe="true">
        <extensions>
            <extension point="org.ametys.core.right.RightsExtensionPoint"
                       id="core.dev.rights.messagetracker">
                <right id="CORE_Rights_MessageTracker">
                    <label>PLUGINS_CORE_RIGHT_RIGHTS_DEV_MESSAGETRACKER_LABEL</label>
                    <description>PLUGINS_CORE_RIGHT_RIGHTS_DEV_MESSAGETRACKER_DESCRIPTION</description>
                    <category>PLUGINS_CORE_RIGHTS_DEV_CATEGORY</category>
                </right>
            </extension>
            
            <extension id="org.ametys.runtime.userinterface.MessageTrackerControl"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.button.OpenToolButtonController">
                    <opentool-id>uitool-messagestracker</opentool-id>
                    
                    <label i18n="true">PLUGINS_CORE_UI_TOOLS_MESSAGES_TRACKER_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_TOOLS_MESSAGES_TRACKER_DESCRIPTION</description>
                    <help>org.ametys.runtime.messagetracker</help>
                    
                    <icon-glyph>ametysicon-server</icon-glyph>
                    <icon-small file="true">img/uitool-messagestracker/messages_16.png</icon-small>
                    <icon-medium file="true">img/uitool-messagestracker/messages_32.png</icon-medium>
                    <icon-large file="true">img/uitool-messagestracker/messages_48.png</icon-large>
                </class> 
                <depends>
                    <org.ametys.core.ui.UIToolsFactoriesManager>uitool-messagestracker</org.ametys.core.ui.UIToolsFactoriesManager>
                </depends>  
                <right>CORE_Rights_MessageTracker</right>                 
            </extension>
            <extension id="org.ametys.runtime.userinterface.MessageTrackerControl.clear"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.coreui.system.messagetracker.MessageTrackerTool.removeAll</action>

                    <tool-id>uitool-messagestracker</tool-id>
                    <tool-enable-on-status>active</tool-enable-on-status>
                    <tool-description-inactive i18n="true">PLUGINS_CORE_UI_TOOLS_MESSAGES_TRACKER_CLEAR_DESCRIPTION2</tool-description-inactive>

                    <label i18n="true">PLUGINS_CORE_UI_TOOLS_MESSAGES_TRACKER_CLEAR_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_TOOLS_MESSAGES_TRACKER_CLEAR_DESCRIPTION</description>
                    <icon-glyph>ametysicon-garbage11</icon-glyph>
                    <icon-small file="true">img/uitool-messagestracker/delete_16.gif</icon-small>
                    <icon-medium file="true">img/uitool-messagestracker/delete_16.gif</icon-medium>
                    <icon-large file="true">img/uitool-messagestracker/delete_16.gif</icon-large>
                </class>                       
                <scripts>
                    <file>js/Ametys/plugins/coreui/log/AbstractLogTool.js</file>
                    <file>js/Ametys/plugins/coreui/system/messagetracker/MessageTrackerTool.js</file>
                    <file>js/Ametys/plugins/coreui/system/messagetracker/MessageTrackerTool/MessageEntry.js</file>
                </scripts>
                <depends>
                    <org.ametys.core.ui.UIToolsFactoriesManager>uitool-messagestracker</org.ametys.core.ui.UIToolsFactoriesManager>
                </depends>
                <right>CORE_Rights_MessageTracker</right>
            </extension>
            <extension id="uitool-messagestracker"
                       point="org.ametys.core.ui.UIToolsFactoriesManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.tool.factory.UniqueToolFactory">
                    <toolClass>Ametys.plugins.coreui.system.messagetracker.MessageTrackerTool</toolClass>
                    
                    <title i18n="true">PLUGINS_CORE_UI_TOOLS_MESSAGES_TRACKER_LABEL</title>
                    <description i18n="true">PLUGINS_CORE_UI_TOOLS_MESSAGES_TRACKER_DESCRIPTION</description>
                    <help>org.ametys.runtime.messagetracker</help>

                    <noselect-detail-message i18n="true">PLUGINS_CORE_UI_TOOLS_MESSAGES_TRACKER_MESSAGE</noselect-detail-message>
                    <vertical-panel-layout>false</vertical-panel-layout>
                    
                    <icon-glyph>ametysicon-server</icon-glyph>
                    <icon-small file="true">img/uitool-messagestracker/messages_16.png</icon-small>
                    <icon-medium file="true">img/uitool-messagestracker/messages_32.png</icon-medium>
                    <icon-large file="true">img/uitool-messagestracker/messages_48.png</icon-large>
                    
                    <default-location>b</default-location>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/coreui/log/AbstractLogTool.js</file>
                    <file>js/Ametys/plugins/coreui/system/messagetracker/MessageTrackerTool.js</file>
                    <file>js/Ametys/plugins/coreui/system/messagetracker/MessageTrackerTool/MessageEntry.js</file>
                </scripts>
            </extension>
        </extensions>
    </feature> 
    
    <!-- +  
         |  LOG    
         + -->     
    <feature name="userinterface.console-log" safe="true">
        <extensions>
        	<extension point="org.ametys.core.right.RightsExtensionPoint"
                       id="core.dev.rights.consolelog">
                <right id="CORE_Rights_ConsoleLog">
                    <label>PLUGINS_CORE_RIGHT_RIGHTS_DEV_CONSOLELOG_LABEL</label>
                    <description>PLUGINS_CORE_RIGHT_RIGHTS_DEV_CONSOLELOG_DESCRIPTION</description>
                    <category>PLUGINS_CORE_RIGHTS_DEV_CATEGORY</category>
                </right>
            </extension>
            <extension id="org.ametys.runtime.userinterface.ConsoleLogControl"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.button.OpenToolButtonController">
                    <opentool-id>uitool-consolelog</opentool-id>
                    
                    <label i18n="true">PLUGINS_CORE_UI_TOOLS_CONSOLELOG_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_TOOLS_CONSOLELOG_DESCRIPTION</description>
                    <help>org.ametys.runtime.consolelog</help>      
                    
                    <icon-glyph>ametysicon-log1</icon-glyph>
                    <icon-small file="true">img/uitool-consolelog/logs_16.png</icon-small>
                    <icon-medium file="true">img/uitool-consolelog/logs_32.png</icon-medium>
                    <icon-large file="true">img/uitool-consolelog/logs_48.png</icon-large>
                </class>   
                <depends>
                    <org.ametys.core.ui.UIToolsFactoriesManager>uitool-consolelog</org.ametys.core.ui.UIToolsFactoriesManager>
                </depends>
                <right context-prefix="/contributor">CORE_Rights_ConsoleLog</right>
            </extension>
            <extension id="org.ametys.runtime.userinterface.ConsoleLogControl.clear"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.coreui.system.consolelog.ConsoleLogTool.removeAll</action>

                    <tool-id>uitool-consolelog</tool-id>
                    <tool-enable-on-status>active</tool-enable-on-status>
                    <tool-description-inactive i18n="true">PLUGINS_CORE_UI_TOOLS_CONSOLELOG_CLEAR_DESCRIPTION2</tool-description-inactive>

                    <label i18n="true">PLUGINS_CORE_UI_TOOLS_CONSOLELOG_CLEAR_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_TOOLS_CONSOLELOG_CLEAR_DESCRIPTION</description>
                    
                    <icon-glyph>ametysicon-garbage11</icon-glyph>
                    <icon-small file="true">img/uitool-consolelog/remove_16.png</icon-small>
                    <icon-medium file="true">img/uitool-consolelog/remove_32.png</icon-medium>
                    <icon-large file="true">img/uitool-consolelog/remove_48.png</icon-large>
                </class>                       
                <scripts>
                    <file>js/Ametys/plugins/coreui/log/AbstractLogTool.js</file>
                    <file>js/Ametys/plugins/coreui/system/consolelog/ConsoleLogTool.js</file>
                </scripts>
                <right context-prefix="/contributor">CORE_Rights_ConsoleLog</right>
            </extension>
            <extension id="org.ametys.runtime.userinterface.ConsoleLogControl.toDebug"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.coreui.system.consolelog.ConsoleLogTool.setRootLogLevel</action>
                    <initialize>Ametys.plugins.coreui.system.consolelog.ConsoleLogTool.getRootLogLevel</initialize>

                    <log-level>0</log-level>
                    <toggle-enabled>true</toggle-enabled>
                    <untoggle>org.ametys.runtime.userinterface.ConsoleLogControl.toInfo,org.ametys.runtime.userinterface.ConsoleLogControl.toWarn,org.ametys.runtime.userinterface.ConsoleLogControl.toError</untoggle>
                    <hide-on-click>true</hide-on-click>
                    
                    <tool-id>uitool-consolelog</tool-id>
                    <tool-enable-on-status>active</tool-enable-on-status>
                    <tool-description-inactive i18n="true">PLUGINS_CORE_UI_TOOLS_CONSOLELOG_SETDEBUG_DESCRIPTION2</tool-description-inactive>

                    <label i18n="true">PLUGINS_CORE_UI_TOOLS_CONSOLELOG_SETDEBUG_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_TOOLS_CONSOLELOG_SETDEBUG_DESCRIPTION</description>
                    
                    <icon-small file="true">img/uitool-consolelog/level_debug_16.png</icon-small>
                    <icon-medium file="true">img/uitool-consolelog/level_debug_32.png</icon-medium>
                    <icon-large file="true">img/uitool-consolelog/level_debug_48.png</icon-large>
                </class>                       
                <scripts>
                    <file>js/Ametys/plugins/coreui/log/AbstractLogTool.js</file>
                    <file>js/Ametys/plugins/coreui/system/consolelog/ConsoleLogTool.js</file>
                </scripts>
                <right context-prefix="/contributor">CORE_Rights_ConsoleLog</right>
            </extension>
            <extension id="org.ametys.runtime.userinterface.ConsoleLogControl.toInfo"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.coreui.system.consolelog.ConsoleLogTool.setRootLogLevel</action>
                    <initialize>Ametys.plugins.coreui.system.consolelog.ConsoleLogTool.getRootLogLevel</initialize>

                    <log-level>1</log-level>
                    <toggle-enabled>true</toggle-enabled>
                    <untoggle>org.ametys.runtime.userinterface.ConsoleLogControl.toDebug,org.ametys.runtime.userinterface.ConsoleLogControl.toWarn,org.ametys.runtime.userinterface.ConsoleLogControl.toError</untoggle>
                    <hide-on-click>true</hide-on-click>

                    <tool-id>uitool-consolelog</tool-id>
                    <tool-enable-on-status>active</tool-enable-on-status>
                    <tool-description-inactive i18n="true">PLUGINS_CORE_UI_TOOLS_CONSOLELOG_SETINFO_DESCRIPTION2</tool-description-inactive>

                    <label i18n="true">PLUGINS_CORE_UI_TOOLS_CONSOLELOG_SETINFO_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_TOOLS_CONSOLELOG_SETINFO_DESCRIPTION</description>
                    <icon-small file="true">img/uitool-consolelog/level_info_16.png</icon-small>
                    <icon-medium file="true">img/uitool-consolelog/level_info_32.png</icon-medium>
                    <icon-large file="true">img/uitool-consolelog/level_info_48.png</icon-large>
                </class>                       
                <scripts>
                    <file>js/Ametys/plugins/coreui/log/AbstractLogTool.js</file>
                    <file>js/Ametys/plugins/coreui/system/consolelog/ConsoleLogTool.js</file>
                </scripts>
                <right context-prefix="/contributor">CORE_Rights_ConsoleLog</right>
            </extension>
            <extension id="org.ametys.runtime.userinterface.ConsoleLogControl.toWarn"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.coreui.system.consolelog.ConsoleLogTool.setRootLogLevel</action>
                    <initialize>Ametys.plugins.coreui.system.consolelog.ConsoleLogTool.getRootLogLevel</initialize>

                    <log-level>2</log-level>
                    <toggle-enabled>true</toggle-enabled>
                    <untoggle>org.ametys.runtime.userinterface.ConsoleLogControl.toDebug,org.ametys.runtime.userinterface.ConsoleLogControl.toInfo,org.ametys.runtime.userinterface.ConsoleLogControl.toError</untoggle>
                    <hide-on-click>true</hide-on-click>

                    <tool-id>uitool-consolelog</tool-id>
                    <tool-enable-on-status>active</tool-enable-on-status>
                    <tool-description-inactive i18n="true">PLUGINS_CORE_UI_TOOLS_CONSOLELOG_SETWARN_DESCRIPTION2</tool-description-inactive>

                    <label i18n="true">PLUGINS_CORE_UI_TOOLS_CONSOLELOG_SETWARN_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_TOOLS_CONSOLELOG_SETWARN_DESCRIPTION</description>
                    <icon-small file="true">img/uitool-consolelog/level_warn_16.png</icon-small>
                    <icon-medium file="true">img/uitool-consolelog/level_warn_32.png</icon-medium>
                    <icon-large file="true">img/uitool-consolelog/level_warn_48.png</icon-large>
                </class>                       
                <scripts>
                    <file>js/Ametys/plugins/coreui/log/AbstractLogTool.js</file>
                    <file>js/Ametys/plugins/coreui/system/consolelog/ConsoleLogTool.js</file>
                </scripts>
                <right context-prefix="/contributor">CORE_Rights_ConsoleLog</right>
            </extension>
            <extension id="org.ametys.runtime.userinterface.ConsoleLogControl.toError"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.coreui.system.consolelog.ConsoleLogTool.setRootLogLevel</action>
                    <initialize>Ametys.plugins.coreui.system.consolelog.ConsoleLogTool.getRootLogLevel</initialize>

                    <log-level>3</log-level>
                    <toggle-enabled>true</toggle-enabled>
                    <untoggle>org.ametys.runtime.userinterface.ConsoleLogControl.toDebug,org.ametys.runtime.userinterface.ConsoleLogControl.toInfo,org.ametys.runtime.userinterface.ConsoleLogControl.toWarn</untoggle>
                    <hide-on-click>true</hide-on-click>

                    <tool-id>uitool-consolelog</tool-id>
                    <tool-enable-on-status>active</tool-enable-on-status>
                    <tool-description-inactive i18n="true">PLUGINS_CORE_UI_TOOLS_CONSOLELOG_SETERROR_DESCRIPTION2</tool-description-inactive>

                    <label i18n="true">PLUGINS_CORE_UI_TOOLS_CONSOLELOG_SETERROR_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_TOOLS_CONSOLELOG_SETERROR_DESCRIPTION</description>
                    <icon-small file="true">img/uitool-consolelog/level_error_16.png</icon-small>
                    <icon-medium file="true">img/uitool-consolelog/level_error_32.png</icon-medium>
                    <icon-large file="true">img/uitool-consolelog/level_error_48.png</icon-large>
                </class>                       
                <scripts>
                    <file>js/Ametys/plugins/coreui/log/AbstractLogTool.js</file>
                    <file>js/Ametys/plugins/coreui/system/consolelog/ConsoleLogTool.js</file>
                </scripts>
                <right context-prefix="/contributor">CORE_Rights_ConsoleLog</right>
            </extension>
            <extension id="uitool-consolelog"
                       point="org.ametys.core.ui.UIToolsFactoriesManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.tool.factory.UniqueToolFactory">
                    <toolClass>Ametys.plugins.coreui.system.consolelog.ConsoleLogTool</toolClass>
                    
                    <title i18n="true">PLUGINS_CORE_UI_TOOLS_CONSOLELOG_LABEL</title>
                    <description i18n="true">PLUGINS_CORE_UI_TOOLS_CONSOLELOG_DESCRIPTION</description>
                    
                    <vertical-panel-layout>false</vertical-panel-layout>
                    
                    <icon-glyph>ametysicon-log1</icon-glyph>
                    <icon-small file="true">img/uitool-consolelog/logs_16.png</icon-small>
                    <icon-medium file="true">img/uitool-consolelog/logs_32.png</icon-medium>
                    <icon-large file="true">img/uitool-consolelog/logs_48.png</icon-large>
                    
                    <icon-level-0 file="true">img/uitool-consolelog/level_debug_16.png</icon-level-0>
                    <icon-level-1 file="true">img/uitool-consolelog/level_info_16.png</icon-level-1>
                    <icon-level-2 file="true">img/uitool-consolelog/level_warn_16.png</icon-level-2>
                    <icon-level-3 file="true">img/uitool-consolelog/level_error_16.png</icon-level-3>
                    <icon-level-4 file="true">img/uitool-consolelog/level_fatal_16.png</icon-level-4>
                    
                    <default-location>b</default-location>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/coreui/log/AbstractLogTool.js</file>
                    <file>js/Ametys/plugins/coreui/system/consolelog/ConsoleLogTool.js</file>
                </scripts>
            </extension>
        </extensions>
    </feature>
    
    <feature name="userinterface.source-edit">
    	<extensions>
    		<extension point="org.ametys.core.right.RightsExtensionPoint"
                       id="core.content.rights.sourceedit">
                <right id="CORE_Rights_SourceEdit">
                    <label>PLUGINS_CORE_RIGHT_RIGHTS_DEV_SOURCEEDIT_LABEL</label>
                    <description>PLUGINS_CORE_RIGHT_RIGHTS_DEV_SOURCEEDIT_DESCRIPTION</description>
                    <category>PLUGINS_CORE_RIGHTS_DEV_CATEGORY</category>
                </right>
            </extension>
    	</extensions>
    </feature>
    
    <feature name="userinterface.debug" safe="true">
    	<extensions>
    		<extension point="org.ametys.core.right.RightsExtensionPoint"
                       id="core.dev.rights.debugmode">
                <right id="CORE_Rights_DebugMode">
                    <label>PLUGINS_CORE_RIGHT_RIGHTS_DEV_DEBUGMODE_LABEL</label>
                    <description>PLUGINS_CORE_RIGHT_RIGHTS_DEV_DEBUGMODE_DESCRIPTION</description>
                    <category>PLUGINS_CORE_RIGHTS_DEV_CATEGORY</category>
                </right>
            </extension>
    		<extension id="org.ametys.runtime.userinterface.DevMode"
    				   point="org.ametys.core.ui.RibbonControlsManager"
    				   class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <initialize>Ametys.plugins.coreui.system.devmode.DevModeActions.initialize</initialize>
					<action>Ametys.plugins.coreui.system.devmode.DevModeActions.act</action>
                    <toggle-enabled>true</toggle-enabled>

					<label i18n="true">PLUGINS_CORE_UI_TOOLS_DEVMODE_LABEL</label>
					<description i18n="true">PLUGINS_CORE_UI_TOOLS_DEVMODE_DESCRIPTION</description>
					<help>org.ametys.runtime.debug.mode</help>
                    
                    <icon-glyph>ametysicon-bugs3</icon-glyph>
					<icon-small file="true">img/debug/ui-debug-16.png</icon-small>
					<icon-medium file="true">img/debug/ui-debug-32.png</icon-medium>
					<icon-large file="true">img/debug/ui-debug-48.png</icon-large>
				</class>
				<scripts>
					<file>js/Ametys/plugins/coreui/system/devmode/DevModeActions.js</file>
				</scripts>
				<right context-prefix="/contributor">CORE_Rights_DebugMode</right>
    		</extension>
    	</extensions>
    </feature>
    
    <!-- +  
         |  NOTIFICATIONS    
         + -->  
    <feature name="userinterface.notifications" safe="true">
        <extensions>
            <extension id="org.ametys.coreui.tool.Notifications"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.button.OpenToolButtonController">
                    <opentool-id>uitool-notification</opentool-id>
                    <label i18n="true">PLUGINS_CORE_UI_TOOLS_NOTIFICATIONS_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_TOOLS_NOTIFICATIONS_DESCRIPTION</description>
                    
                    <icon-glyph>ametysicon-alert9</icon-glyph>
                    <icon-small file="true">img/uitool-notification/notification_16.png</icon-small>
                    <icon-medium file="true">img/uitool-notification/notification_32.png</icon-medium>
                    <icon-large file="true">img/uitool-notification/notification_48.png</icon-large>
                </class>
                <depends>
                    <org.ametys.core.ui.UIToolsFactoriesManager>uitool-notification</org.ametys.core.ui.UIToolsFactoriesManager>
                </depends>
            </extension>

            <extension id="uitool-notification"
                       point="org.ametys.core.ui.UIToolsFactoriesManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.tool.factory.UniqueToolFactory">
                    <toolClass>Ametys.plugins.coreui.notification.NotificationTool</toolClass>
                    
                    <title i18n="true">PLUGINS_CORE_UI_TOOLS_NOTIFICATIONS_LABEL</title>
                    <description i18n="true">PLUGINS_CORE_UI_TOOLS_NOTIFICATIONS_DESCRIPTION</description>
                    <icon-glyph>ametysicon-alert9</icon-glyph>
                    <icon-small file="true">img/uitool-notification/notification_16.png</icon-small>
                    <icon-medium file="true">img/uitool-notification/notification_32.png</icon-medium>
                    <icon-large file="true">img/uitool-notification/notification_48.png</icon-large>
                    <default-location>r</default-location>
                </class>
                <scripts>
                    <file>js/Ametys/timeline/Timeline.js</file>
                    <file>js/Ametys/plugins/coreui/notification/NotificationTool.js</file>
                </scripts>
                <depends>
                    <org.ametys.core.ui.StaticFileImportsManager>org.ametys.navhistory.HistoryDAO</org.ametys.core.ui.StaticFileImportsManager>
                </depends>
            </extension>
        </extensions>   
    </feature>
         
    
    <feature name="staticimports.navhistory" safe="true">
        <extensions>
            <extension id="org.ametys.navhistory.HistoryDAO"
                       point="org.ametys.core.ui.StaticFileImportsManager"
                       class="org.ametys.core.ui.StaticFileImportsClientSideElement">
                <scripts>
                    <file>js/Ametys/navhistory/HistoryDAO.js</file>
                </scripts>
            </extension>
        </extensions>
    </feature>
    
    <feature name="staticimports.announce" safe="true">
        <extensions>
            <extension id="Ametys.plugins.coreui.system.Announce"
                       point="org.ametys.core.ui.StaticFileImportsManager"
                       class="org.ametys.core.ui.StaticFileImportsClientSideElement">
                <scripts>
                    <file>js/Ametys/plugins/coreui/system/Announce.js</file>
                </scripts>
            </extension>
        </extensions>
    </feature>
    
    <feature name="staticimports.system.time" safe="true">
        <extensions>
            <extension id="Ametys.plugins.coreui.system.StartTimeChecker"
                       point="org.ametys.core.ui.StaticFileImportsManager"
                       class="org.ametys.core.ui.StaticFileImportsClientSideElement">
                <scripts>
                    <file>js/Ametys/plugins/coreui/system/StartTimeChecker.js</file>
                </scripts>
            </extension>
        </extensions>
    </feature>
    
    <feature name="core.preferences">
        <extensions>
            <extension point="org.ametys.core.userpref.UserPreferencesExtensionPoint"
                       id="runtime.user.prefs"
                       class="org.ametys.plugins.core.impl.userpref.StaticUserPreferenceProvider">
                 <param id="tab-policy" type="string">
                     <label i18n="true">PLUGINS_CORE_UI_USER_PREFERENCES_TAB_POLICY</label>
                     <description i18n="true">PLUGINS_CORE_UI_USER_PREFERENCES_TAB_POLICY_DESC</description>
                     <group i18n="true">PLUGINS_CORE_UI_USER_PREFERENCES_GROUP_10_DISPLAY</group>
                     <validation>
                        <mandatory/>
                     </validation>
                     <enumeration>
                        <entry>
                            <value>color</value>
                            <label i18n="true">PLUGINS_CORE_UI_USER_PREFERENCES_TAB_POLICY_COLOR</label>
                        </entry>
                        <entry>
                            <value>tool</value>
                            <label i18n="true">PLUGINS_CORE_UI_USER_PREFERENCES_TAB_POLICY_TOOL</label>
                        </entry>
                        <entry>
                            <value>all</value>
                            <label i18n="true">PLUGINS_CORE_UI_USER_PREFERENCES_TAB_POLICY_ALL</label>
                        </entry>
                     </enumeration>
                     <default-value>all</default-value>
                     <order>10</order>
                 </param>
                 
                 <param id="workspace" type="string" private="true">
                     <label i18n="true">PLUGINS_CORE_UI_USER_PREFERENCES_WORKSPACE</label>
                     <description i18n="true">PLUGINS_CORE_UI_USER_PREFERENCES_WORKSPACE_DESC</description>
                     <group i18n="true">PLUGINS_CORE_UI_USER_PREFERENCES_GROUP_10_DISPLAY</group>
                 </param>
                 
                 <param id="remember-opened-tools" type="boolean">
                     <label i18n="true">PLUGINS_CORE_UI_USER_PREFERENCES_OPENEDTOOLS</label>
                     <description i18n="true">PLUGINS_CORE_UI_USER_PREFERENCES_OPENEDTOOLS_DESC</description>
                     <group i18n="true">PLUGINS_CORE_UI_USER_PREFERENCES_GROUP_10_DISPLAY</group>
                     <default-value>true</default-value>
                     <order>20</order>
                 </param>
                 
                 <param id="edition-tab-policy" type="string">
                     <label i18n="true">PLUGINS_CORE_UI_USER_PREFERENCES_FORM_TAB_POLICY</label>
                     <description i18n="true">PLUGINS_CORE_UI_USER_PREFERENCES_FORM_TAB_POLICY_DESC</description>
                     <group i18n="true">PLUGINS_CORE_UI_USER_PREFERENCES_GROUP_20_EDITION</group>
                     <validation>
                        <mandatory/>
                     </validation>
                     <enumeration>
                        <entry>
                            <value>default</value>
                            <label i18n="true">PLUGINS_CORE_UI_USER_PREFERENCES_FORM_TAB_POLICY_DEFAULT</label>
                        </entry>
                        <entry>
                            <value>inline</value>
                            <label i18n="true">PLUGINS_CORE_UI_USER_PREFERENCES_FORM_TAB_POLICY_INLINE</label>
                        </entry>
                     </enumeration>
                     <default-value>default</default-value>
                 </param>
            </extension>
            
            <extension id="org.ametys.plugins.core.userprefs.ResetWorkspace"
                     point="org.ametys.core.ui.RibbonControlsManager"
                     class="org.ametys.core.ui.StaticClientSideElement">
              <class name="Ametys.ribbon.element.ui.ButtonController">
                 <action>Ametys.plugins.coreui.userprefs.UserPrefsActions.resetWorkspace</action>
                  
                 <label i18n="true">PLUGINS_CORE_UI_USER_PREFERENCES_RESET_WORKSPACE_LABEL</label>
                 <description i18n="true">PLUGINS_CORE_UI_USER_PREFERENCES_RESET_WORKSPACE_DESCRIPTION</description>
                  
                 <icon-glyph>ametysicon-return10</icon-glyph>
                 <param name="icon-small" file="true">img/userprefs/userprefs-reset_16.png</param>
                 <param name="icon-medium" file="true">img/userprefs/userprefs-reset_32.png</param>
                 <param name="icon-large" file="true">img/userprefs/userprefs-reset_48.png</param>
              </class>
              <scripts>
                  <file>js/Ametys/plugins/coreui/userprefs/UserPrefsActions.js</file>
              </scripts>
         </extension>
         
         <extension id="org.ametys.plugins.core.userprefs.Edit"
                     point="org.ametys.core.ui.RibbonControlsManager"
                     class="org.ametys.core.ui.StaticClientSideElement">
              <class name="Ametys.ribbon.element.ui.ButtonController">
                <action>Ametys.plugins.coreui.userprefs.UserPrefsActions.edit</action>
                  
                 <label i18n="true">PLUGINS_CORE_UI_USER_PREFERENCES_LABEL</label>
                 <description i18n="true">PLUGINS_CORE_UI_USER_PREFERENCES_DESCRIPTION</description>
                  
                 <icon-glyph>ametysicon-hammer2</icon-glyph>
                 <param name="icon-small" file="true">img/userprefs/userprefs_16.png</param>
                 <param name="icon-medium" file="true">img/userprefs/userprefs_32.png</param>
                 <param name="icon-large" file="true">img/userprefs/userprefs_48.png</param>
              </class>
              <scripts>
                  <file>js/Ametys/plugins/coreui/userprefs/UserPrefsActions.js</file>
              </scripts>
         </extension>
         
       </extensions>
    </feature>
    
    <feature name="about">
    	<components>
    		<component id="org.ametys.plugins.core.ui.about.AboutInfoProvider"
    				   role="org.ametys.plugins.core.ui.about.AboutInfoProvider"
    				   class="org.ametys.plugins.core.ui.about.AboutInfoProvider">
 			</component>
    	</components>
        
    	<extensions>
    		<extension id="org.ametys.plugins.core.ui.about"
    				   point="org.ametys.core.ui.RibbonControlsManager"
    				   class="org.ametys.core.ui.StaticClientSideElement">
    			<class name="Ametys.ribbon.element.ui.ButtonController">
    				<action>Ametys.plugins.coreui.about.AboutActions.openAboutDialogBox</action>
    				
    				<label i18n="true">PLUGINS_CORE_UI_ABOUT_LABEL</label>
    				<description i18n="true">PLUGINS_CORE_UI_ABOUT_DESCRIPTION</description>
    				
    				<icon-glyph>ametysicon-question13</icon-glyph>
    			</class>
	    		<scripts>
	    			<file>js/Ametys/plugins/coreui/about/AboutActions.js</file>
	    		</scripts>
	    		<css>
				    <file>css/Ametys/ui/about.css</file>
				</css>
    		</extension>
    	</extensions>
    </feature>

    <feature name="core.user.safe-avatar" safe="true">
        <components>
            <component class="org.ametys.plugins.core.ui.user.SafeProfileImageProvider"
                       id="org.ametys.plugins.core.ui.user.SafeProfileImageProvider" 
                       role="org.ametys.plugins.core.ui.user.ProfileImageProvider"/>
        </components>
    </feature>
    
    <feature name="core.user.profile" deactivates="core.user.safe-avatar">
        <components>
            <component class="org.ametys.plugins.core.ui.user.DefaultProfileImageProvider"
                       id="org.ametys.plugins.core.ui.user.DefaultProfileImageProvider" 
                       role="org.ametys.plugins.core.ui.user.ProfileImageProvider"/>
        </components>
        
        <extensions>
            <extension point="org.ametys.core.userpref.UserPreferencesExtensionPoint"
                       id="runtime.user.profile.prefs"
                       class="org.ametys.plugins.core.impl.userpref.StaticUserPreferenceProvider">
                 <param id="profile-image" type="string" private="true">
                    <label i18n="true">PLUGINS_CORE_UI_USER_PREFERENCES_PROFILE_IMAGE</label>
                    <description i18n="true">PLUGINS_CORE_UI_USER_PREFERENCES_PROFILE_IMAGE_DESC</description>
                    <group i18n="true">PLUGINS_CORE_UI_USER_PREFERENCES_GROUP_10_DISPLAY</group>
                 </param>
            </extension>
           
            
            <extension id="org.ametys.core.userpref.EditProfileImage"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.userprefs.UserProfileDialog.open</action>
                    <label i18n="true">PLUGINS_CORE_UI_EDIT_PROFILE_IMAGE_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_EDIT_PROFILE_IMAGE_DESCRIPTION</description>
                    
                    <icon-glyph>ametysicon-black302</icon-glyph>
                </class>
                <scripts>
                    <file>js/Ametys/userprefs/UserProfileDialog.js</file>
                    <file>js/Ametys/userprefs/UserProfileDialog/ProfileImageModel.js</file>
                    <file>js/Ametys/userprefs/UserProfileDialog/ProfileImageField.js</file>
                </scripts>
                <depends>
                    <org.ametys.core.ui.StaticFileImportsManager>org.ametys.runtime.helpers</org.ametys.core.ui.StaticFileImportsManager>
                </depends>
            </extension>
        </extensions>
    </feature>
    
    <feature name="configurableformpanel.checks" safe="true">
        <extensions>
            <extension id="org.ametys.plugins.core.configurableformpanel.RunTests"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.SimpleMenu">
                <class>
                    <label i18n="true">PLUGINS_CORE_UI_CONFIGURABLE_FORM_TEST_CONTROLLER_RUN_TESTS</label>
                    <description i18n="true">PLUGINS_CORE_UI_CONFIGURABLE_FORM_TEST_CONTROLLER_RUN_TESTS_DESC</description>
                </class>
                <menu-items>
                    <item ref="org.ametys.plugins.core.configurableformpanel.CheckMissed" primaryItem="true"/>
                    <item ref="org.ametys.plugins.core.configurableformpanel.CheckAll"/>
                </menu-items>
                <scripts>
                    <file>js/Ametys/plugins/coreui/configurableformpanel/TestsController.js</file>
                </scripts>
            </extension>
            
            <extension id="org.ametys.plugins.core.configurableformpanel.CheckAll"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.plugins.coreui.configurableformpanel.TestsController">
                    <action>Ametys.plugins.coreui.configurableformpanel.TestsController.check</action>
                    <mode>all</mode>
                    
                    <selection-target-id>^form$</selection-target-id>
                    <label i18n="true">PLUGINS_CORE_UI_CONFIGURABLE_FORM_TEST_CONTROLLER_RUN_ALL_TESTS</label>
                    <description i18n="true">PLUGINS_CORE_UI_CONFIGURABLE_FORM_TEST_CONTROLLER_RUN_ALL_TESTS_DESC</description>
                    
                    <icon-glyph>ametysicon-applicattion</icon-glyph>
                    <icon-small file="true">img/Ametys/common/form/configurable/tests/testall_16.png</icon-small>
                    <icon-medium file="true">img/Ametys/common/form/configurable/tests/testall_32.png</icon-medium>
                    <icon-large file="true">img/Ametys/common/form/configurable/tests/testall_48.png</icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/coreui/configurableformpanel/TestsController.js</file>
                </scripts>
            </extension>
            
            <extension id="org.ametys.plugins.core.configurableformpanel.CheckMissed"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.plugins.coreui.configurableformpanel.TestsController">
                    <action>Ametys.plugins.coreui.configurableformpanel.TestsController.check</action>
                    <mode>missed</mode>
                    
                    <selection-target-id>^form$</selection-target-id>
                    
                    <label i18n="true">PLUGINS_CORE_UI_CONFIGURABLE_FORM_TEST_CONTROLLER_RUN_MISSED_TESTS</label>
                    <description i18n="true">PLUGINS_CORE_UI_CONFIGURABLE_FORM_TEST_CONTROLLER_RUN_MISSED_TESTS_DESC</description>
                    
                    <icon-glyph>ametysicon-applicattion</icon-glyph>
                    <icon-decorator>decorator-ametysicon-alert9</icon-decorator>
                    <icon-small file="true">img/Ametys/common/form/configurable/tests/testmissing_16.png</icon-small>
                    <icon-medium file="true">img/Ametys/common/form/configurable/tests/testmissing_32.png</icon-medium>
                    <icon-large file="true">img/Ametys/common/form/configurable/tests/testmissing_48.png</icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/coreui/configurableformpanel/TestsController.js</file>
                </scripts>
            </extension>
        </extensions>
    </feature>
    
    <feature name="populations">
    	<extensions>
    		<extension id="org.ametys.core.user.PopulationsTab"
                       point="org.ametys.core.ui.RibbonTabsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.tab.TabController">
                    <tool-id>^uitool-populations$</tool-id>
                </class> 
            </extension>
            
    		<extension id="org.ametys.core.ui.populations.Add"
    				   point="org.ametys.core.ui.RibbonControlsManager"
    				   class="org.ametys.core.ui.StaticClientSideElement">
				<class name="Ametys.ribbon.element.ui.ButtonController">
					<action>Ametys.plugins.coreui.populations.PopulationActions.addPopulation</action>
					
					<label i18n="true">PLUGINS_CORE_UI_USER_POPULATIONS_ADD_LABEL</label>
					<description i18n="true">PLUGINS_CORE_UI_USER_POPULATIONS_ADD_DESCRIPTION</description>
					
                    <icon-glyph>ametysicon-multiple25</icon-glyph>
                    <icon-decorator>decorator-ametysicon-add64</icon-decorator>
				</class>
				<scripts>
					<file>js/Ametys/plugins/coreui/populations/PopulationActions.js</file>
					<file>js/Ametys/plugins/coreui/populations/EditPopulationHelper.js</file>
					<file plugin="core">js/Ametys/plugins/core/populations/UserPopulationDAO.js</file>
				</scripts>
    		</extension>
    		
    		<extension id="org.ametys.core.ui.populations.Edit"
    				   point="org.ametys.core.ui.RibbonControlsManager"
    				   class="org.ametys.core.ui.StaticClientSideElement">
				<class name="Ametys.ribbon.element.ui.ButtonController">
					<action>Ametys.plugins.coreui.populations.PopulationActions.editPopulation</action>
					<selection-target-id>^userPopulation$</selection-target-id>
					
					<label i18n="true">PLUGINS_CORE_UI_USER_POPULATIONS_EDIT_LABEL</label>
					<description i18n="true">PLUGINS_CORE_UI_USER_POPULATIONS_EDIT_DESCRIPTION</description>
					
                    <icon-glyph>ametysicon-multiple25</icon-glyph>
                    <icon-decorator>decorator-ametysicon-edit45</icon-decorator>
				</class>
				<scripts>
					<file>js/Ametys/plugins/coreui/populations/PopulationActions.js</file>
					<file>js/Ametys/plugins/coreui/populations/EditPopulationHelper.js</file>
					<file plugin="core">js/Ametys/plugins/core/populations/UserPopulationDAO.js</file>
				</scripts>
    		</extension>
    		
    		<extension id="org.ametys.core.ui.populations.Remove"
    				   point="org.ametys.core.ui.RibbonControlsManager"
    				   class="org.ametys.core.ui.StaticClientSideElement">
				<class name="Ametys.plugins.coreui.populations.RemovePopulationButtonController">
					<action>Ametys.plugins.coreui.populations.PopulationActions.removePopulation</action>
					<selection-target-id>^userPopulation$</selection-target-id>
					
					<label i18n="true">PLUGINS_CORE_UI_USER_POPULATIONS_REMOVE_LABEL</label>
					<description i18n="true">PLUGINS_CORE_UI_USER_POPULATIONS_REMOVE_DESCRIPTION</description>
					<is-in-use-description i18n="true">PLUGINS_CORE_UI_USER_POPULATIONS_REMOVE_UNABLE_DESCRIPTION</is-in-use-description>
					
                    <icon-glyph>ametysicon-multiple25</icon-glyph>
                    <icon-decorator>decorator-ametysicon-remove11</icon-decorator>
				</class>
				<scripts>
					<file>js/Ametys/plugins/coreui/populations/RemovePopulationButtonController.js</file>
					<file>js/Ametys/plugins/coreui/populations/PopulationActions.js</file>
					<file plugin="core">js/Ametys/plugins/core/populations/UserPopulationDAO.js</file>
				</scripts>
    		</extension>
    		
    		<extension id="org.ametys.core.ui.populations.Enable"
    				   point="org.ametys.core.ui.RibbonControlsManager"
    				   class="org.ametys.core.ui.StaticClientSideElement">
				<class name="Ametys.plugins.coreui.populations.EnablePopulationButtonController">
					<action>Ametys.plugins.coreui.populations.PopulationActions.enablePopulation</action>
					<selection-target-id>^userPopulation$</selection-target-id>
					<selection-target-parameter>
					   <name>valid</name>
					   <value>true</value>
					</selection-target-parameter>
					<selection-description-nomatch i18n="true">PLUGINS_CORE_UI_USER_POPULATIONS_ENABLE_NO_VALID_DESCRIPTION</selection-description-nomatch>
					<selection-enable-multiselection>false</selection-enable-multiselection>
					
					<label i18n="true">PLUGINS_CORE_UI_USER_POPULATIONS_ENABLE_LABEL</label>
					<description i18n="true">PLUGINS_CORE_UI_USER_POPULATIONS_ENABLE_DESCRIPTION</description>
					
                    <icon-glyph>ametysicon-multiple25</icon-glyph>
                    <enabled-icon-decorator>decorator-ametysicon-checked34</enabled-icon-decorator>
                    <disabled-icon-decorator>decorator-ametysicon-forbidden1</disabled-icon-decorator>
				</class>
				<scripts>
					<file>js/Ametys/plugins/coreui/populations/EnablePopulationButtonController.js</file>
					<file>js/Ametys/plugins/coreui/populations/PopulationActions.js</file>
					<file plugin="core">js/Ametys/plugins/core/populations/UserPopulationDAO.js</file>
				</scripts>
    		</extension>
    		
    		<extension id="org.ametys.core.ui.populations.Populations"
    				   point="org.ametys.core.ui.RibbonControlsManager"
    				   class="org.ametys.core.ui.StaticClientSideElement">
				<class name="Ametys.ribbon.element.ui.button.OpenToolButtonController">
					<opentool-id>uitool-populations</opentool-id>
					
					<label i18n="true">PLUGINS_CORE_UI_USER_POPULATIONS_TOOL_LABEL</label>
					<description i18n="true">PLUGINS_CORE_UI_USER_POPULATIONS_TOOL_DESCRIPTION</description>
					
                    <icon-glyph>ametysicon-black302</icon-glyph>
                    <icon-decorator>decorator-ametysicon-agenda3</icon-decorator>
				</class>
                <depends>
                    <org.ametys.core.ui.UIToolsFactoriesManager>uitool-populations</org.ametys.core.ui.UIToolsFactoriesManager>
                </depends>
    		</extension>
    		
    		<extension id="uitool-populations"
    				   point="org.ametys.core.ui.UIToolsFactoriesManager"
    				   class="org.ametys.core.ui.StaticClientSideElement">
				<class name="Ametys.tool.factory.UniqueToolFactory">
					<toolClass>Ametys.plugins.coreui.populations.PopulationTool</toolClass>
					
					<title i18n="true">PLUGINS_CORE_UI_USER_POPULATIONS_TOOL_LABEL</title>
	    			<description i18n="true">PLUGINS_CORE_UI_USER_POPULATIONS_TOOL_DESCRIPTION</description>
	    			
                    <icon-glyph>ametysicon-black302</icon-glyph>
                    <icon-decorator>decorator-ametysicon-agenda3</icon-decorator>
					<default-location>cl</default-location>
				</class>    				   
				<scripts>
					<file>js/Ametys/plugins/coreui/populations/PopulationTool.js</file>
					<file plugin="core">js/Ametys/plugins/core/populations/UserPopulationDAO.js</file>
				</scripts>
                <css>
                    <file>css/Ametys/ui/tool/population.css</file>
                </css>
    		</extension>
    	</extensions>
    </feature>
    
    <feature name="population.linkToApplication">
    	<extensions>
    		<extension id="org.ametys.core.ui.populations.LinkToApplicationContext"
    				   point="org.ametys.core.ui.RibbonControlsManager"
    				   class="org.ametys.core.ui.StaticClientSideElement">
				<class name="Ametys.ribbon.element.ui.ButtonController">
					<action>Ametys.plugins.coreui.populations.PopulationActions.link</action>
					<context></context>
					
					<label i18n="true">PLUGINS_CORE_UI_USER_POPULATIONS_LINK_LABEL</label>
					<description i18n="true">PLUGINS_CORE_UI_USER_POPULATIONS_LINK_DESCRIPTION</description>
					
                    <icon-glyph>ametysicon-multiple25</icon-glyph>
                    <icon-decorator>decorator-ametysicon-link55</icon-decorator>
				</class>
				<scripts>
					<file>js/Ametys/plugins/coreui/populations/PopulationActions.js</file>
					<file plugin="core">js/Ametys/plugins/core/populations/UserPopulationDAO.js</file>
					<file>js/Ametys/plugins/coreui/populations/ChooseUserPopulationsHelper.js</file>
				</scripts>
    		</extension>
    	</extensions>
    </feature>
    
    <feature name="user.logout" safe="true">
    	<extensions>
    		<extension id="org.ametys.core.ui.user.logout"
    				   point="org.ametys.core.ui.RibbonControlsManager"
    				   class="org.ametys.core.ui.StaticClientSideElement">
				<class name="Ametys.ribbon.element.ui.ButtonController">
					<action>Ametys.plugins.coreui.user.LogoutButtonController.logout</action>
					<label i18n="true">PLUGINS_CORE_UI_USER_LOGOUT_LABEL</label>
					<description i18n="true">PLUGINS_CORE_UI_USER_LOGOUT_DESCRIPTION</description>
					
                    <icon-glyph>ametysicon-power110</icon-glyph>
				</class>
				<scripts>
					<file>js/Ametys/plugins/coreui/user/LogoutButtonController.js</file>
				</scripts>
    		</extension>
    	</extensions>
    </feature>
    
    <feature name="core.ui.users">
    	<extensions>
    		<extension id="org.ametys.core.Users"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.button.OpenToolButtonController">
                    <opentool-id>uitool-users</opentool-id>
                    <opentool-params>
                    	<enableAllPopulationsOption>true</enableAllPopulationsOption>
                    	<showDirectoryColumn>true</showDirectoryColumn>
                    	<showDirectoryCombobox>true</showDirectoryCombobox>
                    </opentool-params>
                    <label i18n="true">PLUGINS_CORE_UI_TOOL_USERS_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_TOOL_USERS_DESCRIPTION</description>
                    <help>org.ametys.core.users</help>
                    <icon-glyph>ametysicon-black302</icon-glyph>
                    <icon-small file="true">img/users/user_16.png</icon-small>
                    <icon-medium file="true">img/users/user_32.png</icon-medium>
                    <icon-large file="true">img/users/user_48.png</icon-large>
                </class>
                <depends>
                    <org.ametys.core.ui.UIToolsFactoriesManager>uitool-users</org.ametys.core.ui.UIToolsFactoriesManager>
                </depends>
                <right>Runtime_Rights_User_Handle</right>
            </extension>
            
            <extension id="uitool-users"
                       point="org.ametys.core.ui.UIToolsFactoriesManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.tool.factory.UniqueToolFactory">
                    <toolClass>Ametys.plugins.coreui.users.UsersTool</toolClass>
                    
                    <title i18n="true">PLUGINS_CORE_UI_TOOL_USERS_LABEL</title>
                    <description i18n="true">PLUGINS_CORE_UI_TOOL_USERS_DESCRIPTION</description>
                    <help>org.ametys.core.users</help>
                    <icon-glyph>ametysicon-black302</icon-glyph>
                    <icon-small file="true">img/users/user_16.png</icon-small>
                    <icon-medium file="true">img/users/user_32.png</icon-medium>
                    <icon-large file="true">img/users/user_48.png</icon-large>
                    <default-location>cl</default-location>
                </class>
                <scripts>
                    <file plugin="core">js/Ametys/plugins/core/users/UsersDAO.js</file>
                    <file>js/Ametys/plugins/coreui/users/UsersTool.js</file>
                    <file>js/Ametys/plugins/coreui/users/UsersTool/User.js</file>
                </scripts>
                <depends>
                    <org.ametys.core.ui.RelationsManager>source:user</org.ametys.core.ui.RelationsManager>
                </depends>
            </extension>
            
            <extension id="org.ametys.core.rights.UserTab"
                       point="org.ametys.core.ui.RibbonTabsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.tab.TabController">
                    <tool-id>^(uitool-users|user-rights-.+)$</tool-id>
                </class> 
            </extension> 
            
            <extension id="org.ametys.core.users.Add"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.coreui.users.UsersActions.add</action>
                    <users-tool-id>uitool-users</users-tool-id>
                    <label i18n="true">PLUGINS_CORE_UI_USERS_ADD_LABEL</label>
                    <default-description i18n="true">PLUGINS_CORE_UI_USERS_ADD_DESCRIPTION</default-description>
                    
                    <icon-glyph>ametysicon-black302</icon-glyph>
                    <icon-decorator>decorator-ametysicon-add64</icon-decorator>
                    <icon-small file="true">img/users/add_16.png</icon-small>
                    <icon-medium file="true">img/users/add_32.png</icon-medium>
                    <icon-large file="true">img/users/add_48.png</icon-large>
                </class>
                <scripts>
                    <file plugin="core">js/Ametys/plugins/core/users/UsersDAO.js</file>
                    <file>js/Ametys/plugins/coreui/users/UsersActions.js</file>
                    <file>js/Ametys/plugins/coreui/users/EditUserHelper.js</file>
                </scripts>
                <depends>
                    <org.ametys.core.ui.UIToolsFactoriesManager>uitool-users</org.ametys.core.ui.UIToolsFactoriesManager>
                </depends>
                <right>Runtime_Rights_User_Handle</right>
            </extension>
            
            <extension id="org.ametys.core.users.Edit"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.plugins.coreui.users.controller.EditUserButtonController">
                    <action>Ametys.plugins.coreui.users.UsersActions.modify</action>
                    <selection-target-id>^user$</selection-target-id>
                    
                    <label i18n="true">PLUGINS_CORE_UI_USERS_EDIT_LABEL</label>
                    <default-description i18n="true">PLUGINS_CORE_UI_USERS_EDIT_DESCRIPTION</default-description>
                    
                    <icon-glyph>ametysicon-black302</icon-glyph>
                    <icon-decorator>decorator-ametysicon-edit45</icon-decorator>
                    <icon-small file="true">img/users/modify_16.png</icon-small>
                    <icon-medium file="true">img/users/modify_32.png</icon-medium>
                    <icon-large file="true">img/users/modify_48.png</icon-large>
                </class>
                <scripts>
                	<file>js/Ametys/plugins/coreui/users/controller/EditUserButtonController.js</file>
                    <file plugin="core">js/Ametys/plugins/core/users/UsersDAO.js</file>
                    <file>js/Ametys/plugins/coreui/users/UsersActions.js</file>
                    <file>js/Ametys/plugins/coreui/users/EditUserHelper.js</file>
                </scripts>
                <right>Runtime_Rights_User_Handle</right>
            </extension>
            
            <extension id="org.ametys.core.users.Delete"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.plugins.coreui.users.controller.DeleteUserButtonController">
                    <action>Ametys.plugins.coreui.users.UsersActions.delete</action>
                    <selection-target-id>^user$</selection-target-id>

                    <label i18n="true">PLUGINS_CORE_UI_USERS_DELETE_LABEL</label>
                    <default-description i18n="true">PLUGINS_CORE_UI_USERS_DELETE_DESCRIPTION</default-description>
                    
                    <icon-glyph>ametysicon-black302</icon-glyph>
                    <icon-decorator>decorator-ametysicon-remove11</icon-decorator>
                    <icon-small file="true">img/users/delete_16.png</icon-small>
                    <icon-medium file="true">img/users/delete_32.png</icon-medium>
                    <icon-large file="true">img/users/delete_48.png</icon-large>
                </class>
                <scripts>
                	<file>js/Ametys/plugins/coreui/users/controller/DeleteUserButtonController.js</file>
                    <file plugin="core">js/Ametys/plugins/core/users/UsersDAO.js</file>
                    <file>js/Ametys/plugins/coreui/users/UsersActions.js</file>
                </scripts>
                <right>Runtime_Rights_User_Handle</right>
            </extension>
            
            <extension id="org.ametys.core.users.Impersonate"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.coreui.users.UsersActions.impersonate</action>

                    <label i18n="true">PLUGINS_CORE_UI_USERS_IMPERSONATE_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_USERS_IMPERSONATE_DESCRIPTION</description>
                    
                    <selection-target-id>^user$</selection-target-id>
                    <selection-enable-multiselection>false</selection-enable-multiselection>
                    <selection-description-multiselectionforbidden i18n="true">PLUGINS_CORE_UI_USERS_IMPERSONATE_MULTI_FORBIDDEN</selection-description-multiselectionforbidden>

                    <help>org.ametys.core.users.rights</help>
                    
                    <icon-glyph>ametysicon-carnival23</icon-glyph>
                    <icon-small file="true">img/users/impersonate_16.png</icon-small>
                    <icon-medium file="true">img/users/impersonate_32.png</icon-medium>
                    <icon-large file="true">img/users/impersonate_48.png</icon-large>
                </class>
                <script>
                    <file>js/Ametys/plugins/coreui/users/UsersActions.js</file>
                </script>
                <right context="/admin">Runtime_Rights_User_Handle</right>
            </extension>
    	</extensions>
    </feature>
    
    <feature name="group-directories">
    	<extensions>
    		<extension id="org.ametys.core.user.GroupDirectoriesTab"
                       point="org.ametys.core.ui.RibbonTabsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.tab.TabController">
                    <tool-id>^uitool-groupdirectories$</tool-id>
                </class> 
            </extension>
            
            <extension id="org.ametys.core.ui.groupdirectories.Add"
    				   point="org.ametys.core.ui.RibbonControlsManager"
    				   class="org.ametys.core.ui.StaticClientSideElement">
				<class name="Ametys.ribbon.element.ui.ButtonController">
					<action>Ametys.plugins.coreui.groupdirectories.GroupDirectoryActions.addGroupDirectory</action>
					
					<label i18n="true">PLUGINS_CORE_UI_GROUP_DIRECTORIES_ADD_LABEL</label>
					<description i18n="true">PLUGINS_CORE_UI_GROUP_DIRECTORIES_ADD_DESCRIPTION</description>
					
                    <icon-glyph>ametysicon-multiple25</icon-glyph>
                    <icon-decorator>decorator-ametysicon-add64</icon-decorator>
				</class>
				<scripts>
					<file>js/Ametys/plugins/coreui/groupdirectories/GroupDirectoryActions.js</file>
					<file>js/Ametys/plugins/coreui/groupdirectories/EditGroupDirectoryHelper.js</file>
					<file plugin="core">js/Ametys/plugins/core/groupdirectories/GroupDirectoryDAO.js</file>
				</scripts>
    		</extension>
    		
    		<extension id="org.ametys.core.ui.groupdirectories.Edit"
    				   point="org.ametys.core.ui.RibbonControlsManager"
    				   class="org.ametys.core.ui.StaticClientSideElement">
				<class name="Ametys.ribbon.element.ui.ButtonController">
					<action>Ametys.plugins.coreui.groupdirectories.GroupDirectoryActions.editGroupDirectory</action>
					<selection-target-id>^groupDirectory$</selection-target-id>
					
					<label i18n="true">PLUGINS_CORE_UI_GROUP_DIRECTORIES_EDIT_LABEL</label>
					<description i18n="true">PLUGINS_CORE_UI_GROUP_DIRECTORIES_EDIT_DESCRIPTION</description>
					
                    <icon-glyph>ametysicon-multiple25</icon-glyph>
                    <icon-decorator>decorator-ametysicon-edit45</icon-decorator>
				</class>
				<scripts>
					<file>js/Ametys/plugins/coreui/groupdirectories/GroupDirectoryActions.js</file>
					<file>js/Ametys/plugins/coreui/groupdirectories/EditGroupDirectoryHelper.js</file>
					<file plugin="core">js/Ametys/plugins/core/groupdirectories/GroupDirectoryDAO.js</file>
				</scripts>
    		</extension>
    		
    		<extension id="org.ametys.core.ui.groupdirectories.Remove"
    				   point="org.ametys.core.ui.RibbonControlsManager"
    				   class="org.ametys.core.ui.StaticClientSideElement">
				<class name="Ametys.ribbon.element.ui.ButtonController">
					<action>Ametys.plugins.coreui.groupdirectories.GroupDirectoryActions.removeGroupDirectory</action>
					<selection-target-id>^groupDirectory$</selection-target-id>
					
					<label i18n="true">PLUGINS_CORE_UI_GROUP_DIRECTORIES_REMOVE_LABEL</label>
					<description i18n="true">PLUGINS_CORE_UI_GROUP_DIRECTORIES_REMOVE_DESCRIPTION</description>
					
                    <icon-glyph>ametysicon-multiple25</icon-glyph>
                    <icon-decorator>decorator-ametysicon-remove11</icon-decorator>
				</class>
				<scripts>
					<file>js/Ametys/plugins/coreui/groupdirectories/GroupDirectoryActions.js</file>
					<file plugin="core">js/Ametys/plugins/core/groupdirectories/GroupDirectoryDAO.js</file>
				</scripts>
    		</extension>
            
    		<extension id="org.ametys.core.ui.groupdirectories.GroupDirectories"
    				   point="org.ametys.core.ui.RibbonControlsManager"
    				   class="org.ametys.core.ui.StaticClientSideElement">
				<class name="Ametys.ribbon.element.ui.button.OpenToolButtonController">
					<opentool-id>uitool-groupdirectories</opentool-id>
					
					<label i18n="true">PLUGINS_CORE_UI_GROUP_DIRECTORIES_TOOL_LABEL</label>
					<description i18n="true">PLUGINS_CORE_UI_GROUP_DIRECTORIES_TOOL_DESCRIPTION</description>
					
                    <icon-glyph>ametysicon-multiple25</icon-glyph>
                    <icon-decorator>decorator-ametysicon-agenda3</icon-decorator>
				</class>
                <depends>
                    <org.ametys.core.ui.UIToolsFactoriesManager>uitool-groupdirectories</org.ametys.core.ui.UIToolsFactoriesManager>
                </depends>
    		</extension>
    		
    		<extension id="uitool-groupdirectories"
    				   point="org.ametys.core.ui.UIToolsFactoriesManager"
    				   class="org.ametys.core.ui.StaticClientSideElement">
				<class name="Ametys.tool.factory.UniqueToolFactory">
					<toolClass>Ametys.plugins.coreui.groupdirectories.GroupDirectoryTool</toolClass>
					
					<title i18n="true">PLUGINS_CORE_UI_GROUP_DIRECTORIES_TOOL_LABEL</title>
	    			<description i18n="true">PLUGINS_CORE_UI_GROUP_DIRECTORIES_TOOL_DESCRIPTION</description>
	    			
                    <icon-glyph>ametysicon-multiple25</icon-glyph>
                    <icon-decorator>decorator-ametysicon-agenda3</icon-decorator>
					<default-location>cl</default-location>
				</class>    				   
				<scripts>
					<file>js/Ametys/plugins/coreui/groupdirectories/GroupDirectoryTool.js</file>
					<file plugin="core">js/Ametys/plugins/core/groupdirectories/GroupDirectoryDAO.js</file>
				</scripts>
    		</extension>
    	</extensions>
    </feature>
    
    <feature name="group-directory.linkToApplication">
    	<extensions>
    		<extension id="org.ametys.core.ui.groupdirectories.LinkToApplicationContext"
    				   point="org.ametys.core.ui.RibbonControlsManager"
    				   class="org.ametys.core.ui.StaticClientSideElement">
				<class name="Ametys.ribbon.element.ui.ButtonController">
					<action>Ametys.plugins.coreui.groupdirectories.GroupDirectoryActions.link</action>
					<context></context>
					
					<label i18n="true">PLUGINS_CORE_UI_GROUP_DIRECTORIES_LINK_LABEL</label>
					<description i18n="true">PLUGINS_CORE_UI_GROUP_DIRECTORIES_LINK_DESCRIPTION</description>
					
                    <icon-glyph>ametysicon-multiple25</icon-glyph>
                    <icon-decorator>decorator-ametysicon-link55</icon-decorator>
				</class>
				<scripts>
					<file>js/Ametys/plugins/coreui/groupdirectories/GroupDirectoryActions.js</file>
					<file plugin="core">js/Ametys/plugins/core/groupdirectories/GroupDirectoryDAO.js</file>
					<file>js/Ametys/plugins/coreui/groupdirectories/ChooseGroupDirectoriesHelper.js</file>
				</scripts>
    		</extension>
    	</extensions>
    </feature>
    
    <feature name="core.ui.groups">
    	<extensions>
    		<extension id="org.ametys.core.Groups"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.button.OpenToolButtonController">
                    <opentool-id>uitool-groups</opentool-id>
                    <opentool-params>
                    	<enableAllDirectoriesOption>true</enableAllDirectoriesOption>
                    </opentool-params>
                    <label i18n="true">PLUGINS_CORE_UI_TOOL_GROUPS_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_TOOL_GROUPS_DESCRIPTION</description>
                    <help>org.ametys.core.groups</help>
                    <icon-glyph>ametysicon-multiple25</icon-glyph>
                    <icon-small file="true">img/groups/group_16.png</icon-small>
                    <icon-medium file="true">img/groups/group_32.png</icon-medium>
                    <icon-large file="true">img/groups/group_50.png</icon-large>
                </class>
                <depends>
                    <org.ametys.core.ui.UIToolsFactoriesManager>uitool-groups</org.ametys.core.ui.UIToolsFactoriesManager>
                </depends>
                <right context-prefix="/contributor">Runtime_Rights_Group_Handle</right>
            </extension>
            
            <extension id="uitool-groups"
                       point="org.ametys.core.ui.UIToolsFactoriesManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.tool.factory.UniqueToolFactory">
                    <toolClass>Ametys.plugins.coreui.groups.GroupsTool</toolClass>
                    
                    <title i18n="true">PLUGINS_CORE_UI_TOOL_GROUPS_LABEL</title>
                    <description i18n="true">PLUGINS_CORE_UI_TOOL_GROUPS_DESCRIPTION</description>
                    <help>org.ametys.core.groups</help>
                    <icon-glyph>ametysicon-multiple25</icon-glyph>
                    <icon-small file="true">img/groups/group_16.png</icon-small>
                    <icon-medium file="true">img/groups/group_32.png</icon-medium>
                    <icon-large file="true">img/groups/group_50.png</icon-large>
                    <default-location>cl</default-location>
                </class>
                <scripts>
                    <file plugin="core">js/Ametys/plugins/core/groups/GroupsDAO.js</file>
                    <file>js/Ametys/plugins/coreui/groups/GroupsTool.js</file>
                    <file>js/Ametys/plugins/coreui/groups/GroupsTool/Group.js</file>
                    <file>js/Ametys/plugins/coreui/groups/GroupsTool/UserGroup.js</file>
                </scripts>
                <depends>
                    <org.ametys.core.ui.RelationsManager>target:group</org.ametys.core.ui.RelationsManager>
                </depends>
            </extension>
            
            <extension id="org.ametys.core.rights.GroupTab"
                       point="org.ametys.core.ui.RibbonTabsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.tab.TabController">
                    <tool-id>uitool-groups</tool-id>
                </class> 
            </extension>
            
            <extension id="org.ametys.core.groups.Add"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.coreui.groups.GroupsActions.add</action>
                    <label i18n="true">PLUGINS_CORE_UI_GROUPS_ADD_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_GROUPS_ADD_DESCRIPTION</description>
                    
                    <icon-glyph>ametysicon-multiple25</icon-glyph>
                    <icon-decorator>decorator-ametysicon-add64</icon-decorator>
                    <icon-small file="true">img/groups/add_16.png</icon-small>
                    <icon-medium file="true">img/groups/add_32.png</icon-medium>
                    <icon-large file="true">img/groups/add_50.png</icon-large>
                </class>
                <scripts>
                    <file plugin="core">js/Ametys/plugins/core/groups/GroupsDAO.js</file>
                    <file>js/Ametys/plugins/coreui/groups/GroupsActions.js</file>
                    <file>js/Ametys/plugins/coreui/groups/EditGroupHelper.js</file>
                </scripts>
                <right>Runtime_Rights_Group_Handle</right>
            </extension>
            
            <extension id="org.ametys.core.groups.Edit"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.plugins.coreui.groups.controller.EditGroupButtonController">
                    <action>Ametys.plugins.coreui.groups.GroupsActions.edit</action>
                    <selection-target-id>^group$</selection-target-id>
                    
                    <label i18n="true">PLUGINS_CORE_UI_GROUPS_RENAME_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_GROUPS_RENAME_DESCRIPTION</description>
                    <no-modifiable-description i18n="true">PLUGINS_CORE_UI_GROUPS_NO_MODIFIABLE_GROUP_DESCRIPTION</no-modifiable-description>
                    
                    <icon-glyph>ametysicon-multiple25</icon-glyph>
                    <icon-decorator>decorator-ametysicon-edit45</icon-decorator>
                    <icon-small file="true">img/groups/rename_16.png</icon-small>
                    <icon-medium file="true">img/groups/rename_32.png</icon-medium>
                    <icon-large file="true">img/groups/rename_50.png</icon-large>
                </class>
                <scripts> 
                	<file>js/Ametys/plugins/coreui/groups/controller/EditGroupButtonController.js</file>  
                    <file plugin="core">js/Ametys/plugins/core/groups/GroupsDAO.js</file>
                    <file>js/Ametys/plugins/coreui/groups/GroupsActions.js</file>
                    <file>js/Ametys/plugins/coreui/groups/EditGroupHelper.js</file>
                </scripts>
                <right>Runtime_Rights_Group_Handle</right>
            </extension>
            
            <extension id="org.ametys.core.groups.Delete"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.plugins.coreui.groups.controller.EditGroupButtonController">
                    <action>Ametys.plugins.coreui.groups.GroupsActions.delete</action>
                    <selection-target-id>^group$</selection-target-id>
                    
                    <label i18n="true">PLUGINS_CORE_UI_GROUPS_DELETE_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_GROUPS_DELETE_DESCRIPTION</description>
                    <no-modifiable-description i18n="true">PLUGINS_CORE_UI_GROUPS_NO_MODIFIABLE_GROUP_DESCRIPTION</no-modifiable-description>
                    
                    <icon-glyph>ametysicon-multiple25</icon-glyph>
                    <icon-decorator>decorator-ametysicon-remove11</icon-decorator>
                    <icon-small file="true">img/groups/delete_16.png</icon-small>
                    <icon-medium file="true">img/groups/delete_32.png</icon-medium>
                    <icon-large file="true">img/groups/delete_50.png</icon-large>
                </class>
                <scripts>
                	<file>js/Ametys/plugins/coreui/groups/controller/EditGroupButtonController.js</file>
                    <file plugin="core">js/Ametys/plugins/core/groups/GroupsDAO.js</file>
                    <file>js/Ametys/plugins/coreui/groups/GroupsActions.js</file>
                </scripts>
                <right>Runtime_Rights_Group_Handle</right>
            </extension>
            
            <extension id="org.ametys.core.groups.AddUsers"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.plugins.coreui.groups.controller.EditGroupButtonController">
                    <action>Ametys.plugins.coreui.groups.GroupsActions.addUsers</action>
                    <selection-target-id>^group$</selection-target-id>

                    <label i18n="true">PLUGINS_CORE_UI_GROUPS_ADDUSERS_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_GROUPS_ADDUSERS_DESCRIPTION</description>
                    <no-modifiable-description i18n="true">PLUGINS_CORE_UI_GROUPS_NO_MODIFIABLE_GROUP_DESCRIPTION</no-modifiable-description>
                    
                    <icon-glyph>ametysicon-black302</icon-glyph>
                    <icon-decorator>decorator-ametysicon-add64</icon-decorator>
                    <icon-small file="true">img/users/add_16.png</icon-small>
                    <icon-medium file="true">img/users/add_32.png</icon-medium>
                    <icon-large file="true">img/users/add_48.png</icon-large>
                </class>
                <scripts>
                	<file>js/Ametys/plugins/coreui/groups/controller/EditGroupButtonController.js</file>
                    <file plugin="core">js/Ametys/plugins/core/groups/GroupsDAO.js</file>
                    <file>js/Ametys/plugins/coreui/groups/GroupsActions.js</file>
                </scripts>
                <right>Runtime_Rights_Group_Handle</right>
            </extension>
            
            <extension id="org.ametys.core.groups.RemoveUsers"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.plugins.coreui.groups.controller.EditGroupButtonController">
                    <action>Ametys.plugins.coreui.groups.GroupsActions.removeUsers</action>
                    <selection-target-id>^group$</selection-target-id>
                    <selection-subtarget-id>^user$</selection-subtarget-id>
                    
                    <label i18n="true">PLUGINS_CORE_UI_GROUPS_REMOVEUSERS_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_GROUPS_REMOVEUSERS_DESCRIPTION</description>
                    <no-modifiable-description i18n="true">PLUGINS_CORE_UI_GROUPS_NO_MODIFIABLE_GROUP_DESCRIPTION</no-modifiable-description>
                    
                    <icon-glyph>ametysicon-black302</icon-glyph>
                    <icon-decorator>decorator-ametysicon-remove11</icon-decorator>
                    <icon-small file="true">img/users/delete_16.png</icon-small>
                    <icon-medium file="true">img/users/delete_32.png</icon-medium>
                    <icon-large file="true">img/users/delete_48.png</icon-large>
                </class>
                <scripts>
                	<file>js/Ametys/plugins/coreui/groups/controller/EditGroupButtonController.js</file>
                    <file plugin="core">js/Ametys/plugins/core/groups/GroupsDAO.js</file>
                    <file>js/Ametys/plugins/coreui/groups/GroupsActions.js</file>
                </scripts>
                <right>Runtime_Rights_Group_Handle</right>
            </extension>
    	</extensions>
    </feature>
    
    <feature name="core.ui.profiles">
    	<extensions>
    		<extension id="org.ametys.core.Profiles"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.button.OpenToolButtonController">
                    <opentool-id>uitool-profiles</opentool-id>
                    <label i18n="true">PLUGINS_CORE_UI_TOOL_PROFILES_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_TOOL_PROFILES_DESCRIPTION</description>
                    <help>org.ametys.core.rights.profiles</help>
                    <icon-glyph>ametysicon-id16</icon-glyph>
                    <icon-small file="true">img/profiles/profile_16.gif</icon-small>
                    <icon-medium file="true">img/profiles/profile_32.gif</icon-medium>
                    <icon-large file="true">img/profiles/profile_50.gif</icon-large>
                </class>
                <depends>
                    <org.ametys.core.ui.UIToolsFactoriesManager>uitool-profiles</org.ametys.core.ui.UIToolsFactoriesManager>
                </depends>
                <right context-prefix="/contributor">Runtime_Rights_Rights_Profile_See</right>
            </extension>
            
            <extension id="uitool-profiles"
                       point="org.ametys.core.ui.UIToolsFactoriesManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.tool.factory.UniqueToolFactory">
                    <toolClass>Ametys.plugins.coreui.profiles.ProfilesTool</toolClass>
                    
                    <title i18n="true">PLUGINS_CORE_UI_TOOL_PROFILES_LABEL</title>
                    <description i18n="true">PLUGINS_CORE_UI_TOOL_PROFILES_DESCRIPTION</description>
                    <help>org.ametys.core.rights.profiles</help>
                    <icon-glyph>ametysicon-id16</icon-glyph>
                    <icon-small file="true">img/profiles/profile_16.gif</icon-small>
                    <icon-medium file="true">img/profiles/profile_32.gif</icon-medium>
                    <icon-large file="true">img/profiles/profile_50.gif</icon-large>
                    <default-location>cl</default-location>
                </class>
                <scripts>
                    <file plugin="core">js/Ametys/plugins/core/profiles/ProfilesDAO.js</file>
                    <file>js/Ametys/plugins/coreui/profiles/ProfilesTool.js</file>
                    <file>js/Ametys/plugins/coreui/profiles/ProfilesTool/Profile.js</file>
                    <file>js/Ametys/plugins/coreui/profiles/ProfilesTool/Right.js</file>
                </scripts>
            </extension>
            
            <extension id="org.ametys.core.rights.ProfileTab"
                       point="org.ametys.core.ui.RibbonTabsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.tab.TabController">
                    <tool-id>uitool-profiles</tool-id>
                </class> 
            </extension>
            
            <extension id="org.ametys.core.profiles.Add"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.coreui.profiles.ProfilesActions.add</action>
                    
                    <label i18n="true">PLUGINS_CORE_UI_PROFILES_ADD_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_PROFILES_ADD_DESCRIPTION</description>
                    <no-right-description>PLUGINS_CORE_UI_PROFILES_DESCRIPTION_NO_RIGHT</no-right-description>
                    
                    <icon-glyph>ametysicon-id16</icon-glyph>
                    <icon-decorator>decorator-ametysicon-add64</icon-decorator>
                    <icon-small file="true">img/profiles/add_16.gif</icon-small>
                    <icon-medium file="true">img/profiles/add_32.gif</icon-medium>
                    <icon-large file="true">img/profiles/add_50.gif</icon-large>
                </class>
                <scripts>
                    <file plugin="core">js/Ametys/plugins/core/profiles/ProfilesDAO.js</file>
                    <file>js/Ametys/plugins/coreui/profiles/ProfilesActions.js</file>
                    <file>js/Ametys/plugins/coreui/profiles/EditProfileHelper.js</file>
                </scripts>
                <right>Runtime_Rights_Rights_Profile_Handle</right>
            </extension>
            
            <extension id="org.ametys.core.profiles.Edit"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.coreui.profiles.ProfilesActions.edit</action>
                    <selection-target-id>^profile$</selection-target-id>
                    
                    <label i18n="true">PLUGINS_CORE_UI_PROFILES_RENAME_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_PROFILES_RENAME_DESCRIPTION</description>
                    <no-selection-description i18n="true">PLUGINS_CORE_UI_PROFILES_DESCRIPTION_NO_SELECTION</no-selection-description>
                    
                    <icon-glyph>ametysicon-id16</icon-glyph>
                    <icon-decorator>decorator-ametysicon-text1</icon-decorator>
                    <icon-small file="true">img/profiles/rename_16.gif</icon-small>
                    <icon-medium file="true">img/profiles/rename_32.gif</icon-medium>
                    <icon-large file="true">img/profiles/rename_50.gif</icon-large>
                </class>
                <scripts>
                    <file plugin="core">js/Ametys/plugins/core/profiles/ProfilesDAO.js</file>
                    <file>js/Ametys/plugins/coreui/profiles/ProfilesActions.js</file>
                    <file>js/Ametys/plugins/coreui/profiles/EditProfileHelper.js</file>
                </scripts>
                <right>Runtime_Rights_Rights_Profile_Handle</right>
            </extension>
            
            <extension id="org.ametys.core.profiles.Delete"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.plugins.coreui.profile.controller.RemoveProfileButtonController">
                    <action>Ametys.plugins.coreui.profiles.ProfilesActions.delete</action>
                    <selection-target-id>^profile$</selection-target-id>
                    
                    <label i18n="true">PLUGINS_CORE_UI_PROFILES_DELETE_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_PROFILES_DELETE_DESCRIPTION</description>
                    <no-selection-description i18n="true">PLUGINS_CORE_UI_PROFILES_DESCRIPTION_NO_SELECTION</no-selection-description>
                    <no-removable-description i18n="true">PLUGINS_CORE_UI_PROFILES_DESCRIPTION_NO_REMOVABLE</no-removable-description>
                    
                    <icon-glyph>ametysicon-id16</icon-glyph>
                    <icon-decorator>decorator-ametysicon-remove11</icon-decorator>
                    <icon-small file="true">img/profiles/delete_16.gif</icon-small>
                    <icon-medium file="true">img/profiles/delete_32.gif</icon-medium>
                    <icon-large file="true">img/profiles/delete_50.gif</icon-large>
                </class>
                <scripts>
                    <file plugin="core">js/Ametys/plugins/core/profiles/ProfilesDAO.js</file>
                    <file>js/Ametys/plugins/coreui/profiles/ProfilesActions.js</file>
                    <file>js/Ametys/plugins/coreui/profiles/controller/RemoveProfileButtonController.js</file>
                </scripts>
                <right>Runtime_Rights_Rights_Profile_Handle</right>
            </extension>
            
            <extension id="org.ametys.core.profiles.SwitchMode"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.plugins.coreui.profiles.controller.ViewModeController">
                    <action>Ametys.plugins.coreui.profiles.ProfilesTool.switchMode</action>
                    
                    <enable-toggle>true</enable-toggle>
                    <tool-id>uitool-profile</tool-id>
                    <tool-enable-on-status>focus</tool-enable-on-status>
                    <selection-target-id>^profile$</selection-target-id>
                                        
                    <label i18n="true">PLUGINS_CORE_UI_PROFILES_SWITCH_TO_EDITION</label>
                    <description i18n="true">PLUGINS_CORE_UI_PROFILES_SWITCH_TO_EDITION_DESCRIPTION</description>
                    <no-selection-description i18n="true">PLUGINS_CORE_UI_PROFILES_DESCRIPTION_NO_SELECTION</no-selection-description>
                    
                    <icon-glyph>ametysicon-edit5</icon-glyph>
                    <icon-small file="true">img/profiles/edit_16.png</icon-small>
                    <icon-medium file="true">img/profiles/edit_32.png</icon-medium>
                    <icon-large file="true">img/profiles/edit_48.png</icon-large>
                </class>
                <scripts>
                    <file plugin="core">js/Ametys/plugins/core/profiles/ProfilesDAO.js</file>
                    <file>js/Ametys/plugins/coreui/profiles/ProfilesTool.js</file>
                    <file>js/Ametys/plugins/coreui/profiles/controller/ViewModeController.js</file>
                </scripts>
                <right>Runtime_Rights_Rights_Profile_Handle</right>
           </extension>
           
           <extension id="org.ametys.core.profiles.SaveRights"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.coreui.profiles.ProfilesTool.save</action>
                   
                    <disabled>true</disabled>
                    <selection-target-id>^profile$</selection-target-id>
                    <selection-subtarget-id>^form$</selection-subtarget-id>
                    <selection-subtarget-parameter>
                        <name>isDirty</name>
                        <value>true</value>
                    </selection-subtarget-parameter>
                    
                    <label i18n="true">PLUGINS_CORE_UI_PROFILES_SAVE_MODIFICATIONS</label>
                    <description i18n="true">PLUGINS_CORE_UI_PROFILES_SAVE_MODIFICATIONS_DESCRIPTION</description>
                    <no-selection-description i18n="true">PLUGINS_CORE_UI_PROFILES_DESCRIPTION_NO_SELECTION</no-selection-description>
                    
                    <icon-glyph>ametysicon-save31</icon-glyph>
                    <icon-small file="true">img/profiles/save_16.png</icon-small>
                    <icon-medium file="true">img/profiles/save_32.png</icon-medium>
                    <icon-large file="true">img/profiles/save_48.png</icon-large>
                </class>
                <scripts>
                    <file plugin="core">js/Ametys/plugins/core/profiles/ProfilesDAO.js</file>
                    <file>js/Ametys/plugins/coreui/profiles/ProfilesActions.js</file>
                </scripts>
                <right>Runtime_Rights_Rights_Profile_Handle</right>
            </extension>
            
            <extension id="org.ametys.core.profiles.Discard"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.coreui.profiles.ProfilesTool.discardChanges</action>
                   
                    <disabled>true</disabled>
                    <selection-target-id>^profile$</selection-target-id>
                    <selection-subtarget-id>^form$</selection-subtarget-id>
                    <selection-subtarget-parameter>
                        <name>isDirty</name>
                        <value>true</value>
                    </selection-subtarget-parameter>
                    
                    <label i18n="true">PLUGINS_CORE_UI_PROFILES_DONT_SAVE_MODIFICATIONS</label>
                    <description i18n="true">PLUGINS_CORE_UI_PROFILES_DONT_SAVE_MODIFICATIONS_DESCRIPTION</description>
                    <no-selection-description i18n="true">PLUGINS_CORE_UI_PROFILES_DESCRIPTION_NO_SELECTION</no-selection-description>
                    
                    <icon-glyph>ametysicon-save31</icon-glyph>
                    <icon-decorator>decorator-ametysicon-remove11</icon-decorator>
                    <icon-small file="true">img/profiles/unsave_16.png</icon-small>
                    <icon-medium file="true">img/profiles/unsave_32.png</icon-medium>
                    <icon-large file="true">img/profiles/unsave_48.png</icon-large>
                </class>
                <scripts>
                    <file plugin="core">js/Ametys/plugins/core/profiles/ProfilesDAO.js</file>
                    <file>js/Ametys/plugins/coreui/profiles/ProfilesActions.js</file>
                </scripts>
                <right>Runtime_Rights_Rights_Profile_Handle</right>
            </extension>
           
           <extension id="org.ametys.core.profiles.SelectAll"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.plugins.coreui.profiles.controller.SelectRightsController">
                    <action>Ametys.plugins.coreui.profiles.ProfilesTool.selectAll</action>
                    
                    <disabled>true</disabled>
                    <selection-target-id>^profile$</selection-target-id>
                    <selection-subtarget-id>^form$</selection-subtarget-id>
                                        
                    <label i18n="true">PLUGINS_CORE_UI_PROFILES_SELECT_ALL</label>
                    <description i18n="true">PLUGINS_CORE_UI_PROFILES_SELECT_ALL_DESCRIPTION</description>
                    <no-selection-description i18n="true">PLUGINS_CORE_UI_PROFILES_DESCRIPTION_NO_SELECTION</no-selection-description>
                    
                    <icon-glyph>ametysicon-check51</icon-glyph>
                    <icon-small file="true">img/profiles/select_16.png</icon-small>
                    <icon-medium file="true">img/profiles/select_32.png</icon-medium>
                    <icon-large file="true">img/profiles/select_48.png</icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/coreui/profiles/controller/SelectRightsController.js</file>
                    <file plugin="core">js/Ametys/plugins/core/profiles/ProfilesDAO.js</file>
                    <file>js/Ametys/plugins/coreui/profiles/ProfilesActions.js</file>
                    <file>js/Ametys/plugins/coreui/profiles/ProfilesTool.js</file>
                </scripts>
                <right>Runtime_Rights_Rights_Profile_Handle</right>
            </extension>
            
           <extension id="org.ametys.core.profiles.UnselectAll"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.plugins.coreui.profiles.controller.SelectRightsController">
                    <action>Ametys.plugins.coreui.profiles.ProfilesTool.unselectAll</action>
                    
                    <disabled>true</disabled>
                    <selection-target-id>^profile$</selection-target-id>
                    <selection-subtarget-id>^form$</selection-subtarget-id>
                    
                    <label i18n="true">PLUGINS_CORE_UI_PROFILES_UNSELECT_ALL</label>
                    <description i18n="true">PLUGINS_CORE_UI_PROFILES_UNSELECT_ALL_DESCRIPTION</description>
                    <no-selection-description i18n="true">PLUGINS_CORE_UI_PROFILES_DESCRIPTION_NO_SELECTION</no-selection-description>
                    
                    <icon-glyph>ametysicon-blank32</icon-glyph>
                    <icon-small file="true">img/profiles/unselect_16.png</icon-small>
                    <icon-medium file="true">img/profiles/unselect_32.png</icon-medium>
                    <icon-large file="true">img/profiles/unselect_48.png</icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/coreui/profiles/controller/SelectRightsController.js</file>
                    <file plugin="core">js/Ametys/plugins/core/profiles/ProfilesDAO.js</file>
                    <file>js/Ametys/plugins/coreui/profiles/ProfilesActions.js</file>
                    <file>js/Ametys/plugins/coreui/profiles/ProfilesTool.js</file>
                </scripts>
                <right>Runtime_Rights_Rights_Profile_Handle</right>
            </extension>
    	</extensions>
    </feature>
    
    <feature name="org.ametys.runtime.log.memoryAppender" safe="true">
        <components>
            <component role="org.ametys.plugins.core.ui.log.LogManager"
                       id="org.ametys.plugins.core.ui.log.LogManager"
                       class="org.ametys.plugins.core.ui.log.LogManager"
                       logger="org.ametys.plugins.core.ui.log.LogManager" />
        </components>
        
        <extensions>
            <extension id="uitool-server-logs"
                       point="org.ametys.core.ui.UIToolsFactoriesManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.tool.factory.BasicToolFactory">
                    <toolClass>Ametys.plugins.coreui.log.ServerLogTool</toolClass>
                    
                    <title i18n="true">PLUGINS_CORE_UI_TOOLS_SERVERLOGS_LABEL</title>
                    <description i18n="true">PLUGINS_CORE_UI_TOOLS_SERVERLOGS_DESCRIPTION</description>
                    
                    <icon-glyph>ametysicon-document112</icon-glyph>
                    <default-location>cl</default-location>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/coreui/log/AbstractLogTool.js</file>
                    <file>js/Ametys/plugins/coreui/log/ServerLogTool.js</file>
                    <file>js/Ametys/plugins/coreui/log/ServerLogTool/ServerLogEntry.js</file>
                </scripts>
            </extension>
            
            <extension id="org.ametys.plugins.core.ui.log.ServerLogTool"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.button.OpenToolButtonController">
                    <opentool-id>uitool-server-logs</opentool-id>
                    <opentool-params>
                        <id>server-logs</id>
                    </opentool-params>
                    
                    <label i18n="true">PLUGINS_CORE_UI_TOOLS_SERVERLOGS_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_TOOLS_SERVERLOGS_DESCRIPTION</description>
                    
                    <icon-glyph>ametysicon-document112</icon-glyph>
                </class>
                <depends>
                    <org.ametys.core.ui.UIToolsFactoriesManager>uitool-server-logs</org.ametys.core.ui.UIToolsFactoriesManager>
                </depends>
            </extension>

            <extension id="org.ametys.plugins.core.ui.log.ServerLogTool.Tab"
                       point="org.ametys.core.ui.RibbonTabsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.tab.TabController">
                    <tool-id>^uitool-server-logs\$.*$</tool-id>
                </class>
            </extension>
            
            <extension id="org.ametys.plugins.core.ui.log.ServerLogTool.Pause"
                     point="org.ametys.core.ui.RibbonControlsManager"
                     class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                   <action>Ametys.plugins.coreui.log.ServerLogActions.pause</action>
                  
                   <label i18n="true">PLUGINS_CORE_UI_TOOLS_SERVERLOGS_PAUSE_LABEL</label>
                   <description i18n="true">PLUGINS_CORE_UI_TOOLS_SERVERLOGS_PAUSE_DESCRIPTION</description>
                   <description-play i18n="true">PLUGINS_CORE_UI_TOOLS_SERVERLOGS_PLAY_DESCRIPTION</description-play>
                  
                   <icon-glyph>ametysicon-pause</icon-glyph>
                   <icon-glyph-play>ametysicon-play124</icon-glyph-play>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/coreui/log/ServerLogActions.js</file>
                </scripts>
            </extension>
            
            <extension id="org.ametys.plugins.core.ui.log.ServerLogTool.Clear"
                     point="org.ametys.core.ui.RibbonControlsManager"
                     class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                   <action>Ametys.plugins.coreui.log.ServerLogActions.clear</action>
                  
                   <label i18n="true">PLUGINS_CORE_UI_TOOLS_SERVERLOGS_CLEAR_LABEL</label>
                   <description i18n="true">PLUGINS_CORE_UI_TOOLS_SERVERLOGS_CLEAR_DESCRIPTION</description>
                  
                   <icon-glyph>ametysicon-eraser11</icon-glyph>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/coreui/log/ServerLogActions.js</file>
                </scripts>
            </extension>
        </extensions>
    </feature>
    
    <feature name="runtime.core.ui.resources-handler" safe="true">
        <extensions>
            <extension point="org.ametys.core.cocoon.ResourceHandlerExtensionPoint"
                       id="org.ametys.plugins.core.ui.resources.LessResourceHandler"
                       class="org.ametys.plugins.core.ui.resources.LessResourceHandler"
                       logger="org.ametys.plugins.core.ui.resources.LessResourceHandler">
                <suffixes>
                    <suffix>.less</suffix>
                </suffixes>
            </extension>

            <extension point="org.ametys.core.cocoon.ResourceHandlerExtensionPoint"
                       id="org.ametys.plugins.core.ui.resources.SassResourceHandler"
                       class="org.ametys.plugins.core.ui.resources.SassResourceHandler"
                       logger="org.ametys.plugins.core.ui.resources.SassResourceHandler">
                <suffixes>
                    <suffix>.sass</suffix>
                    <suffix>.scss</suffix>
                </suffixes>
            </extension>
        </extensions>
    </feature>
    
    <feature name="sass.helpers" safe="true">
        <components>
            <component id="org.ametys.plugins.core.ui.resources.AmetysSASSHelper"
                       role="org.ametys.plugins.core.ui.resources.AmetysSASSHelper"
                       class="org.ametys.plugins.core.ui.resources.AmetysSASSHelper"/>
        </components>
    </feature>
    
    <feature name="plugin.core.ui.scripts" safe="true">
        <extensions>
            <extension point="org.ametys.core.right.RightsExtensionPoint"
                       id="core.script.rights.execute">
                <right id="CORE_Rights_ExecuteScript">
                    <label>PLUGINS_CORE_UI_RIGHTS_SCRIPT_EXECUTE_LABEL</label>
                    <description>PLUGINS_CORE_UI_RIGHTS_SCRIPT_EXECUTE_DESCRIPTION</description>
                    <category>PLUGINS_CORE_RIGHTS_SCRIPTS_CATEGORY</category>
                </right>
            </extension>
        
            <extension id="org.ametys.plugins.core.ui.ScriptTab"
                       point="org.ametys.core.ui.RibbonTabsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.tab.TabController">
                    <tool-id>^(uitool-admin-script|uitool-admin-console)$</tool-id>
                </class>
            </extension>
            
            <extension id="org.ametys.plugins.core.ui.Script.Execute"
                     point="org.ametys.core.ui.RibbonControlsManager"
                     class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                   <action>Ametys.plugins.coreui.script.ScriptActions.executeScript</action>
                   <tool-id>^uitool-admin-script$</tool-id>
                  
                   <label i18n="true">PLUGINS_CORE_UI_TOOLS_SCRIPT_TAB_EXECUTE_LABEL</label>
                   <description i18n="true">PLUGINS_CORE_UI_TOOLS_SCRIPT_TAB_EXECUTE_DESC</description>
                  
                   <icon-glyph>ametysicon-play124</icon-glyph>
                </class>
                <scripts>
                    <file>js/Ametys/script/ScriptActions.js</file>
                </scripts>
                <right>CORE_Rights_ExecuteScript</right>
            </extension>
        
            <extension id="org.ametys.plugins.core.ui.Console.Clear"
                     point="org.ametys.core.ui.RibbonControlsManager"
                     class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                   <action>Ametys.plugins.coreui.script.ScriptActions.clearResults</action>
                   <tool-id>^uitool-admin-console$</tool-id>
                   <tool-enable-on-status>open</tool-enable-on-status>
                  
                   <label i18n="true">PLUGINS_CORE_UI_TOOLS_SCRIPT_TAB_CLEAR_LABEL</label>
                   <description i18n="true">PLUGINS_CORE_UI_TOOLS_SCRIPT_TAB_CLEAR_DESC</description>
                  
                   <icon-glyph>ametysicon-eraser11</icon-glyph>
                </class>
                <scripts>
                    <file>js/Ametys/script/ScriptActions.js</file>
                </scripts>
                <right>CORE_Rights_ExecuteScript</right>
            </extension>
        
            <extension id="org.ametys.plugins.core.ui.Script"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.button.OpenToolButtonController">
                    <opentool-id>uitool-admin-script</opentool-id>
                    
                    <label i18n="true">PLUGINS_CORE_UI_TOOLS_SCRIPT_TITLE</label>
                    <description i18n="true">PLUGINS_CORE_UI_TOOLS_SCRIPT_DESCRIPTION</description>
                    <help>org.ametys.coreui.script</help>
                    
                    <icon-glyph>ametysicon-computer196</icon-glyph>
                    <icon-small file="true">img/console/console-16.png</icon-small>
                    <icon-medium file="true">img/console/console-32.png</icon-medium>
                    <icon-large file="true">img/console/console-48.png</icon-large>
                </class>
                <right>CORE_Rights_ExecuteScript</right>
                <depends>
                    <org.ametys.core.ui.UIToolsFactoriesManager>uitool-admin-script</org.ametys.core.ui.UIToolsFactoriesManager>
                </depends>
            </extension>
            <extension id="uitool-admin-script"
                       point="org.ametys.core.ui.UIToolsFactoriesManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.tool.factory.UniqueToolFactory">
                    <toolClass>Ametys.plugins.coreui.script.ScriptTool</toolClass>
                    
                    <title i18n="true">PLUGINS_CORE_UI_TOOLS_SCRIPT_TITLE</title>
                    <description i18n="true">PLUGINS_CORE_UI_TOOLS_SCRIPT_DESCRIPTION</description>
                    <help>org.ametys.coreui.script</help>
                    
                    <icon-glyph>ametysicon-computer196</icon-glyph>
                    <icon-small file="true">img/console/console-16.png</icon-small>
                    <icon-medium file="true">img/console/console-32.png</icon-medium>
                    <icon-large file="true">img/console/console-48.png</icon-large>
                    
                    <default-location></default-location>
                </class>
                <scripts>
                    <file>js/Ametys/script/ScriptTool.js</file>
                </scripts>
                <css>
                    <file>css/Ametys/script/scripts.css</file>
                </css>
                <depends>
                    <org.ametys.core.ui.UIToolsFactoriesManager>uitool-admin-console</org.ametys.core.ui.UIToolsFactoriesManager>
                </depends>
                <right>CORE_Rights_ExecuteScript</right>
            </extension>
            <extension id="org.ametys.core.ui.ConsoleResult"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.button.OpenToolButtonController">
                    <opentool-id>uitool-admin-console</opentool-id>
                    
                    <label i18n="true">PLUGINS_CORE_UI_TOOLS_SCRIPT_RESULT_TITLE</label>
                    <description i18n="true">PLUGINS_CORE_UI_TOOLS_SCRIPT_RESULT_DESCRIPTION</description>
                    <help>org.ametys.coreui.console.result</help>
                    
                    <icon-small file="true">img/console/console-result-16.png</icon-small>
                    <icon-medium file="true">img/console/console-result-32.png</icon-medium>
                    <icon-large file="true">img/console/console-result-48.png</icon-large>
                </class>
                <depends>
                    <org.ametys.core.ui.UIToolsFactoriesManager>uitool-admin-console</org.ametys.core.ui.UIToolsFactoriesManager>
                </depends>
                <right>CORE_Rights_ExecuteScript</right>
            </extension>
            <extension id="uitool-admin-console"
                       point="org.ametys.core.ui.UIToolsFactoriesManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.tool.factory.UniqueToolFactory">
                    <toolClass>Ametys.plugins.coreui.script.ConsoleTool</toolClass>
                    
                    <title i18n="true">PLUGINS_CORE_UI_TOOLS_SCRIPT_RESULT_TITLE</title>
                    <description i18n="true">PLUGINS_CORE_UI_TOOLS_SCRIPT_RESULT_DESCRIPTION</description>
                    <help>org.ametys.coreui.console.result</help>
                    
                    <icon-small file="true">img/console/console-result-16.png</icon-small>
                    <icon-medium file="true">img/console/console-result-32.png</icon-medium>
                    <icon-large file="true">img/console/console-result-48.png</icon-large>
                    
                    <default-location>r</default-location>
                </class>
                <scripts>
                    <file>js/Ametys/script/ConsoleTool.js</file>
                </scripts>
                <css>
                    <file>css/Ametys/script/scripts-result.css</file>
                </css>
                <right>CORE_Rights_ExecuteScript</right>
            </extension>
        </extensions>
    </feature>
    
    <feature name="plugin.core.ui.scriptshandler" safe="true">
        <components>
            <component role="org.ametys.plugins.core.ui.script.ScriptHandler"
                       id="org.ametys.plugins.core.ui.script.ScriptHandler"
                       class="org.ametys.plugins.core.ui.script.ScriptHandler"
                       logger="org.ametys.plugins.core.ui.script.ScriptHandler" />
        </components>
    </feature>
        
    <feature name="plugin.core.ui.scripts.defaultbinding.safe" safe="true">
        <extensions>
            <extension point="org.ametys.plugins.core.ui.script.ScriptBindingExtensionPoint"
                       id="org.ametys.plugins.core.ui.script.RuntimeScriptBinding"
                       class="org.ametys.plugins.core.ui.script.RuntimeScriptBinding"
                       config="scripttool/runtime-script-binding.xml">
            </extension>
        </extensions>
    </feature>
    
    <feature name="plugin.core.ui.scripts.defaultbinding">
        <extensions>
            <extension point="org.ametys.plugins.core.ui.script.ScriptBindingExtensionPoint"
                       id="org.ametys.plugins.core.ui.script.StaticConfigurableScriptBinding"
                       class="org.ametys.plugins.core.ui.script.StaticConfigurableScriptBinding"
                       config="/WEB-INF/param/scripts.xml">
            </extension>
        </extensions>
    </feature>
    
    <feature name="scheduled-tasks">
        <extensions>
            <extension point="org.ametys.core.right.RightsExtensionPoint"
                       id="core.schedule.rights.handle">
                <right id="CORE_Rights_TaskScheduler">
                    <label>PLUGINS_CORE_RIGHTS_TASK_HANDLE_LABEL</label>
                    <description>PLUGINS_CORE_RIGHTS_TASK_HANDLE_DESCRIPTION</description>
                    <category>plugin.admin:PLUGINS_ADMIN_RIGHTS_ADMIN_CATEGORY</category>
                </right>
            </extension>
            
            <extension id="task"
                       point="org.ametys.core.ui.MessageTargetFactoriesManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.plugins.coreui.schedule.TaskMessageTargetFactory"/>
                <scripts>
                    <file>js/Ametys/plugins/coreui/schedule/TaskMessageTargetFactory.js</file>
                    <file>js/Ametys/plugins/coreui/schedule/Task.js</file>
                </scripts>
            </extension>
            
            <extension id="org.ametys.core.schedule.Scheduler"
                       point="org.ametys.core.ui.StaticFileImportsManager"
                       class="org.ametys.core.ui.StaticFileImportsClientSideElement">
                <scripts>
                    <file plugin="core">js/Ametys/plugins/core/schedule/Scheduler.js</file>
                </scripts>
                <depends>
                    <org.ametys.core.ui.MessageTargetFactoriesManager>task</org.ametys.core.ui.MessageTargetFactoriesManager>
                </depends>
            </extension>
            
            <extension id="org.ametys.core.ui.schedule.Tasks"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.button.OpenToolButtonController">
                    <opentool-id>uitool-scheduled-tasks</opentool-id>
                    
                    <label i18n="true">PLUGINS_CORE_UI_TASKS_TOOL_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_TASKS_TOOL_DESCRIPTION</description>
                    
                    <icon-glyph>ametysicon-datetime</icon-glyph>
                </class>
                <right>CORE_Rights_TaskScheduler</right>
                <depends>
                    <org.ametys.core.ui.UIToolsFactoriesManager>uitool-scheduled-tasks</org.ametys.core.ui.UIToolsFactoriesManager>
                </depends>
            </extension>
            
            <extension id="uitool-scheduled-tasks"
                       point="org.ametys.core.ui.UIToolsFactoriesManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.tool.factory.UniqueToolFactory">
                    <toolClass>Ametys.plugins.coreui.schedule.ScheduledTasksTool</toolClass>
                    
                    <title i18n="true">PLUGINS_CORE_UI_TASKS_TOOL_LABEL</title>
                    <description i18n="true">PLUGINS_CORE_UI_TASKS_TOOL_DESCRIPTION</description>
                    
                    <icon-glyph>ametysicon-datetime</icon-glyph>
                    <default-location>cl</default-location>
                </class>
                <right>CORE_Rights_TaskScheduler</right>
                <scripts>
                    <file>js/Ametys/plugins/coreui/schedule/ScheduledTasksTool.js</file>
                </scripts>
                <css>
                    <file>css/Ametys/ui/tool/tasks.css</file>
                </css>
                <depends>
                    <org.ametys.core.ui.MessageTargetFactoriesManager>task</org.ametys.core.ui.MessageTargetFactoriesManager>
                </depends>
            </extension>
            
            <extension id="org.ametys.core.scheduled.tasks.TasksTab"
                       point="org.ametys.core.ui.RibbonTabsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.tab.TabController">
                    <tool-id>^uitool-scheduled-tasks$</tool-id>
                </class> 
            </extension>
            
            <extension id="org.ametys.core.ui.schedule.tasks.Add"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.coreui.schedule.TaskActions.addTask</action>
                    
                    <label i18n="true">PLUGINS_CORE_UI_TASKS_ADD_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_TASKS_ADD_DESCRIPTION</description>
                    
                    <icon-glyph>ametysicon-gear39</icon-glyph>
                    <icon-decorator>decorator-ametysicon-add64</icon-decorator>
                </class>
                <right>CORE_Rights_TaskScheduler</right>
                <scripts>
                    <file>js/Ametys/plugins/coreui/schedule/TaskActions.js</file>
                    <file>js/Ametys/plugins/coreui/schedule/EditTaskHelper.js</file>
                </scripts>
                <depends>
                    <org.ametys.core.ui.StaticFileImportsManager>org.ametys.core.schedule.Scheduler</org.ametys.core.ui.StaticFileImportsManager>
                </depends>
            </extension>
            
            <extension id="org.ametys.core.ui.schedule.tasks.Edit"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.coreui.schedule.TaskActions.editTask</action>
                    <selection-target-id>^task$</selection-target-id>
                    <selection-target-parameter>
                       <name>modifiable</name>
                       <value>true</value>
                    </selection-target-parameter>
                    <selection-description-nomatch i18n="true">PLUGINS_CORE_UI_TASKS_EDIT_NO_MODIFIABLE_DESCRIPTION</selection-description-nomatch>
                    <selection-enable-multiselection>false</selection-enable-multiselection>
                    
                    <label i18n="true">PLUGINS_CORE_UI_TASKS_EDIT_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_TASKS_EDIT_DESCRIPTION</description>
                    
                    <icon-glyph>ametysicon-gear39</icon-glyph>
                    <icon-decorator>decorator-ametysicon-edit45</icon-decorator>
                </class>
                <right>CORE_Rights_TaskScheduler</right>
                <scripts>
                    <file>js/Ametys/plugins/coreui/schedule/TaskActions.js</file>
                    <file>js/Ametys/plugins/coreui/schedule/EditTaskHelper.js</file>
                </scripts>
                <depends>
                    <org.ametys.core.ui.StaticFileImportsManager>org.ametys.core.schedule.Scheduler</org.ametys.core.ui.StaticFileImportsManager>
                </depends>
            </extension>
            
            <extension id="org.ametys.core.ui.schedule.tasks.Remove"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.coreui.schedule.TaskActions.removeTask</action>
                    <selection-target-id>^task$</selection-target-id>
                    <selection-target-parameter>
                       <name>removable</name>
                       <value>true</value>
                    </selection-target-parameter>
                    <selection-description-nomatch i18n="true">PLUGINS_CORE_UI_TASKS_REMOVE_NO_REMOVABLE_DESCRIPTION</selection-description-nomatch>
                    <selection-enable-multiselection>false</selection-enable-multiselection>
                    
                    <label i18n="true">PLUGINS_CORE_UI_TASKS_REMOVE_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_TASKS_REMOVE_DESCRIPTION</description>
                    
                    <icon-glyph>ametysicon-gear39</icon-glyph>
                    <icon-decorator>decorator-ametysicon-remove11</icon-decorator>
                </class>
                <right>CORE_Rights_TaskScheduler</right>
                <scripts>
                    <file>js/Ametys/plugins/coreui/schedule/TaskActions.js</file>
                </scripts>
                <depends>
                    <org.ametys.core.ui.StaticFileImportsManager>org.ametys.core.schedule.Scheduler</org.ametys.core.ui.StaticFileImportsManager>
                </depends>
            </extension>
            
            <extension id="org.ametys.core.ui.schedule.tasks.Enable"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.plugins.coreui.schedule.EnableTaskButtonController">
                    <action>Ametys.plugins.coreui.schedule.TaskActions.enableTask</action>
                    <selection-target-id>^task$</selection-target-id>
                    <selection-target-parameter>
                       <name>deactivatable</name>
                       <value>true</value>
                    </selection-target-parameter>
                    <selection-description-nomatch i18n="true">PLUGINS_CORE_UI_TASKS_ENABLE_NO_DEACTIVATABLE_LABEL</selection-description-nomatch>
                    <selection-enable-multiselection>false</selection-enable-multiselection>
                    
                    <label i18n="true">PLUGINS_CORE_UI_TASKS_ENABLE_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_TASKS_DISABLE_DESCRIPTION</description>
                    
                    <icon-glyph>ametysicon-gear39</icon-glyph>
                    <icon-decorator>decorator-ametysicon-checked34</icon-decorator>
                    <enabled-icon-decorator>decorator-ametysicon-checked34</enabled-icon-decorator>
                    <disabled-icon-decorator>decorator-ametysicon-forbidden1</disabled-icon-decorator>
                </class>
                <right>CORE_Rights_TaskScheduler</right>
                <scripts>
                    <file>js/Ametys/plugins/coreui/schedule/EnableTaskButtonController.js</file>
                    <file>js/Ametys/plugins/coreui/schedule/TaskActions.js</file>
                </scripts>
                <depends>
                    <org.ametys.core.ui.StaticFileImportsManager>org.ametys.core.schedule.Scheduler</org.ametys.core.ui.StaticFileImportsManager>
                </depends>
            </extension>
            
            <extension id="org.ametys.core.ui.schedule.tasks.RemoveCompletedTasks"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.coreui.schedule.TaskActions.removeCompletedTasks</action>
                    <tool-id>^uitool-scheduled-tasks$</tool-id>
                    
                    <label i18n="true">PLUGINS_CORE_UI_TASKS_REMOVE_COMPLETED_TASKS_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_TASKS_REMOVE_COMPLETED_TASKS_DESCRIPTION</description>
                    
                    <icon-glyph>ametysicon-eraser11</icon-glyph>
                </class>
                <right>CORE_Rights_TaskScheduler</right>
                <scripts>
                    <file>js/Ametys/plugins/coreui/schedule/TaskActions.js</file>
                </scripts>
                <depends>
                    <org.ametys.core.ui.UIToolsFactoriesManager>uitool-scheduled-tasks</org.ametys.core.ui.UIToolsFactoriesManager>
                </depends>
            </extension>
            
            <extension id="org.ametys.core.ui.schedule.tasks.Refresh"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.coreui.schedule.TaskActions.refreshTool</action>
                    <tool-id>^uitool-scheduled-tasks$</tool-id>
                    
                    <label i18n="true">PLUGINS_CORE_UI_TASKS_REFRESH_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_TASKS_REFRESH_DESCRIPTION</description>
                    
                    <icon-glyph>ametysicon-arrow123</icon-glyph>
                </class>
                <right>CORE_Rights_TaskScheduler</right>
                <scripts>
                    <file>js/Ametys/plugins/coreui/schedule/TaskActions.js</file>
                </scripts>
                <depends>
                    <org.ametys.core.ui.UIToolsFactoriesManager>uitool-scheduled-tasks</org.ametys.core.ui.UIToolsFactoriesManager>
                </depends>
            </extension>
        </extensions>
    </feature>
    
    <feature name="core.ui.profiles.affect">
        <extensions>
            <extension id="org.ametys.core.ui.profile.Assign"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.button.OpenToolButtonController">
                    <opentool-id>uitool-profile-assignment</opentool-id>
                    
                    <label i18n="true">PLUGINS_CORE_UI_TOOL_PROFILE_ASSIGNMENTS_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_TOOL_PROFILE_ASSIGNMENTS_DESCRIPTION</description>
                    
                    <icon-glyph>ametysicon-id16</icon-glyph>
                    <icon-decorator>decorator-ametysicon-edit45</icon-decorator>
                </class>
                <depends>
                    <org.ametys.core.ui.UIToolsFactoriesManager>uitool-profile-assignment</org.ametys.core.ui.UIToolsFactoriesManager>
                </depends>
                <right context-prefix="/contributor">Runtime_Rights_Rights_Handle</right>
            </extension>
            
            <extension id="uitool-profile-assignment"
                       point="org.ametys.core.ui.UIToolsFactoriesManager"
                       class="org.ametys.core.ui.right.ProfileAssignmentsToolClientSideElement">
                <class name="Ametys.plugins.coreui.profiles.ProfileAssignmentsToolFactory">
                    <toolClass>Ametys.plugins.coreui.profiles.ProfileAssignmentsTool</toolClass>
                    
                    <title i18n="true">PLUGINS_CORE_UI_TOOL_PROFILE_ASSIGNMENTS_LABEL</title>
                    <description i18n="true">PLUGINS_CORE_UI_TOOL_PROFILE_ASSIGNMENTS_DESCRIPTION</description>
                    
                    <icon-glyph>ametysicon-id16</icon-glyph>
                    <icon-decorator>decorator-ametysicon-edit45</icon-decorator>
                    <default-location>cl</default-location>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/coreui/profiles/ProfileAssignmentsToolFactory.js</file>
                    <file>js/Ametys/plugins/coreui/profiles/ProfileAssignmentsTool.js</file>
                    <file>js/Ametys/plugins/coreui/profiles/ProfileAssignmentsTool/AssignmentHelper.js</file>
                    <file>js/Ametys/plugins/coreui/profiles/AbstractRightAssignmentContext.js</file>
                </scripts>
                <css>
                    <file>css/Ametys/profiles/profile-assignments.css</file>
                </css>
                <right context-prefix="/contributor">Runtime_Rights_Rights_Handle</right>
            </extension>
            
            <extension id="org.ametys.core.ui.profile.assignments.Tab"
                       point="org.ametys.core.ui.RibbonTabsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.tab.TabController">
                    <selection-target-id>^profileContext$</selection-target-id>
                </class>
                <right context-prefix="/contributor">Runtime_Rights_Rights_Handle</right>
            </extension>
            
            <extension id="org.ametys.core.ui.profile.assignments.AddUsers"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
            <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.coreui.profiles.ProfileAssignmentsActions.addUsers</action>
                    <selection-target-id>^profileContext$</selection-target-id>
                    <selection-target-parameter>
                        <name>modifiable</name>
                        <value>true</value>
                    </selection-target-parameter>
                    <tool-id>^(uitool-profile-assignment.*)$</tool-id>
                    
                    <label i18n="true">PLUGINS_CORE_UI_TOOL_PROFILE_ASSIGNMENTS_ADD_USERS_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_TOOL_PROFILE_ASSIGNMENTS_ADD_USERS_DESCRIPTION</description>
                    
                    <icon-glyph>ametysicon-black302</icon-glyph>
                    <icon-decorator>decorator-ametysicon-add64</icon-decorator>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/coreui/profiles/ProfileAssignmentsActions.js</file>
                </scripts>
                <depends>
                    <org.ametys.core.ui.UIToolsFactoriesManager>uitool-profile-assignment</org.ametys.core.ui.UIToolsFactoriesManager>
                </depends>
                <right context-prefix="/contributor">Runtime_Rights_Rights_Handle</right>
            </extension>
            
            <extension id="org.ametys.core.ui.profile.assignments.AddGroups"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
            <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.coreui.profiles.ProfileAssignmentsActions.addGroups</action>
                    <selection-target-id>^profileContext$</selection-target-id>
                    <selection-target-parameter>
                        <name>modifiable</name>
                        <value>true</value>
                    </selection-target-parameter>
                    <tool-id>^(uitool-profile-assignment.*)$</tool-id>
                    
                    <label i18n="true">PLUGINS_CORE_UI_TOOL_PROFILE_ASSIGNMENTS_ADD_GROUPS_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_TOOL_PROFILE_ASSIGNMENTS_ADD_GROUPS_DESCRIPTION</description>
                    
                    <icon-glyph>ametysicon-multiple25</icon-glyph>
                    <icon-decorator>decorator-ametysicon-add64</icon-decorator>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/coreui/profiles/ProfileAssignmentsActions.js</file>
                </scripts>
                <depends>
                    <org.ametys.core.ui.UIToolsFactoriesManager>uitool-profile-assignment</org.ametys.core.ui.UIToolsFactoriesManager>
                </depends>
                <right context-prefix="/contributor">Runtime_Rights_Rights_Handle</right>
            </extension>
            
            <extension id="org.ametys.core.ui.profile.assignments.Remove"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
            <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.coreui.profiles.ProfileAssignmentsActions.removeAssignments</action>
                    <selection-target-id>^profileAssignment$</selection-target-id>
                    <selection-target-parameter>
                       <name>removable</name>
                       <value>true</value>
                    </selection-target-parameter>
                    <selection-description-nomatch i18n="true">PLUGINS_CORE_UI_TOOL_PROFILE_ASSIGNMENTS_REMOVE_NO_REMOVABLE_DESCRIPTION</selection-description-nomatch>
                    <selection-enable-multiselection>true</selection-enable-multiselection>
                    <tool-id>^(uitool-profile-assignment.*)$</tool-id>
                    
                    <label i18n="true">PLUGINS_CORE_UI_TOOL_PROFILE_ASSIGNMENTS_REMOVE_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_TOOL_PROFILE_ASSIGNMENTS_REMOVE_DESCRIPTION</description>
                    
                    <icon-glyph>ametysicon-id16</icon-glyph>
                    <icon-decorator>decorator-ametysicon-remove11</icon-decorator>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/coreui/profiles/ProfileAssignmentsActions.js</file>
                </scripts>
                <depends>
                    <org.ametys.core.ui.UIToolsFactoriesManager>uitool-profile-assignment</org.ametys.core.ui.UIToolsFactoriesManager>
                </depends>
                <right context-prefix="/contributor">Runtime_Rights_Rights_Handle</right>
            </extension>
            
            <extension id="org.ametys.core.ui.profile.assignments.Save"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
            	<class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.coreui.profiles.ProfileAssignmentsActions.save</action>
                    
                    <label i18n="true">PLUGINS_CORE_UI_TOOL_PROFILE_ASSIGNMENTS_SAVE_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_TOOL_PROFILE_ASSIGNMENTS_SAVE_DESCRIPTION</description>
                    
                    <tool-id>^(uitool-profile-assignment.*)$</tool-id>
                    <tool-enable-on-dirty-state>true</tool-enable-on-dirty-state>
                    <tool-dirty-state-description-nomatch i18n="true">PLUGINS_CORE_UI_TOOL_PROFILE_ASSIGNMENTS_NO_CHANGE</tool-dirty-state-description-nomatch>
                    <icon-glyph>ametysicon-save31</icon-glyph>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/coreui/profiles/ProfileAssignmentsActions.js</file>
                </scripts>
                <depends>
                    <org.ametys.core.ui.UIToolsFactoriesManager>uitool-profile-assignment</org.ametys.core.ui.UIToolsFactoriesManager>
                </depends>
                <right context-prefix="/contributor">Runtime_Rights_Rights_Handle</right>
            </extension>
            
            <extension id="org.ametys.core.ui.profile.assignments.Cancel"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
            	<class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.coreui.profiles.ProfileAssignmentsActions.cancel</action>
                    
                    <label i18n="true">PLUGINS_CORE_UI_TOOL_PROFILE_ASSIGNMENTS_CANCEL_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_UI_TOOL_PROFILE_ASSIGNMENTS_CANCEL_DESCRIPTION</description>
                    
                    <tool-id>^(uitool-profile-assignment.*)$</tool-id>
                    <tool-enable-on-dirty-state>true</tool-enable-on-dirty-state>
                    <tool-dirty-state-description-nomatch i18n="true">PLUGINS_CORE_UI_TOOL_PROFILE_ASSIGNMENTS_NO_CHANGE</tool-dirty-state-description-nomatch>
                    
                    <icon-glyph>ametysicon-save31</icon-glyph>
                    <icon-decorator>decorator-ametysicon-remove11</icon-decorator>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/coreui/profiles/ProfileAssignmentsActions.js</file>
                </scripts>
                <depends>
                    <org.ametys.core.ui.UIToolsFactoriesManager>uitool-profile-assignment</org.ametys.core.ui.UIToolsFactoriesManager>
                </depends>
                <right context-prefix="/contributor">Runtime_Rights_Rights_Handle</right>
            </extension>
        </extensions>
    </feature>
    
    <feature name="plugin.core.ui.ribbon.manager" safe="true">
        <components>
            <component id="org.ametys.core.ui.RibbonManagerCache"
                       role="org.ametys.core.ui.RibbonManagerCache" 
                       class="org.ametys.core.ui.RibbonManagerCache"
                       logger="org.ametys.core.ui.RibbonManagerCache" />
        </components>
    </feature>

    <feature name="plugin.core.ui.ribbon.imports.safe" safe="true">
        <extensions>
            <extension id="org.ametys.core.ui.ribbon.SafeImports"
                           point="org.ametys.core.ui.RibbonImportManager"
                           class="org.ametys.core.ui.StaticRibbonImportManager">
                <workspace>
                    <file>ribbon/default-safe-ribbon.xml</file>
                    <file>ribbon/cms-ribbon-developer.xml</file>
                </workspace>
           </extension>
       </extensions>
    </feature>
    
    <feature name="plugin.core.ui.ribbon.imports">
        <extensions>
            <extension id="org.ametys.core.ui.ribbon.Imports"
                           point="org.ametys.core.ui.RibbonImportManager"
                           class="org.ametys.core.ui.StaticRibbonImportManager">
                <workspace>
                    <file>ribbon/default-ribbon.xml</file>
                    <file>ribbon/cms-ribbon-rights.xml</file>
                </workspace>

                <workspace match="admin">
                    <file>ribbon/admin-ribbon.xml</file>
                </workspace>

                <workspace match="admin|repository">
                    <file>ribbon/script-tool-ribbon.xml</file>
                </workspace>
           </extension>
       </extensions>
    </feature>
</plugin>
