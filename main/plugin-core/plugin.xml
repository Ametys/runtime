<?xml version="1.0" encoding="UTF-8"?>
<!--
   Copyright 2014 Anyware Services

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
   -->
<plugin xmlns="http://www.ametys.org/schema/plugin"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.ametys.org/schema/plugin http://www.ametys.org/schema/plugin-2.0.xsd"
        runtimeVersion="2.0" version="2.0">
	<!--
		This is the mandatory plugin included in runtime that comes with :
		<ul>
			<li>mandatory extensions points (users...),</li>
			<li>default implementations,</li>
			<li>screens for the administrator area,</li>
			<li>helpers,</li>
			<li>main database pool,</li>
			<li>...</li>
		</ul>
	 -->

    <config>
        <!-- +
             | CORE DEBUG
             + -->
        <!-- Debug parameters -->
        <param id="runtime.debug.ui" type="long">
            <!-- 
                This parameter allows to load UI in debug mode (i.e. load CSS/JS not minified)
             -->
            <label i18n="true">PLUGINS_CORE_DEBUG_UI_LABEL</label>
            <description i18n="true">PLUGINS_CORE_DEBUG_UI_DESCRIPTION</description>
            <enumeration>
                <entry>
                    <label i18n="true">PLUGINS_CORE_DEBUG_UI_VAL_0</label>
                    <value>0</value>
                </entry>
                <entry>
                    <label i18n="true">PLUGINS_CORE_DEBUG_UI_VAL_1</label>
                    <value>1</value>
                </entry>
                <entry>
                    <label i18n="true">PLUGINS_CORE_DEBUG_UI_VAL_2</label>
                    <value>2</value>
                </entry>
            </enumeration>
            <validation>
                <mandatory/>
            </validation>
            <default-value>0</default-value>
            <category i18n="true">PLUGINS_CORE_SYSTEM_CONFIG_CATEGORY</category>
            <group i18n="true">PLUGINS_CORE_DEBUG_GROUP</group>
            <order>20</order>
        </param>
        <param id="runtime.skip-browser-compatibility-test" type="boolean">
            <!-- 
                This parameter allows to skip the compatibility test (except if codely set to true or false)
             -->
            <label i18n="true">PLUGINS_CORE_SKIPBROWSERCOMPATIBILITYTEST_LABEL</label>
            <description i18n="true">PLUGINS_CORE_SKIPBROWSERCOMPATIBILITYTEST_DESCRIPTION</description>
            <validation>
                <mandatory/>
            </validation>
            <default-value>false</default-value>
            <category i18n="true">PLUGINS_CORE_SYSTEM_CONFIG_CATEGORY</category>
            <group i18n="true">PLUGINS_CORE_DEBUG_GROUP</group>
            <order>50</order>
        </param>        
        <param id="runtime.cache.xslt" type="boolean">
            <!-- 
                This parameter allows to deactivate XSLT cache
             -->
            <label i18n="true">PLUGINS_CORE_CACHE_XSLT_LABEL</label>
            <description i18n="true">PLUGINS_CORE_CACHE_XSLT_DESCRIPTION</description>
            <validation>
                <mandatory/>
            </validation>
            <default-value>false</default-value>
            <category i18n="true">PLUGINS_CORE_SYSTEM_CONFIG_CATEGORY</category>
            <group i18n="true">PLUGINS_CORE_DEBUG_GROUP</group>
            <order>20</order>
        </param>
        <param id="runtime.log.abnormal.time" type="boolean">
            <!-- 
                This parameter activates the trace of process taking an abnormal time in logs
             -->
            <label i18n="true">PLUGINS_CORE_TRACE_LOG_ABNORMAL_TIME_LABEL</label>
            <description i18n="true">PLUGINS_CORE_TRACE_LOG_ABNORMAL_TIME_DESCRIPTION</description>
            <validation>
                <mandatory/>
            </validation>
            <default-value>false</default-value>
            <category i18n="true">PLUGINS_CORE_SYSTEM_CONFIG_CATEGORY</category>
            <group i18n="true">PLUGINS_CORE_LOGGING_GROUP</group>
            <order>10</order>
        </param>

        <!-- +
             | CORE DATASOURCE
             + -->
        <!-- JDBC -->
        <param id="runtime.datasource.core.jdbc.driver" type="string">
            <!-- 
                This parameter contains the jdbc driver class to load to connect the core database pool.
             -->
            <label i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_DRIVER_LABEL</label>
            <description i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_DRIVER_DESCRIPTION</description>
            <validation>
                <mandatory/>
            </validation>
            <default-value>com.mysql.jdbc.Driver</default-value>
            <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_JDBC_CATEGORY_DATASOURCE</category>
            <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_JDBC_CATEGORY_DATASOURCE_GROUP_CORE</group>
            <order>10</order>
        </param>
        <param id="runtime.datasource.core.jdbc.url" type="string">
            <!-- 
                This parameter contains the jdbc url to connect the core database pool.
             -->
            <label i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_URL_LABEL</label>
            <description i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_URL_DESCRIPTION</description>
            <validation>
                <mandatory/>
            </validation>
            <default-value>jdbc:mysql://servername/basename</default-value>
            <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_JDBC_CATEGORY_DATASOURCE</category>
            <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_JDBC_CATEGORY_DATASOURCE_GROUP_CORE</group>
            <order>20</order>
        </param>
        <param id="runtime.datasource.core.jdbc.user" type="string">
            <!-- 
                This parameter contains the jdbc username to connect the core database pool.
                @see:plugin{config/runtime.datasource.core.jdbc.passwd}
             -->
            <label i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_USER_LABEL</label>
            <description i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_USER_DESCRIPTION</description>
            <default-value>username</default-value>
            <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_JDBC_CATEGORY_DATASOURCE</category>
            <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_JDBC_CATEGORY_DATASOURCE_GROUP_CORE</group>
            <order>30</order>
        </param>
        <param id="runtime.datasource.core.jdbc.passwd" type="password">
            <!-- 
                This parameter contains the jdbc password to connect the core database pool.
                @see:plugin{config/runtime.datasource.core.jdbc.user}
             -->
            <label i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_PASSWORD_LABEL</label>
            <description i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_PASSWORD_DESCRIPTION</description>
            <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_JDBC_CATEGORY_DATASOURCE</category>
            <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_JDBC_CATEGORY_DATASOURCE_GROUP_CORE</group>
            <order>40</order>
        </param>
        
        <!-- LDAP -->
        <param id="runtime.datasource.core.ldap.baseUrl" type="string">
            <!-- 
                This parameter contains the base url (protocol + server name + port) to connect to the core ldap connection.
             -->
            <label i18n="true">PLUGINS_CORE_DATASOURCE_CORE_LDAP_CONFIG_BASEURL_LABEL</label>
            <description i18n="true">PLUGINS_CORE_DATASOURCE_CORE_LDAP_CONFIG_BASEURL_DESCRIPTION</description>
            <validation>
                <mandatory/>
                <regexp>^ldaps?://[\w\-.]*(:\d+)?</regexp> 
                <invalidText i18n="true">PLUGINS_CORE_DATASOURCE_CORE_LDAP_CONFIG_BASEURL_INVALID</invalidText>
            </validation>
            <default-value>ldap://server:389</default-value>
            <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP</category>
            <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_LDAP_CONFIG_CATEGORY_LDAP_GROUP_CORE</group>
            <order>10</order>
        </param>
        <param id="runtime.datasource.core.ldap.useSSL" type="boolean">
            <!-- 
                This parameter determines if the connection to the ldap server is secured or not.<br/>
                Depending on the JVM, the use of 'ldaps' in the protocol is not supported.
             -->
            <label i18n="true">PLUGINS_CORE_DATASOURCE_CORE_LDAP_CONFIG_SSL_LABEL</label>
            <description i18n="true">PLUGINS_CORE_DATASOURCE_CORE_LDAP_CONFIG_SSL_DESCRIPTION</description>
            <validation>
                <mandatory/>
            </validation>
            <default-value>false</default-value>
            <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP</category>
            <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_LDAP_CONFIG_CATEGORY_LDAP_GROUP_CORE</group>
            <order>20</order>
        </param>
        <param id="runtime.datasource.core.ldap.baseDN" type="string">
            <!-- 
                This parameter contains the base of the DN to add to all search.
                <br/>May be empty if search have to be done in several branches.
             -->
            <label i18n="true">PLUGINS_CORE_DATASOURCE_CORE_LDAP_CONFIG_BASEDN_LABEL</label>
            <description i18n="true">PLUGINS_CORE_DATASOURCE_CORE_LDAP_CONFIG_BASEDN_DESCRIPTION</description>
            <default-value>dc=ametys,dc=org</default-value>
            <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP</category>
            <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_LDAP_CONFIG_CATEGORY_LDAP_GROUP_CORE</group>
            <order>30</order>
        </param>
        <param id="runtime.datasource.core.ldap.authMethod" type="string">
            <!-- 
                This parameter determines if the connection to LDAP can be anonymous.
                @see:plugin{config/runtime.datasource.core.ldap.adminDN}
                @see:plugin{config/runtime.datasource.core.ldap.adminPasswd}
             -->
            <label i18n="true">PLUGINS_CORE_DATASOURCE_CORE_LDAP_CONFIG_AUTH_METHOD_LABEL</label>
            <description i18n="true">PLUGINS_CORE_DATASOURCE_CORE_LDAP_CONFIG_AUTH_METHOD_DESCRIPTION</description>
            <enumeration>
            	<entry>
            		<label i18n="true">PLUGINS_CORE_DATASOURCE_CORE_LDAP_CONFIG_AUTH_METHOD_ENUM_NONE</label>
            		<value>none</value>
            	</entry>
            	<entry>
            		<label i18n="true">PLUGINS_CORE_DATASOURCE_CORE_LDAP_CONFIG_AUTH_METHOD_ENUM_SIMPLE</label>
            		<value>simple</value>
            	</entry>
            </enumeration>
            <validation>
                <mandatory/>
            </validation>
            <default-value>none</default-value>
            <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP</category>
            <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_LDAP_CONFIG_CATEGORY_LDAP_GROUP_CORE</group>
            <order>40</order>
        </param>
        <param id="runtime.datasource.core.ldap.adminDN" type="string">
            <!-- 
                If the authMethod is not anonymous, this parameter contains the DN of the user to use to connect to the LDAP.
                @see:plugin{config/runtime.datasource.core.ldap.authMethod}
                @see:plugin{config/runtime.datasource.core.ldap.adminPasswd}
             -->
            <label i18n="true">PLUGINS_CORE_DATASOURCE_CORE_LDAP_CONFIG_ADMINDN_LABEL</label>
            <description i18n="true">PLUGINS_CORE_DATASOURCE_CORE_LDAP_CONFIG_ADMINDN_DESCRIPTION</description>
            <validation>
                <mandatory/>
            </validation>
            <default-value>cn=admin</default-value>
            <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP</category>
            <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_LDAP_CONFIG_CATEGORY_LDAP_GROUP_CORE</group>
            <order>50</order>
            <disable-conditions>
                <condition id="runtime.datasource.core.ldap.authMethod" operator="eq">none</condition>
            </disable-conditions>
        </param>
        <param id="runtime.datasource.core.ldap.adminPasswd" type="password">
            <!-- 
                If the authMethod is not anonymous, this parameter contains the password of the user to use to connect to the LDAP.
                @see:plugin{config/runtime.datasource.core.ldap.authMethod}
                @see:plugin{config/runtime.datasource.core.ldap.adminDN}
             -->
            <label i18n="true">PLUGINS_CORE_DATASOURCE_CORE_LDAP_CONFIG_ADMINPASSWORD_LABEL</label>
            <description i18n="true">PLUGINS_CORE_DATASOURCE_CORE_LDAP_CONFIG_ADMINPASSWORD_DESCRIPTION</description>
            <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP</category>
            <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_LDAP_CONFIG_CATEGORY_LDAP_GROUP_CORE</group>
            <order>60</order>
            <disable-conditions>
                <condition id="runtime.datasource.core.ldap.authMethod" operator="eq">none</condition>
            </disable-conditions>
        </param>
        <param id="runtime.datasource.core.ldap.aliasDereferencing" type="string">
            <!-- 
                This parameter controls the alias dereferencing mode.
             -->
            <label i18n="true">PLUGINS_CORE_DATASOURCE_CORE_LDAP_CONFIG_ALIAS_DEREF_LABEL</label>
            <description i18n="true">PLUGINS_CORE_DATASOURCE_CORE_LDAP_CONFIG_ALIAS_DEREF_DESCRIPTION</description>
            <enumeration>
                <custom-enumerator class="org.ametys.runtime.plugins.core.util.ldap.AliasDerefEnumerator"/>
            </enumeration>
            <default-value>always</default-value>
            <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP</category>
            <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_LDAP_CONFIG_CATEGORY_LDAP_GROUP_CORE</group>
            <order>32</order>
        </param>
        <param id="runtime.datasource.core.ldap.followReferrals" type="boolean">
            <!-- 
                This parameters controls whether referral following is enabled (used for continuation references).
             -->
            <label i18n="true">PLUGINS_CORE_DATASOURCE_CORE_LDAP_CONFIG_FOLLOWREFERRALS_LABEL</label>
            <description i18n="true">PLUGINS_CORE_DATASOURCE_CORE_LDAP_CONFIG_FOLLOWREFERRALS_DESCRIPTION</description>
            <default-value>false</default-value>
            <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP</category>
            <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_LDAP_CONFIG_CATEGORY_LDAP_GROUP_CORE</group>
            <order>35</order>
        </param>
        
        
        <!-- +
             | UPLOAD
             + -->
        <param id="runtime.upload.max-size" type="long">
            <!-- 
                The max size of uploaded files.
             -->
            <label i18n="true">PLUGINS_CORE_UPLOAD_CONFIG_MAXSIZE_LABEL</label>
            <description i18n="true">PLUGINS_CORE_UPLOAD_CONFIG_MAXSIZE_DESCRIPTION</description>
            <validation>
                <mandatory/>
            </validation>        
            <default-value>10485760</default-value>
            <category i18n="true">PLUGINS_CORE_SYSTEM_CONFIG_CATEGORY</category>
            <group i18n="true">PLUGINS_CORE_UPLOAD_CONFIG_GROUP</group>
            <order>10</order>
        </param>
        <param id="runtime.upload.dir" type="string">
            <!-- 
                The destination directory for uploaded files.
             -->
            <label i18n="true">PLUGINS_CORE_UPLOAD_CONFIG_DIR_LABEL</label>
            <description i18n="true">PLUGINS_CORE_UPLOAD_CONFIG_DIR_DESCRIPTION</description>
            <validation>
                <mandatory/>
            </validation>        
            <default-value>WEB-INF/data/uploads</default-value>
            <category i18n="true">PLUGINS_CORE_SYSTEM_CONFIG_CATEGORY</category>
            <group i18n="true">PLUGINS_CORE_UPLOAD_CONFIG_GROUP</group>
            <order>20</order>
        </param>
        
        <!-- +
             | USERS
             + -->
        <param id="runtime.users.ldap.peopleDN" type="string">
            <!-- 
                When users are handled in the LDAP, this parameter contains the DN to append to the base DN to guide to users.
                @see:plugin{config/runtime.datasource.core.ldap.baseDN}
             -->
            <label i18n="true">PLUGINS_CORE_USERS_LDAPUSER_CONFIG_PEOPLEDN_LABEL</label>
            <description i18n="true">PLUGINS_CORE_USERS_LDAPUSER_CONFIG_PEOPLEDN_DESCRIPTION</description>
            <default-value>ou=people</default-value>
            <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP</category>
            <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP_GROUP_USERS</group>
            <order>10</order>
        </param>
        <param id="runtime.users.ldap.baseFilter" type="string">
            <!-- 
                When users are handled in the LDAP, this parameter contains the filter to find users objects in the current DN.
             -->
            <label i18n="true">PLUGINS_CORE_USERS_LDAPUSER_CONFIG_BASEFILTER_LABEL</label>
            <description i18n="true">PLUGINS_CORE_USERS_LDAPUSER_CONFIG_BASEFILTER_DESCRIPTION</description>
            <validation>
                <mandatory/>
                <regexp>\s*\(.*\)\s*</regexp>
            </validation>        
            <default-value>(objectclass=*)</default-value>
            <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP</category>
            <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP_GROUP_USERS</group>
            <order>20</order>
        </param>
        <param id="runtime.users.ldap.scope" type="string">
            <!-- 
                When users are handled in the LDAP, this parameter determine where to look for users objects in the current DN.
                <ul>
                    <li>In the current DN only (object)</li>
                    <li>In the sub branch of current DN only (one)</li>
                    <li>In the current DN and all sub branches (sub) - low perf</li>
                </ul>
             -->
            <label i18n="true">PLUGINS_CORE_USERS_LDAPUSER_CONFIG_SEARCH_SCOPE_LABEL</label>
            <description i18n="true">PLUGINS_CORE_USERS_LDAPUSER_CONFIG_SEARCH_SCOPE_DESCRIPTION</description>
            <enumeration>
            	<custom-enumerator class="org.ametys.runtime.plugins.core.util.ldap.ScopeEnumerator"/>
            </enumeration>
            <validation>
                <mandatory/>
            </validation>
            <default-value>one</default-value>
            <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP</category>
            <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP_GROUP_USERS</group>
            <order>30</order>
        </param>
        <param id="runtime.users.ldap.loginAttr" type="string">
            <!-- 
                When users are handled in the LDAP, this parameter contains the name of the attribute on users objects handling the login
             -->
            <label i18n="true">PLUGINS_CORE_USERS_LDAPUSER_CONFIG_ATTR_LOGIN_LABEL</label>
            <description i18n="true">PLUGINS_CORE_USERS_LDAPUSER_CONFIG_ATTR_LOGIN_DESCRIPTION</description>
            <validation>
                <mandatory/>
            </validation>
            <default-value>uid</default-value>
            <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP</category>
            <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP_GROUP_USERS</group>
            <order>40</order>
        </param>
        <param id="runtime.users.ldap.firstnameAttr" type="string">
            <!-- 
                When users are handled in the LDAP, this parameter contains the name of the attribute on users objects handling the firstname
             -->
            <label i18n="true">PLUGINS_CORE_USERS_LDAPUSER_CONFIG_ATTR_FIRSTNAME_LABEL</label>
            <description i18n="true">PLUGINS_CORE_USERS_LDAPUSER_CONFIG_ATTR_FIRSTNAME_DESCRIPTION</description>
            <default-value>givenName</default-value>
            <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP</category>
            <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP_GROUP_USERS</group>
            <order>50</order>
        </param>
        <param id="runtime.users.ldap.lastnameAttr" type="string">
            <!-- 
                When users are handled in the LDAP, this parameter contains the name of the attribute on users objects handling the lastname
             -->
            <label i18n="true">PLUGINS_CORE_USERS_LDAPUSER_CONFIG_ATTR_LASTNAME_LABEL</label>
            <description i18n="true">PLUGINS_CORE_USERS_LDAPUSER_CONFIG_ATTR_LASTNAME_DESCRIPTION</description>
            <validation>
                <mandatory/>
            </validation>
            <default-value>sn</default-value>
            <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP</category>
            <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP_GROUP_USERS</group>
            <order>60</order>
        </param>
        <param id="runtime.users.ldap.emailAttr" type="string">
            <!-- 
                When users are handled in the LDAP, this parameter contains the name of the attribute on users objects handling the email
             -->
            <label i18n="true">PLUGINS_CORE_USERS_LDAPUSER_CONFIG_ATTR_EMAIL_LABEL</label>
            <description i18n="true">PLUGINS_CORE_USERS_LDAPUSER_CONFIG_ATTR_EMAIL_DESCRIPTION</description>
            <validation>
                <mandatory/>
            </validation>
            <default-value>mail</default-value>
            <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP</category>
            <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP_GROUP_USERS</group>
            <order>70</order>
        </param>
        <param id="runtime.users.ldap.serverSideSorting" type="boolean">
            <!-- 
                Parameter used to control if server-side sorting of user search results is enabled.
             -->
            <label i18n="true">PLUGINS_CORE_USERS_LDAPUSER_CONFIG_SERVER_SIDE_SORTING_LABEL</label>
            <description i18n="true">PLUGINS_CORE_USERS_LDAPUSER_CONFIG_SERVER_SIDE_SORTING_DESCRIPTION</description>
            <default-value>true</default-value>
            <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP</category>
            <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP_GROUP_USERS</group>
            <order>80</order>
        </param>
        
        <!-- +
             | GROUPS
             + -->
         
        <!-- LDAP -->
        <param id="runtime.groups.ldap.groupDN" type="string">
            <!-- 
                When groups are handled in the LDAP, this parameter the DN to append to the base DN to guide to groups.
                @see:plugin{config/runtime.datasource.core.ldap.baseDN}
             -->
            <label i18n="true">PLUGINS_CORE_GROUPS_LDAPGROUP_CONFIG_GROUPDN_LABEL</label>
            <description i18n="true">PLUGINS_CORE_GROUPS_LDAPGROUP_CONFIG_GROUPDN_DESCRIPTION</description>
            <default-value>ou=groups</default-value>
            <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP</category>
            <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP_GROUP_GROUPS</group>
            <order>10</order>
        </param>
        <param id="runtime.groups.ldap.filter" type="string">
            <!-- 
                When groups are handled in the LDAP, this parameter contains the filter to find groups objects in the current DN.
             -->
            <label i18n="true">PLUGINS_CORE_GROUPS_LDAPGROUP_CONFIG_FILTER_LABEL</label>
            <description i18n="true">PLUGINS_CORE_GROUPS_LDAPGROUP_CONFIG_FILTER_DESCRIPTION</description>
            <validation>
                <mandatory/>
                <regexp>\s*\(.*\)\s*</regexp>
            </validation>
            <default-value>(objectclass=groupOfNames)</default-value>
            <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP</category>
            <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP_GROUP_GROUPS</group>
            <order>20</order>
        </param>
        <param id="runtime.groups.ldap.scope" type="string">
            <!-- 
                When groups are handled in the LDAP, this parameter determine where to look for groups objects in the current DN.
                <ul>
                    <li>In the current DN only (object)</li>
                    <li>In the sub branch of current DN only (one)</li>
                    <li>In the current DN and all sub branches (sub) - low perf</li>
                </ul>
             -->
            <label i18n="true">PLUGINS_CORE_GROUPS_LDAPGROUP_CONFIG_SEARCH_SCOPE_LABEL</label>
            <description i18n="true">PLUGINS_CORE_GROUPS_LDAPGROUP_CONFIG_SEARCH_SCOPE_DESCRIPTION</description>
            <enumeration>
            	<custom-enumerator class="org.ametys.runtime.plugins.core.util.ldap.ScopeEnumerator"/>
            </enumeration>
            <validation>
                <mandatory/>
            </validation>
            <default-value>one</default-value>
            <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP</category>
            <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP_GROUP_GROUPS</group>
            <order>30</order>
        </param>        
        <param id="runtime.groups.ldap.id" type="string">
            <!-- 
                When groups are handled in the LDAP, this parameter contains the name of the attribute on groups objects handling the identifier
             -->
            <label i18n="true">PLUGINS_CORE_GROUPS_LDAPGROUP_CONFIG_ID_LABEL</label>
            <description i18n="true">PLUGINS_CORE_GROUPS_LDAPGROUP_CONFIG_ID_DESCRIPTION</description>
            <validation>
                <mandatory/>
            </validation>
            <default-value>cn</default-value>
            <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP</category>
            <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP_GROUP_GROUPS</group>
            <order>40</order>
        </param>
        <param id="runtime.groups.ldap.description" type="string">
            <!-- 
                When groups are handled in the LDAP, this parameter contains the name of the attribute on groups objects handling the description (or readable name)
             -->
            <label i18n="true">PLUGINS_CORE_GROUPS_LDAPGROUP_CONFIG_DESCRIPTION_LABEL</label>
            <description i18n="true">PLUGINS_CORE_GROUPS_LDAPGROUP_CONFIG_DESCRIPTION_DESCRIPTION</description>
            <validation>
                <mandatory/>
            </validation>
            <default-value>description</default-value>
            <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP</category>
            <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP_GROUP_GROUPS</group>
            <order>50</order>
        </param>
        <param id="runtime.groups.ldap.member" type="string">
            <!-- 
                When groups are handled in the LDAP, this parameter contains the name of the attribute on groups objects handling the assocation with users.<br/>
                This attribute is multiple and will contain the login of users.<br/>
                A user can be part of several groups.
                @see:plugin{config/runtime.users.ldap.peopleDN}
                @see:plugin{config/runtime.users.ldap.loginAttr}
             -->
            <label i18n="true">PLUGINS_CORE_GROUPS_LDAPGROUP_CONFIG_MEMBER_LABEL</label>
            <description i18n="true">PLUGINS_CORE_GROUPS_LDAPGROUP_CONFIG_MEMBER_DESCRIPTION</description>
            <validation>
                <mandatory/>
            </validation>
            <default-value>member</default-value>
            <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP</category>
            <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP_GROUP_GROUPS</group>
            <order>60</order>
        </param>
        <param id="runtime.groups.ldap.memberof" type="string">
            <!-- 
                When groups are handled in the LDAP, this parameter contains the name of the attribute on users objects (implying users to be handled in LDAP also) 
                handling the reverse association to the groups.
                If this attribute is multiple a user can be part of several groups.
                @see:plugin{config/runtime.users.ldap.peopleDN}
                @see:plugin{config/runtime.users.ldap.baseFilter}
                @see:plugin{config/runtime.users.ldap.scope}
                @see:plugin{config/runtime.users.ldap.loginAttr}
             -->
            <label i18n="true">PLUGINS_CORE_GROUPS_LDAPGROUP_CONFIG_MEMBEROF_LABEL</label>
            <description i18n="true">PLUGINS_CORE_GROUPS_LDAPGROUP_CONFIG_MEMBEROF_DESCRIPTION</description>
            <validation>
                <mandatory/>
            </validation>
            <default-value>memberof</default-value>
            <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP</category>
            <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP_GROUP_USERS</group>
            <order>80</order>
        </param>
        
        <!-- +
             | AUTHENTICATION
             + -->
             
        <!-- BASIC -->
        <param id="runtime.authentication.basic.realm" type="string">
            <!-- 
                This parameter contains the realm name for basic authentication purposes
             -->
            <label i18n="true">PLUGINS_CORE_AUTHENTICATION_BASIC_CONFIG_REALM_LABEL</label>
            <description i18n="true">PLUGINS_CORE_AUTHENTICATION_BASIC_CONFIG_REALM_DESCRIPTION</description>
            <validation>
                <mandatory/>
            </validation>
            <default-value>Application domain name</default-value>
            <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_AUTHENTICATION</category>
            <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_AUTHENTICATION_GROUP_BASIC</group>
            <order>10</order>
        </param>
        
        <!-- REMOTE -->
        <param id="runtime.authentication.remote.realm" type="string">
            <!-- 
                This parameter contains the realm name for remote authentication purposes
             -->
            <label i18n="true">PLUGINS_CORE_AUTHENTICATION_REMOTE_CONFIG_REALM_LABEL</label>
            <description i18n="true">PLUGINS_CORE_AUTHENTICATION_REMOTE_CONFIG_REALM_DESCRIPTION</description>
            <validation>
                <mandatory/>
            </validation>
            <default-value>Remote domain name</default-value>
            <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_AUTHENTICATION</category>
            <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_AUTHENTICATION_GROUP_REMOTE</group>
            <order>10</order>
        </param>
        
        <!-- JCIFS -->
        <param id="runtime.authentication.jcifs.production" type="boolean">
            <!-- 
                This parameter parametrize the JCIFs client in production mode or not determining which other parameters to take in account.
             -->
            <label i18n="true">PLUGINS_CORE_AUTHENTICATION_JCIFS_CONFIG_PRODUCTION_LABEL</label>
            <description i18n="true">PLUGINS_CORE_AUTHENTICATION_JCIFS_CONFIG_PRODUCTION_DESCRIPTION</description>
            <validation>
                <mandatory/>
            </validation>
            <default-value>false</default-value>
            <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_AUTHENTICATION</category>
            <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_AUTHENTICATION_GROUP_JCIFS</group>
            <order>10</order>
        </param>
        <param id="runtime.authentication.jcifs.clientDomain" type="string">
            <!-- 
                This parameter contains the clien domain name.
             -->
            <label i18n="true">PLUGINS_CORE_AUTHENTICATION_JCIFS_CONFIG_CLIENTDOMAIN_LABEL</label>
            <description i18n="true">PLUGINS_CORE_AUTHENTICATION_JCIFS_CONFIG_CLIENTDOMAIN_DESCRIPTION</description>
            <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_AUTHENTICATION</category>
            <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_AUTHENTICATION_GROUP_JCIFS</group>
            <order>20</order>
        </param>
        <param id="runtime.authentication.jcifs.netBios" type="string">
            <!-- 
                This parameter contains the ip of the net bios server
             -->
            <label i18n="true">PLUGINS_CORE_AUTHENTICATION_JCIFS_CONFIG_NETBIOS_LABEL</label>
            <description i18n="true">PLUGINS_CORE_AUTHENTICATION_JCIFS_CONFIG_NETBIOS_DESCRIPTION</description>
            <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_AUTHENTICATION</category>
            <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_AUTHENTICATION_GROUP_JCIFS</group>
            <order>30</order>
        </param>
        <param id="runtime.authentication.jcifs.domainController" type="string">
            <!-- 
                This parameter contains the ip of the domain controller
             -->
            <label i18n="true">PLUGINS_CORE_AUTHENTICATION_JCIFS_CONFIG_DOMAINCONTROLLER_LABEL</label>
            <description i18n="true">PLUGINS_CORE_AUTHENTICATION_JCIFS_CONFIG_DOMAINCONTROLLER_DESCRIPTION</description>
            <default-value></default-value>
            <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_AUTHENTICATION</category>
            <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_AUTHENTICATION_GROUP_JCIFS</group>
            <order>40</order>
        </param>
        
        <!-- CAS -->
        <param id="runtime.authentication.cas.serverUrl" type="string">
            <!-- 
                This parameter contains the url to reach the CAS server
             -->
            <label i18n="true">PLUGINS_CORE_AUTHENTICATION_CAS_CONFIG_URL_LABEL</label>
            <description i18n="true">PLUGINS_CORE_AUTHENTICATION_CAS_CONFIG_URL_DESCRIPTION</description>
            <validation>
                <mandatory/>
                <regexp>^https?://.*$</regexp>
                <invalidText i18n="true">PLUGINS_CORE_REGEXP_INVALID_URL</invalidText>
            </validation>
            <default-value>https://servername</default-value>
            <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_AUTHENTICATION</category>
            <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_AUTHENTICATION_GROUP_CAS</group>
            <order>10</order>
        </param>
        <param id="runtime.authentication.cas.authorizedProxyChain" type="string">
            <!-- 
                This parameter contains the authorized proxy chain for CAS
             -->
            <label i18n="true">PLUGINS_CORE_AUTHENTICATION_CAS_CONFIG_AUTHORIZEDPROXY_LABEL</label>
            <description i18n="true">PLUGINS_CORE_AUTHENTICATION_CAS_CONFIG_AUTHORIZEDPROXY_DESCRIPTION</description>
            <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_AUTHENTICATION</category>
            <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_AUTHENTICATION_GROUP_CAS</group>
            <order>20</order>
        </param>
        
        <!-- FORM -->
    	<param id="runtime.authentication.form.security.level" type="string">
			<!-- This parameter defines the security level of the login. -->
            <label i18n="true">PLUGINS_CORE_SECURITY_CONFIG_LEVEL_LABEL</label>
            <description i18n="true">PLUGINS_CORE_SECURITY_CONFIG_LEVEL_DESCRIPTION</description>
            <enumeration>
            	<entry>
            		<label i18n="true">PLUGINS_CORE_SECURITY_CONFIG_LEVEL_LOW</label>
            		<value>low</value>
        		</entry>
            	<entry>
            		<label i18n="true">PLUGINS_CORE_SECURITY_CONFIG_LEVEL_HIGH</label>
        			<value>high</value>
            	</entry>
        	</enumeration>
        	<validation>
                <mandatory/>
            </validation>
            <default-value>low</default-value>
            <category i18n="true">PLUGINS_CORE_SECURITY_CONFIG_CATEGORY_LOGIN_FORM</category>
            <group i18n="true">PLUGINS_CORE_SECURITY_CONFIG_CATEGORY_LOGIN_FORM_GROUP</group>
            <order>1</order>
        </param>
        <!-- +
             | MAIL - ADDRESSES
             + -->
        <param type="string" id="smtp.mail.from">
            <!-- This parameter contains the "from" address used as default sender -->
            <label i18n="true">PLUGINS_CORE_MAIL_CONFIG_FROM_ADDRESS</label>
            <description i18n="true">PLUGINS_CORE_MAIL_CONFIG_FROM_ADDRESS_DESCRIPTION</description>
            <validation>
                <mandatory/>
                <regexp>^((\w+)([\-+.][\w]+)*@(\w[\-\w]*\.){1,5}([A-Za-z0-9][A-Za-z0-9]+))|([^&lt;]+&lt;(\w+)([\-+.][\w]+)*@(\w[\-\w]*\.){1,5}([A-Za-z0-9][A-Za-z0-9]+)&gt;)$</regexp>
                <invalidText i18n="true">PLUGINS_CORE_REGEXP_INVALID_MAIL</invalidText>
            </validation>
            <default-value>sender@ametys.org</default-value>
            <category i18n="true">PLUGINS_CORE_MAIL_CONFIG_CATEGORY</category>
            <group i18n="true">PLUGINS_CORE_MAIL_CONFIG_ADDRESS_GROUP</group>
            <order>1</order>
        </param>
        <param type="string" id="smtp.mail.sysadminto">
            <!-- This parameter contains the email address of the system administrator for alert purposes -->
            <label i18n="true">PLUGINS_CORE_MAIL_CONFIG_SYSADMINTO_ADDRESS</label>
            <description i18n="true">PLUGINS_CORE_MAIL_CONFIG_SYSADMINTO_ADDRESS_DESCRIPTION</description>
            <validation>
                <regexp>^(\w+)([\-+.][\w]+)*@(\w[\-\w]*\.){1,5}([A-Za-z0-9][A-Za-z0-9]+)$</regexp>
                <invalidText i18n="true">PLUGINS_CORE_REGEXP_INVALID_MAIL</invalidText>
            </validation>
            <category i18n="true">PLUGINS_CORE_MAIL_CONFIG_CATEGORY</category>
            <group i18n="true">PLUGINS_CORE_MAIL_CONFIG_ADDRESS_GROUP</group>
            <order>2</order>
        </param>
        
        <!-- +
             | MAIL - SERVER PARAMETERS
             + -->
        <param type="string" id="smtp.mail.host">
        	<!-- This parameter contains the server name for sending mail -->
            <label i18n="true">PLUGINS_CORE_MAIL_CONFIG_HOST</label>
            <description i18n="true">PLUGINS_CORE_MAIL_CONFIG_HOST_DESCRIPTION</description>
            <validation>
            	<mandatory/>
        	</validation>
            <category i18n="true">PLUGINS_CORE_MAIL_CONFIG_CATEGORY</category>
            <group i18n="true">PLUGINS_CORE_MAIL_CONFIG_GROUP</group>
            <order>1</order>
        </param>
        <param type="long" id="smtp.mail.port">
        	<!-- This parameter contains the server port for sending mail. Defaults to 25. -->
            <label i18n="true">PLUGINS_CORE_MAIL_CONFIG_PORT</label>
            <description i18n="true">PLUGINS_CORE_MAIL_CONFIG_PORT_DESCRIPTION</description>
            <default-value>25</default-value>
            <category i18n="true">PLUGINS_CORE_MAIL_CONFIG_CATEGORY</category>
            <group i18n="true">PLUGINS_CORE_MAIL_CONFIG_GROUP</group>
            <order>2</order>
        </param>
        <param type="string" id="smtp.mail.security.protocol">
            <!-- This parameter contains the security protocol to be used to send e-mails. Defaults to None. -->
            <label i18n="true">PLUGINS_CORE_MAIL_CONFIG_SECURITY_LABEL</label>
            <description i18n="true">PLUGINS_CORE_MAIL_CONFIG_SECURITY_DESCRIPTION</description>
            <enumeration>
                <entry>
                    <label i18n="true">PLUGINS_CORE_MAIL_CONFIG_SECURITY_NONE</label>
                    <value>none</value>
                </entry>
                <entry>
                    <label i18n="true">PLUGINS_CORE_MAIL_CONFIG_SECURITY_STARTTLS</label>
                    <value>starttls</value>
                </entry>
                <entry>
                    <label i18n="true">PLUGINS_CORE_MAIL_CONFIG_SECURITY_TLSSSL</label>
                    <value>tlsssl</value>
                </entry>
            </enumeration>
            <default-value>none</default-value>
            <category i18n="true">PLUGINS_CORE_MAIL_CONFIG_CATEGORY</category>
            <group i18n="true">PLUGINS_CORE_MAIL_CONFIG_GROUP</group>
            <order>3</order>
        </param>
        <param type="string" id="smtp.mail.user">
        	<!-- This parameter contains the user's login for sending mail -->
            <label i18n="true">PLUGINS_CORE_MAIL_CONFIG_USER</label>
            <description i18n="true">PLUGINS_CORE_MAIL_CONFIG_USER_DESCRIPTION</description>
            <category i18n="true">PLUGINS_CORE_MAIL_CONFIG_CATEGORY</category>
            <group i18n="true">PLUGINS_CORE_MAIL_CONFIG_GROUP</group>
            <order>4</order>
        </param>
        <param type="password" id="smtp.mail.password">
        	<!-- This parameter contains the user's password for sending mail -->
            <label i18n="true">PLUGINS_CORE_MAIL_CONFIG_PASSWORD</label>
            <description i18n="true">PLUGINS_CORE_MAIL_CONFIG_PASSWORD_DESCRIPTION</description>
            <category i18n="true">PLUGINS_CORE_MAIL_CONFIG_CATEGORY</category>
            <group i18n="true">PLUGINS_CORE_MAIL_CONFIG_GROUP</group>
            <order>5</order>
        </param>
        
        
        <param-checker id="ldap-connection-dn-checker" class="org.ametys.runtime.util.checkers.LDAPConnectionChecker">
            <label i18n="true">PLUGINS_CORE_LDAP_DN_CONNECTION_CHECKER_LABEL</label>
            <description i18n="true">PLUGINS_CORE_LDAP_DN_CONNECTION_CHECKER_DESC</description>
            <icon-small>img/administrator/config/check/test_ldapconnect_16.png</icon-small>
            <icon-medium>img/administrator/config/check/test_ldapconnect_32.png</icon-medium>
            <icon-large>img/administrator/config/check/test_ldapconnect_48.png</icon-large>
                        
            <ui-ref>
                <order>5</order>
                <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_CATEGORY_LDAP</category>
                <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_LDAP_CONFIG_CATEGORY_LDAP_GROUP_CORE</group>
            </ui-ref>
            
            <linked-params>
                <param-ref id="runtime.datasource.core.ldap.baseUrl"/>
                <param-ref id="runtime.datasource.core.ldap.useSSL"/>
                <param-ref id="runtime.datasource.core.ldap.baseDN"/>
                <param-ref id="runtime.datasource.core.ldap.authMethod"/>
                <param-ref id="runtime.datasource.core.ldap.adminDN"/>
                <param-ref id="runtime.datasource.core.ldap.adminPasswd"/>
                <param-ref id="runtime.datasource.core.ldap.followReferrals"/>
            </linked-params>
        </param-checker>
        
       <param-checker id="mail-connection-checker" class="org.ametys.runtime.util.checkers.MailConnectionChecker">
            <label i18n="true">PLUGINS_CORE_MAIL_CONNECTION_CHECKER_LABEL</label>
            <description i18n="true">PLUGINS_CORE_MAIL_CONNECTION_CHECKER_DESC</description>
            <icon-small>img/administrator/config/check/test_emailconnect_16.png</icon-small>
            <icon-medium>img/administrator/config/check/test_emailconnect_32.png</icon-medium>
            <icon-large>img/administrator/config/check/test_emailconnect_48.png</icon-large>
                        
            <ui-ref>
                <order>5</order>
                <category i18n="true">PLUGINS_CORE_MAIL_CONFIG_CATEGORY</category>
                <group i18n="true">PLUGINS_CORE_MAIL_CONFIG_GROUP</group>
            </ui-ref>
            
            <linked-params>
                <param-ref id="smtp.mail.host"/>
                <param-ref id="smtp.mail.port"/>
                <param-ref id="smtp.mail.security.protocol"/>
                <param-ref id="smtp.mail.user"/>
                <param-ref id="smtp.mail.password"/>
            </linked-params>
        </param-checker>
        
        <!--param-checker id="send-mail-checker" class="org.ametys.runtime.util.checkers.SendMailChecker">
            <label i18n="true">PLUGINS_CORE_SEND_MAIL_CHECKER_LABEL</label>
            <description i18n="true">PLUGINS_CORE_SEND_MAIL_CHECKER_DESC</description>
            <icon plugin="core">img/administrator/config/check/test_mailsend.png</icon>
                        
            <ui-ref>
                <order>1</order>
                <category i18n="true">PLUGINS_CORE_MAIL_CONFIG_CATEGORY</category>
            </ui-ref>
            
            <linked-params>
                <param-ref id="smtp.mail.host"/>
                <param-ref id="smtp.mail.port"/>
                <param-ref id="smtp.mail.security.protocol"/>
                <param-ref id="smtp.mail.user"/>
                <param-ref id="smtp.mail.password"/>
                <param-ref id="smtp.mail.from"/>
                <param-ref id="smtp.mail.sysadminto"/>
            </linked-params>
        </param-checker-->
    
        <param-checker id="sql-connection-checker" class="org.ametys.runtime.util.checkers.SqlConnectionChecker">
            <label i18n="true">PLUGINS_CORE_SQL_CONNECTION_CHECKER_LABEL</label>
            <description i18n="true">PLUGINS_CORE_SQL_CONNECTION_CHECKER_DESC</description>
            <icon-large>img/administrator/config/check/test_sqlconnect_48.png</icon-large>
            <icon-medium>img/administrator/config/check/test_sqlconnect_32.png</icon-medium>
            <icon-small>img/administrator/config/check/test_sqlconnect_16.png</icon-small>
                        
            <ui-ref>
                <order>1</order>
                <category i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_JDBC_CATEGORY_DATASOURCE</category>
               <!-- <group i18n="true">PLUGINS_CORE_DATASOURCE_CORE_CONFIG_JDBC_CATEGORY_DATASOURCE_GROUP_CORE</group> -->
            </ui-ref>
            
            <linked-params>
                <param-ref id="runtime.datasource.core.jdbc.driver"/>
                <param-ref id="runtime.datasource.core.jdbc.url"/>
                <param-ref id="runtime.datasource.core.jdbc.user"/>
                <param-ref id="runtime.datasource.core.jdbc.passwd"/>
            </linked-params>
        </param-checker>
        
        <param-checker id="upload-directory-checker" class="org.ametys.runtime.util.checkers.DirectoryChecker">
            <label i18n="true">PLUGINS_CORE_UPLOAD_DIRECTORY_CHECKER_LABEL</label>
            <description i18n="true">PLUGINS_CORE_UPLOAD_DIRECTORY_CHECKER_DESC</description>
            <icon-large>img/administrator/config/check/test_directorywrite_48.png</icon-large>
            <icon-medium>img/administrator/config/check/test_directorywrite_32.png</icon-medium>
            <icon-small>img/administrator/config/check/test_directorywrite_16.png</icon-small>
                       
            <configuration>
                <check-write/>
                <creates-if-required/>
            </configuration>
                        
            <ui-ref>
                <order>1</order>
                <param-ref id="runtime.upload.dir"/>
            </ui-ref>
            
            <linked-params>
                <param-ref id="runtime.upload.dir"/>
            </linked-params>
        </param-checker>

        <param-checker id="cas-server-checker" class="org.ametys.runtime.util.checkers.HttpUrlChecker">
            <label i18n="true">PLUGINS_CORE_CAS_SERVER_CHECKER_LABEL</label>
            <description i18n="true">PLUGINS_CORE_CAS_SERVER_CHECKER_DESC</description>
            <icon-large>img/administrator/config/check/test_casconnect_48.png</icon-large>
            <icon-medium>img/administrator/config/check/test_casconnect_32.png</icon-medium>
            <icon-small>img/administrator/config/check/test_casconnect_16.png</icon-small>
                        
            <configuration>
                <request>
                    <user-agent>Ametys</user-agent>
                    <method>HEAD</method>
                    <timeout>10000</timeout>
                </request>
                
                <response>
                    <code>200,301</code>
                    <header>
                        
                    </header>
                </response>
            </configuration>
                        
            <ui-ref>
                <order>1</order>
                <param-ref id="runtime.authentication.cas.serverUrl"/>
            </ui-ref>
            
            <linked-params>
                <param-ref id="runtime.authentication.cas.serverUrl"/>
            </linked-params>
        </param-checker>
        
    </config>
    
    <extension-points>
        <extension-point id="org.ametys.runtime.workspaces.admin.DesktopManager" 
                		 class="org.ametys.runtime.plugins.core.ui.item.DesktopManager" 
                		 config="/WEB-INF/param/workspace-admin.xml"/>

        <extension-point id="org.ametys.runtime.plugins.core.dispatcher.DispatchProcessExtensionPoint" 
                		 class="org.ametys.runtime.plugins.core.dispatcher.DispatchProcessExtensionPoint"/>
                		 
        <extension-point id="org.ametys.runtime.plugin.InitExtensionPoint"
                         class="org.ametys.runtime.plugin.InitExtensionPoint"/>
                         
        <extension-point id="org.ametys.runtime.authentication.AuthenticationManager"
                         class="org.ametys.runtime.authentication.AuthenticationManager"/>
                         
        <extension-point id="org.ametys.runtime.plugins.core.right.RightsExtensionPoint"
                         class="org.ametys.runtime.plugins.core.right.RightsExtensionPoint"/>
                         
        <extension-point id="org.ametys.runtime.plugins.core.right.RightContextConvertorExtentionPoint"
        				 class="org.ametys.runtime.plugins.core.right.RightContextConvertorExtentionPoint">
        </extension-point>
        
        <extension-point id="org.ametys.runtime.plugins.core.userpref.UserPreferencesExtensionPoint"
                         class="org.ametys.runtime.plugins.core.userpref.UserPreferencesExtensionPoint"
                         logger="org.ametys.runtime.plugins.core.userpref.UserPreferencesExtensionPoint">
        </extension-point>
        
        <extension-point id="org.apache.cocoon.components.modules.input.InputModuleSelector"
                         class="org.ametys.runtime.cocoon.InputModulesExtensionPoint"/>

        <extension-point id="org.apache.excalibur.source.SourceFactorySelector"
                         class="org.ametys.runtime.cocoon.SourceFactoriesExtensionPoint"/>

        <extension-point id="org.ametys.runtime.datasource.DataSourceExtensionPoint"
                         class="org.ametys.runtime.datasource.DataSourceExtensionPoint"/>

        <extension-point id="org.ametys.runtime.cocoon.SitemapConfigurationExtensionPoint"
                         class="org.ametys.runtime.cocoon.SitemapConfigurationExtensionPoint"/>

        <extension-point id="org.ametys.runtime.plugins.core.sqlmap.SqlMapExtensionPoint"
                         class="org.ametys.runtime.plugins.core.sqlmap.SqlMapExtensionPoint"/>

        <extension-point id="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.MonitoringExtensionPoint"
                         class="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.MonitoringExtensionPoint"/>
                         
        <extension-point id="org.ametys.runtime.cocoon.XHTMLSerializerExtensionPoint"
                         class="org.ametys.runtime.cocoon.XHTMLSerializerExtensionPoint"/>
                         
        <extension-point id="org.ametys.runtime.observation.ObserverExtensionPoint"
                         class="org.ametys.runtime.observation.ObserverExtensionPoint">
            <!-- Observer extension point -->
        </extension-point>
        
        <single-extension-point id="org.ametys.runtime.right.RightsManager"
                                class="org.ametys.runtime.right.RightsManager"
                                default-extension-id="org.ametys.runtime.plugins.core.right.Basic"/>
        
        <single-extension-point id="org.ametys.runtime.right.RightsContextPrefixExtensionPoint"
                                class="org.ametys.runtime.right.RightsContextPrefixExtensionPoint"
                                default-extension-id="org.ametys.runtime.plugins.core.right.context.Default"/>

        <single-extension-point id="org.ametys.runtime.user.UsersManager"
                                class="org.ametys.runtime.user.UsersManager"
                                default-extension-id="org.ametys.runtime.plugins.core.user.Static"/>

        <single-extension-point id="org.ametys.runtime.user.CurrentUserProvider"
                                class="org.ametys.runtime.user.CurrentUserProvider"
                                default-extension-id="org.ametys.runtime.plugins.core.user.AvalonCurrentUserProvider"/>

        <single-extension-point id="org.ametys.runtime.group.GroupsManager"
                                class="org.ametys.runtime.group.GroupsManager"
                                default-extension-id="org.ametys.runtime.plugins.core.group.Empty"/>

        <single-extension-point id="org.ametys.runtime.exception.ExceptionHandler"
                                class="org.ametys.runtime.exception.ExceptionHandler"
                                default-extension-id="org.ametys.runtime.plugins.core.exception.Default"/>

        <single-extension-point id="org.ametys.runtime.authentication.CredentialsProvider"
                                class="org.ametys.runtime.authentication.CredentialsProvider"
                                default-extension-id="org.ametys.runtime.plugins.core.authentication.Defined"/>

        <single-extension-point id="org.ametys.runtime.request.InitRequestHandler"
                                class="org.ametys.runtime.request.InitRequestHandler"
                                default-extension-id="org.ametys.runtime.plugins.core.request.Default"/>

        <single-extension-point id="org.ametys.runtime.plugins.core.administrator.version.VersionsHandler"
                                class="org.ametys.runtime.plugins.core.administrator.version.VersionsHandler"
                                default-extension-id="org.ametys.runtime.plugins.core.administrator.version.Default"/>

        <single-extension-point id="org.ametys.runtime.upload.UploadManager"
                                class="org.ametys.runtime.upload.UploadManager"
                                default-extension-id="org.ametys.runtime.plugins.core.upload.FSUploadManager"/>
                                
        <single-extension-point id="org.ametys.runtime.plugins.core.userpref.DefaultUserPreferencesStorage"
                                class="org.ametys.runtime.plugins.core.userpref.DefaultUserPreferencesStorage"
                                default-extension-id="org.ametys.runtime.plugins.core.userpref.EmptyUserPreferencesStorage"/>
    </extension-points>
    
    <feature name="servercommhelper">
    	<components>
    		<component class="org.ametys.runtime.plugins.core.dispatcher.ServerCommHelper" 
    				   role="org.ametys.runtime.plugins.core.dispatcher.ServerCommHelper"/>
    	</components>
    </feature>
    
    <feature name="saxclienthelper">
    	<components>
    		<component class="org.ametys.runtime.ui.SAXClientSideElementHelper" 
    				   role="org.ametys.runtime.ui.SAXClientSideElementHelper"/>
    	</components>
    </feature>
    
    <feature name="jsonutils">
    	<components>
    		<component class="org.ametys.runtime.util.JSONUtils" 
    				   role="org.ametys.runtime.util.JSONUtils"/>
    				   
    		<component class="org.ametys.runtime.util.I18nizableTextSerializer" 
    				   role="org.ametys.runtime.util.I18nizableTextSerializer"/>
    	</components>
    </feature>
    
    <feature name="i18nutils">
    	<components>
    		<component class="org.ametys.runtime.cocoon.XMLResourceBundleFactory" 
    				   role="org.apache.cocoon.i18n.BundleFactory"/>
    				   
    		<component class="org.ametys.runtime.util.I18nUtils" 
    				   role="org.ametys.runtime.util.I18nUtils"/>
    	</components>
    </feature>
    
    <feature name="xhtmlserializer-empty">
      	<extensions>
    		<extension id="org.ametys.runtime.cocoon.XHTMLSerializerExtensionPoint.empty" point="org.ametys.runtime.cocoon.XHTMLSerializerExtensionPoint">
                <!-- Add the empty namespace as allowed for the xhtml serialization -->
    		    			<namespace-allowed></namespace-allowed>
    		</extension>
    	</extensions>
    </feature>
    <feature name="xhtmlserializer-xhtml">
    	<extensions>
    		<extension id="org.ametys.runtime.cocoon.XHTMLSerializerExtensionPoint.xhtml" point="org.ametys.runtime.cocoon.XHTMLSerializerExtensionPoint">
                <!-- Add the xhtml namespace as allowed for the xhtml serialization -->
    		    <namespace-allowed>http://www.w3.org/1999/xhtml</namespace-allowed>
    		</extension>
    	</extensions>
    </feature>
    <feature name="xhtmlserializer-xml">
    	<extensions>
    		<extension id="org.ametys.runtime.cocoon.XHTMLSerializerExtensionPoint.xml" point="org.ametys.runtime.cocoon.XHTMLSerializerExtensionPoint">
                <!-- Add the xml namespace as allowed for the xhtml serialization -->
    		    <namespace-allowed>http://www.w3.org/XML/1998/namespace</namespace-allowed>
    		</extension>
    	</extensions>
    </feature>
    <feature name="xhtmlserializer-svg">
    	<extensions>
    		<extension id="org.ametys.runtime.cocoon.XHTMLSerializerExtensionPoint.svg" point="org.ametys.runtime.cocoon.XHTMLSerializerExtensionPoint">
                <!-- Add the svg namespace as allowed for the xhtml serialization -->
    		    <namespace-allowed>http://www.w3.org/2000/svg</namespace-allowed>
    		</extension>
    	</extensions>
    </feature>
    <feature name="xhtmlserializer-mathml">
    	<extensions>
    		<extension id="org.ametys.runtime.cocoon.XHTMLSerializerExtensionPoint.mathml" point="org.ametys.runtime.cocoon.XHTMLSerializerExtensionPoint">
                <!-- Add the mathml namespace as allowed for the xhtml serialization -->
    		    <namespace-allowed>http://www.w3.org/1998/Math/MathML</namespace-allowed>
    		</extension>
    	</extensions>
    </feature>
    
    <feature name="runtime.core">
        <!-- 
            This feature is a mandatory feature of the runtime defining basic tools
         -->
        <components>
            <component role="org.ametys.runtime.request.RequestListenerManager" 
                       class="org.ametys.runtime.request.RequestListenerManager"/>
            
            <component role="org.apache.excalibur.source.SourceResolver" 
                       class="org.apache.excalibur.source.impl.SourceResolverImpl"/>
                       
            <component role="org.apache.excalibur.xml.xslt.XSLTProcessor/xalan"
                       class="org.ametys.runtime.cocoon.ThreadSafeTraxProcessor" >
                <parameter name="incremental-processing" value="false"/>
                <parameter name="transformer-factory" value="org.apache.xalan.processor.TransformerFactoryImpl"/>
            </component>
        </components>
        
        <extensions>
            <extension point="org.apache.cocoon.components.modules.input.InputModuleSelector"
                       id="config"
                       class="org.ametys.runtime.config.ConfigInputModule"
                       logger="org.ametys.runtime.config.ConfigInputModule"/>
            <extension point="org.apache.cocoon.components.modules.input.InputModuleSelector"
                       id="parent-context-attr"
                       class="org.ametys.runtime.util.cocoon.ParentContextInputModule"
                       logger="org.ametys.runtime.util.cocoon.ParentContextInputModule"/>
            <extension point="org.apache.cocoon.components.modules.input.InputModuleSelector"
                       id="context-attr"
                       class="org.ametys.runtime.util.cocoon.ContextAttributesInputModule"
                       logger="org.ametys.runtime.util.cocoon.ContextAttributesInputModule"/>
                       
            <extension point="org.ametys.runtime.authentication.AuthenticationManager"
                       id="org.ametys.runtime.plugins.core.authentication.UsersManagerAuthentication"
                       class="org.ametys.runtime.plugins.core.authentication.UsersManagerAuthentication"
                       logger="org.ametys.runtime.plugins.core.authentication.UsersManagerAuthentication"/>
                       
            <!-- Mixed source users manager authentication. To be used with CASBasicCredentialsProvider. -->
            <extension point="org.ametys.runtime.authentication.AuthenticationManager"
                       id="org.ametys.runtime.plugins.core.authentication.mixed.MixedSourceUsersManagerAuthentication"
                       class="org.ametys.runtime.plugins.core.authentication.mixed.MixedSourceUsersManagerAuthentication"
                       logger="org.ametys.runtime.plugins.core.authentication.mixed.MixedSourceUsersManagerAuthentication"/>
                       
            <extension point="org.ametys.runtime.authentication.AuthenticationManager"
                       id="org.ametys.runtime.plugins.core.authentication.HasRightAuthentication"
                       class="org.ametys.runtime.plugins.core.authentication.HasRightAuthentication"
                       logger="org.ametys.runtime.plugins.core.authentication.HasRightAuthentication"/>
        </extensions>
    </feature>
    
    <feature name="runtime.core.has_right_sitemap_components">
        <extensions>
            <extension point="org.ametys.runtime.cocoon.SitemapConfigurationExtensionPoint"
                        id="org.ametys.plugin.core.SitemapConfigurationExtensionPoint">
            
                <action name="has-not-right" src="org.ametys.runtime.plugins.core.right.actions.HasRightAction" logger="org.ametys.runtime.plugins.core.administrator.sitemap.action.hasRight">
                    <has-right>false</has-right>
                    <base-context>/application</base-context>
                </action>
                <action name="has-right" src="org.ametys.runtime.plugins.core.right.actions.HasRightAction" logger="org.ametys.runtime.plugins.core.administrator.sitemap.action.hasRight">
                    <has-right>true</has-right>
                    <base-context>/application</base-context>
                </action>
                        
            </extension>
        </extensions>
    </feature>

    <feature name="runtime.datasource.core" passive="true">
        <!--
            This feature defines the pool of connection to the database.
         -->
        <config>
            <param-ref id="runtime.datasource.core.jdbc.driver"/>
            <param-ref id="runtime.datasource.core.jdbc.url"/>
            <param-ref id="runtime.datasource.core.jdbc.user"/>
            <param-ref id="runtime.datasource.core.jdbc.passwd"/>
        </config>
        
        <extensions>
            <extension point="org.ametys.runtime.datasource.DataSourceExtensionPoint" 
                       id="runtime.datasource.core.jdbc.pool"
                       logger="org.ametys.runtime.datasource.core.jdbc.pool">
                <driver runtime-config-parameter="runtime.datasource.core.jdbc.driver"/>
                <dburl runtime-config-parameter="runtime.datasource.core.jdbc.url"/>
                <user runtime-config-parameter="runtime.datasource.core.jdbc.user"/>
                <password runtime-config-parameter="runtime.datasource.core.jdbc.passwd"/>
            </extension>
        </extensions>
    </feature>
    
    <feature name="runtime.upload">
        <!-- Mark thoses configuration parameters as necessary. If you do not want to configure this beacause your application does not upload any file => unactive this feature. -->
        <config>
            <param-ref id="runtime.upload.max-size"/>
            <param-ref id="runtime.upload.dir"/>
        </config>
    </feature>
    
    <feature name="runtime.debug">
        <!-- Mark the UI debug parameter as available. If your application does not handle it you can unativate it. -->
        <config>
            <param-ref id="runtime.debug.ui"/>
            <param-ref id="runtime.cache.xslt"/>
            <param-ref id="runtime.skip-browser-compatibility-test"/>
            <param-ref id="runtime.log.abnormal.time"/>
		</config>
	</feature>
    
    <feature name="runtime.upload.manager.fs">
        <!--
            This feature defines components needed by the file system upload manager
         -->
        <extensions>
        	<extension point="org.ametys.runtime.upload.UploadManager"
        	           id="org.ametys.runtime.plugins.core.upload.FSUploadManager"
        	           class="org.ametys.runtime.plugins.core.upload.FSUploadManager">
        		<!-- UploadManager for storing uploaded files into /WEB-INF/data/uploads-user -->
        	</extension>
        </extensions>
    </feature>
    
    

    <feature name="runtime.admin">
        <!-- 
            This feature defines screen that may be uses in the administrator area
         -->
        <extensions>
            <!-- +
                 |  ADMIN PASSWORD
                 + -->
            <extension  point="org.ametys.runtime.workspaces.admin.DesktopManager" 
                        id="org.ametys.runtime.plugins.core.administrator.Password"
                        class="org.ametys.runtime.plugins.core.ui.item.StaticAdminClientSideElement"
                        logger="org.ametys.runtime.plugins.core.ui.administrator.password">
                <!-- 
                    This interaction allows the administrator to change its password
                 -->
				<class name="Ametys.plugins.core.administration.Password.act">
					<param name="label" i18n="true">PLUGINS_CORE_ADMINISTRATOR_PASSWORD_LABEL</param>
					<param name="default-description" i18n="true">PLUGINS_CORE_ADMINISTRATOR_PASSWORD_DESCRIPTION</param>
					<param name="icon-small" file="true">img/administrator/password/icon_dock.png</param>
					<param name="icon-medium" file="true">img/administrator/password/icon_medium.gif</param>
					<param name="icon-large" file="true">img/administrator/password/icon_large.png</param>
				</class>   
				<scripts>
					<file>js/Ametys/plugins/core/administration/Password.i18n.js</file>
				</scripts> 				   
            </extension>
            
            <!-- +
                 |  ADMIN CONFIGURATION
                 + -->
            <extension  point="org.ametys.runtime.workspaces.admin.DesktopManager" 
                        id="org.ametys.runtime.plugins.core.administrator.Config"
                        class="org.ametys.runtime.plugins.core.ui.item.StaticAdminClientSideElement"
                        logger="org.ametys.runtime.plugins.core.ui.administrator.config">
                <!-- 
                    This interaction allows the administrator to change the main configuration of the application
                 -->
				<class name="redirect">
					<param name="Link">administrator/config/edit.html</param>

					<param name="label" i18n="true">PLUGINS_CORE_ADMINISTRATOR_CONFIG_LABEL</param>
					<param name="default-description" i18n="true">PLUGINS_CORE_ADMINISTRATOR_CONFIG_DESCRIPTION</param>
					<param name="icon-small" file="true">img/administrator/config/icon_dock.png</param>
					<param name="icon-medium" file="true">img/administrator/config/icon_medium.gif</param>
					<param name="icon-large" file="true">img/administrator/config/icon_large.png</param>
				</class>    				   
                <Url>administrator/config/edit\.html</Url>
            </extension>
            
            <!-- +
                 |  ADMIN JVMSTATUS
                 + -->
            <extension  point="org.ametys.runtime.workspaces.admin.DesktopManager" 
                        id="org.ametys.runtime.plugins.core.administrator.JVMStatus"
                        class="org.ametys.runtime.plugins.core.ui.item.StaticAdminClientSideElement"
                        logger="org.ametys.runtime.plugins.core.ui.administrator.status">
                <!-- 
                    This interaction allows the administrator to check the status of the JVM
                 -->
				<class name="redirect">
					<param name="Link">administrator/jvmstatus/view.html</param>

					<param name="label" i18n="true">PLUGINS_CORE_ADMINISTRATOR_STATUS_LABEL</param>
					<param name="default-description" i18n="true">PLUGINS_CORE_ADMINISTRATOR_STATUS_DESCRIPTION</param>
					<param name="icon-small" file="true">img/administrator/jvmstatus/icon_dock.png</param>
					<param name="icon-medium" file="true">img/administrator/jvmstatus/icon_medium.gif</param>
					<param name="icon-large" file="true">img/administrator/jvmstatus/icon_large.png</param>
				</class>    				   
                <Url>administrator/jvmstatus/view\.html</Url>
            </extension> 

            <!-- +
                 |  ADMIN PLUGINS
                 + -->           
            <extension  point="org.ametys.runtime.workspaces.admin.DesktopManager" 
                        id="org.ametys.runtime.plugins.core.administrator.Plugins"
                        class="org.ametys.runtime.plugins.core.ui.item.StaticAdminClientSideElement"
                        logger="org.ametys.runtime.plugins.core.ui.administrator.plugins">
                <!-- 
                    This interaction allows the administrator to see plugins. Useful for developers.
                 -->
                <class name="redirect">
					<param name="Link">administrator/plugins/view.html</param>

					<param name="label" i18n="true">PLUGINS_CORE_ADMINISTRATOR_PLUGINS_LABEL</param>
					<param name="default-description" i18n="true">PLUGINS_CORE_ADMINISTRATOR_PLUGINS_DESCRIPTION</param>
					<param name="icon-small" file="true">img/administrator/plugins/icon_dock.png</param>
					<param name="icon-medium" file="true">img/administrator/plugins/icon_medium.gif</param>
					<param name="icon-large" file="true">img/administrator/plugins/icon_large.png</param>
				</class>    				   
                <Url>administrator/plugins/view\.html</Url>
            </extension> 
            
            <!-- +
                 |  ADMIN LOGS
                 + -->           
            <extension  point="org.ametys.runtime.workspaces.admin.DesktopManager" 
                        id="org.ametys.runtime.plugins.core.administrator.Logs"
                        class="org.ametys.runtime.plugins.core.ui.item.StaticAdminClientSideElement"
                        logger="org.ametys.runtime.plugins.core.ui.administrator.logs">
                <!-- 
                    This interaction allows the administrator to see and manage logs
                 -->
                <class name="redirect">
					<param name="Link">administrator/logs/view.html</param>

					<param name="label" i18n="true">PLUGINS_CORE_ADMINISTRATOR_LOGS_LABEL</param>
					<param name="default-description" i18n="true">PLUGINS_CORE_ADMINISTRATOR_LOGS_DESCRIPTION</param>
					<param name="icon-small" file="true">img/administrator/logs/icon_dock.png</param>
					<param name="icon-medium" file="true">img/administrator/logs/icon_medium.gif</param>
					<param name="icon-large" file="true">img/administrator/logs/icon_large.png</param>
				</class>    				   
                <Url>administrator/logs/view\.html</Url>
            </extension>             

            <!-- +
                 |  ADMIN SYSTEM
                 + -->           
            <extension  point="org.ametys.runtime.workspaces.admin.DesktopManager" 
                        id="org.ametys.runtime.plugins.core.administrator.System"
                        class="org.ametys.runtime.plugins.core.ui.item.StaticAdminClientSideElement"
                        logger="org.ametys.runtime.plugins.core.ui.administrator.system">
                <!-- 
                    This interaction allows the administrator to handle the system (maintenance mode, welcome message...)
                 -->
				<class name="redirect">
					<param name="Link">administrator/system/view.html</param>

					<param name="label" i18n="true">PLUGINS_CORE_ADMINISTRATOR_SYSTEM_LABEL</param>
					<param name="default-description" i18n="true">PLUGINS_CORE_ADMINISTRATOR_SYSTEM_DESCRIPTION</param>
					<param name="icon-small" file="true">img/administrator/system/icon_dock.png</param>
					<param name="icon-medium" file="true">img/administrator/system/icon_medium.gif</param>
					<param name="icon-large" file="true">img/administrator/system/icon_large.png</param>
				</class>   
                <Url>administrator/system/view\.html</Url>
            </extension>   
            
            <!-- +
                 |  ADMIN SUPER USER
                 + -->           
            <extension  point="org.ametys.runtime.workspaces.admin.DesktopManager" 
                        id="org.ametys.runtime.plugins.core.administrator.SuperUser"
                        class="org.ametys.runtime.plugins.core.ui.item.StaticAdminClientSideElement"
                        logger="org.ametys.runtime.plugins.core.ui.administrator.superuser">
                <!-- 
                    This interaction allows the administrator to handle the system (maintenance mode, welcome message...)
                 -->
				<class name="Ametys.plugins.core.administration.SuperUser.act">
					<param name="label" i18n="true">PLUGINS_CORE_ADMINISTRATOR_SUPERUSER_LABEL</param>
					<param name="default-description" i18n="true">PLUGINS_CORE_ADMINISTRATOR_SUPERUSER_DESCRIPTION</param>
					<param name="icon-small" file="true">img/administrator/superuser/icon_dock.png</param>
					<param name="icon-medium" file="true">img/administrator/superuser/icon_medium.gif</param>
					<param name="icon-large" file="true">img/administrator/superuser/icon_large.png</param>
				</class>   
                <scripts>
                    <file>js/Ametys/plugins/core/administration/SuperUser.i18n.js</file>
                    <file>js/Ametys/runtime/uihelper/SelectUser.i18n.js</file>
				</scripts> 	
				<css>
					<file>css/selectuser.css</file>
				</css> 		
            </extension>   
               
        </extensions>
    </feature>
    
    <!-- +
    	 |  VERSIONS
         + -->    
    <feature name="runtime.version">       
    	<extensions>
            <extension  point="org.ametys.runtime.plugins.core.administrator.version.VersionsHandler" 
                        id="org.ametys.runtime.plugins.core.administrator.version.Default"
                        class="org.ametys.runtime.plugins.core.administrator.version.DefaultVersionsHandler"
                        logger="org.ametys.runtime.plugins.core.administrator.versions"/>
        </extensions>
    </feature>

     <!-- +
         |  USERS
         + -->   
    <feature name="runtime.users">
        <!-- 
            This feature contains only the interaction for handling users
         -->
        <extensions>
            <extension  point="org.ametys.runtime.workspaces.admin.DesktopManager" 
                        id="org.ametys.runtime.plugins.core.administrator.Users"
                        class="org.ametys.runtime.plugins.core.ui.item.StaticAdminClientSideElement"
                        logger="org.ametys.runtime.plugins.core.ui.users">
                <!-- 
                    This interaction allow to handle users (read or read/write)
                 -->
                <class name="redirect">
					<param name="Link">administrator/users/view.html</param>

					<param name="label" i18n="true">PLUGINS_CORE_USERS_LABEL</param>
					<param name="default-description" i18n="true">PLUGINS_CORE_USERS_DESCRIPTION</param>
					<param name="icon-small" file="true">img/administrator/users/icon_dock.png</param>
					<param name="icon-medium" file="true">img/administrator/users/icon_medium.gif</param>
					<param name="icon-large" file="true">img/administrator/users/icon_large.png</param>
				</class>    				   
                <Url>users/view\.html</Url>
            </extension>      
        </extensions>
    </feature>
    
    <feature name="runtime.users.rights">
        <!-- 
            This feature brings the rights needed to manage users
         -->
        <extensions>
            <extension point="org.ametys.runtime.plugins.core.right.RightsExtensionPoint"
                       id="runtime.use.rights.users">
                <!-- FIXME does these rights must be defined here, in the runtime? -->
                <!-- 
                    Define the right for handling users
                 -->
                <right id="Runtime_Rights_User_Handle">
                    <label>PLUGINS_CORE_USERS_RIGHTS_HANDLE_LABEL</label>
                    <description>PLUGINS_CORE_USERS_RIGHTS_HANDLE_DESCRIPTION</description>
                    <category>PLUGINS_CORE_USERANDRIGHTS_CATEGORY</category>
                </right>
            </extension>
        </extensions>
    </feature>
    
    <feature name="runtime.user.impl.static">
        <!-- 
            This features defines the static implementation of users
         -->
        <extensions>
            <extension point="org.ametys.runtime.user.UsersManager"
                       id="org.ametys.runtime.plugins.core.user.Static"
                       class="org.ametys.runtime.plugins.core.user.StaticUsersManager"
                       logger="org.ametys.runtime.plugins.core.users.static">
                <user id="anonymous">
                    <fullname>Anonymous user</fullname>
                </user>
            </extension>
        </extensions>
    </feature>
    
    <feature name="runtime.user.impl.jdbc.core" depends="runtime.datasource.core">
        <!-- 
            This features defines the base jdbc implementation of users (based on core database pool) 
         -->
        <extensions>
            <extension point="org.ametys.runtime.user.UsersManager"
                       id="org.ametys.runtime.plugins.core.user.CoreJdbc"
                       class="org.ametys.runtime.plugins.core.user.jdbc.JdbcUsersManager"
                       logger="org.ametys.runtime.plugins.core.users.jdbc.simple">
                <pool>runtime.datasource.core.jdbc.pool</pool>
                <table>Users</table>
                <param id="login"/>
                <param id="firstname"/>
                <param id="lastname"/>
                <param id="email"/>
            </extension>
        </extensions>
    </feature>
    
    <feature name="runtime.user.impl.jdbc.modifiable.core" depends="runtime.datasource.core">
        <!-- 
            The same as runtime.user.impl.jdbc.core but where users can be modified through the API
            @see:plugin{feature/runtime.user.impl.jdbc.core}
         -->
        <extensions>
            <extension point="org.ametys.runtime.user.UsersManager"
                       id="org.ametys.runtime.plugins.core.user.CoreModifiableJdbc"
                       class="org.ametys.runtime.plugins.core.user.jdbc.ModifiableJdbcUsersManager"
                       logger="org.ametys.runtime.plugins.core.users.jdbc.modifiable">
                <pool>runtime.datasource.core.jdbc.pool</pool>
                <table>Users</table>
                <param id="login"/>
                <param id="firstname"/>
                <param id="lastname"/>
                <param id="email"/>
            </extension>
        </extensions>
    </feature>
    
    <feature name="runtime.user.impl.jdbc.credentialsaware.core" depends="runtime.datasource.core">
        <!-- 
            The same as runtime.user.impl.jdbc.core but where users can be authentified through the API
            @see:plugin{feature/runtime.user.impl.jdbc.core}
         -->
        <extensions>
            <extension point="org.ametys.runtime.user.UsersManager"
                       id="org.ametys.runtime.plugins.core.user.CoreCredentialsAwareJdbc"
                       class="org.ametys.runtime.plugins.core.user.jdbc.CredentialsAwareJdbcUsersManager"
                       logger="org.ametys.runtime.plugins.core.users.jdbc.credential">
                <pool>runtime.datasource.core.jdbc.pool</pool>
                <table>Users</table>
                <param id="login"/>
                <param id="password"/>
                <param id="firstname"/>
                <param id="lastname"/>
                <param id="email"/>
                <salt column="salt"/>
            </extension>
        </extensions>
    </feature>
    
    <feature name="runtime.user.impl.jdbc.modifiablecredentialsaware.core" depends="runtime.datasource.core">
        <!-- 
            The same as runtime.user.impl.jdbc.core but where users can be modified and authentified through the API
            @see:plugin{feature/runtime.user.impl.jdbc.core}
            @see:plugin{feature/runtime.user.impl.jdbc.modifiable.core}
            @see:plugin{feature/runtime.user.impl.jdbc.credentialsaware.core}
         -->
        <extensions>
            <extension point="org.ametys.runtime.user.UsersManager"
                       id="org.ametys.runtime.plugins.core.user.CoreModifiableCredentialsAwareJdbc"
                       class="org.ametys.runtime.plugins.core.user.jdbc.ModifiableCredentialsAwareJdbcUsersManager"
                       logger="org.ametys.runtime.plugins.core.users.jdbc.credentialmodifiable">
                <pool>runtime.datasource.core.jdbc.pool</pool>
                <table>Users</table>
                <param id="login"/>
                <param id="password"/>
                <param id="firstname"/>
                <param id="lastname"/>
                <param id="email"/>
                <salt column="salt"/>
            </extension>
        </extensions>
    </feature>
    
    <feature name="runtime.user.impl.ldap">
        <!-- 
            This features defines the base ldap implementation of users
         -->
        <config>
            <param-ref id="runtime.datasource.core.ldap.baseUrl"/>
            <param-ref id="runtime.datasource.core.ldap.useSSL"/>
            <param-ref id="runtime.datasource.core.ldap.baseDN"/>
            <param-ref id="runtime.datasource.core.ldap.authMethod"/>
            <param-ref id="runtime.datasource.core.ldap.adminDN"/>
            <param-ref id="runtime.datasource.core.ldap.adminPasswd"/>
            <param-ref id="runtime.datasource.core.ldap.aliasDereferencing"/>
            <param-ref id="runtime.datasource.core.ldap.followReferrals"/>

            <param-ref id="runtime.users.ldap.peopleDN"/>
            <param-ref id="runtime.users.ldap.baseFilter"/>
            <param-ref id="runtime.users.ldap.scope"/>
            <param-ref id="runtime.users.ldap.loginAttr"/>
            <param-ref id="runtime.users.ldap.firstnameAttr"/>
            <param-ref id="runtime.users.ldap.lastnameAttr"/>
            <param-ref id="runtime.users.ldap.emailAttr"/>
            <param-ref id="runtime.users.ldap.serverSideSorting"/>
        </config>
        <extensions>
            <extension point="org.ametys.runtime.user.UsersManager"
                       id="org.ametys.runtime.plugins.core.Ldap"
                       class="org.ametys.runtime.plugins.core.user.ldap.LdapUsersManager"
                       logger="org.ametys.runtime.plugins.core.user.ldap.simple">
                <BaseUrl>runtime.datasource.core.ldap.baseUrl</BaseUrl>
                <UseSSL>runtime.datasource.core.ldap.useSSL</UseSSL>
                <BaseDN>runtime.datasource.core.ldap.baseDN</BaseDN>
                <AuthenticationMethod>runtime.datasource.core.ldap.authMethod</AuthenticationMethod>
                <AdminDN>runtime.datasource.core.ldap.adminDN</AdminDN>
                <AdminPassword>runtime.datasource.core.ldap.adminPasswd</AdminPassword>
                <AliasDereferencing>runtime.datasource.core.ldap.aliasDereferencing</AliasDereferencing>
                <FollowReferrals>runtime.datasource.core.ldap.followReferrals</FollowReferrals>

                <RelativeDN>runtime.users.ldap.peopleDN</RelativeDN>
                <Filter>runtime.users.ldap.baseFilter</Filter>
                <SearchScope>runtime.users.ldap.scope</SearchScope>
                <Login>runtime.users.ldap.loginAttr</Login>
                <Firstname>runtime.users.ldap.firstnameAttr</Firstname>
                <Lastname>runtime.users.ldap.lastnameAttr</Lastname>
                <Email mandatory="false">runtime.users.ldap.emailAttr</Email>
                <ServerSideSorting>runtime.users.ldap.serverSideSorting</ServerSideSorting>
            </extension>
        </extensions>
    </feature>
        
    <feature name="runtime.user.impl.ldap.credentialsaware">
        <!-- 
            The same as runtime.user.impl.ldap but where users can be authentified through the API
            @see:plugin{feature/runtime.user.impl.ldap}
         -->
        <config>
            <param-ref id="runtime.datasource.core.ldap.baseUrl"/>
            <param-ref id="runtime.datasource.core.ldap.useSSL"/>
            <param-ref id="runtime.datasource.core.ldap.baseDN"/>
            <param-ref id="runtime.datasource.core.ldap.authMethod"/>
            <param-ref id="runtime.datasource.core.ldap.adminDN"/>
            <param-ref id="runtime.datasource.core.ldap.adminPasswd"/>
            <param-ref id="runtime.datasource.core.ldap.aliasDereferencing"/>
            <param-ref id="runtime.datasource.core.ldap.followReferrals"/>

            <param-ref id="runtime.users.ldap.peopleDN"/>
            <param-ref id="runtime.users.ldap.baseFilter"/>
            <param-ref id="runtime.users.ldap.scope"/>
            <param-ref id="runtime.users.ldap.loginAttr"/>
            <param-ref id="runtime.users.ldap.firstnameAttr"/>
            <param-ref id="runtime.users.ldap.lastnameAttr"/>
            <param-ref id="runtime.users.ldap.emailAttr"/>
            <param-ref id="runtime.users.ldap.serverSideSorting"/>
        </config>
        <extensions>
            <extension point="org.ametys.runtime.user.UsersManager"
                       id="org.ametys.runtime.plugins.core.CredentialsAwareLdap"
                       class="org.ametys.runtime.plugins.core.user.ldap.CredentialsAwareLdapUsersManager"
                       logger="org.ametys.runtime.plugins.core.user.ldap.credential">
                <BaseUrl>runtime.datasource.core.ldap.baseUrl</BaseUrl>
                <UseSSL>runtime.datasource.core.ldap.useSSL</UseSSL>
                <BaseDN>runtime.datasource.core.ldap.baseDN</BaseDN>
                <AuthenticationMethod>runtime.datasource.core.ldap.authMethod</AuthenticationMethod>
                <AdminDN>runtime.datasource.core.ldap.adminDN</AdminDN>
                <AdminPassword>runtime.datasource.core.ldap.adminPasswd</AdminPassword>
                <AliasDereferencing>runtime.datasource.core.ldap.aliasDereferencing</AliasDereferencing>
                <FollowReferrals>runtime.datasource.core.ldap.followReferrals</FollowReferrals>

                <RelativeDN>runtime.users.ldap.peopleDN</RelativeDN>
                <Filter>runtime.users.ldap.baseFilter</Filter>
                <SearchScope>runtime.users.ldap.scope</SearchScope>
                <Login>runtime.users.ldap.loginAttr</Login>
                <Firstname>runtime.users.ldap.firstnameAttr</Firstname>
                <Lastname>runtime.users.ldap.lastnameAttr</Lastname>
                <Email mandatory="false">runtime.users.ldap.emailAttr</Email>
                <ServerSideSorting>runtime.users.ldap.serverSideSorting</ServerSideSorting>
            </extension>
        </extensions>
    </feature>
    
    <feature name="runtime.user.impl.ldap.and.jdbc.credentialsaware">
        <!-- 
            This users manager will search for users into the ldap and into the sql db.
            @see:plugin{feature/runtime.user.impl.ldap.credentialsaware}
            @see:plugin{feature/runtime.user.impl.jdbc.credentialsaware.core}
         -->
        <config>
            <param-ref id="runtime.datasource.core.ldap.baseUrl"/>
            <param-ref id="runtime.datasource.core.ldap.useSSL"/>
            <param-ref id="runtime.datasource.core.ldap.baseDN"/>
            <param-ref id="runtime.datasource.core.ldap.authMethod"/>
            <param-ref id="runtime.datasource.core.ldap.adminDN"/>
            <param-ref id="runtime.datasource.core.ldap.adminPasswd"/>
            <param-ref id="runtime.datasource.core.ldap.aliasDereferencing"/>
            <param-ref id="runtime.datasource.core.ldap.followReferrals"/>
            
            <param-ref id="runtime.users.ldap.peopleDN"/>
            <param-ref id="runtime.users.ldap.baseFilter"/>
            <param-ref id="runtime.users.ldap.scope"/>
            <param-ref id="runtime.users.ldap.loginAttr"/>
            <param-ref id="runtime.users.ldap.firstnameAttr"/>
            <param-ref id="runtime.users.ldap.lastnameAttr"/>
            <param-ref id="runtime.users.ldap.emailAttr"/>
            <param-ref id="runtime.users.ldap.serverSideSorting"/>
        </config>
        <extensions>
            <extension point="org.ametys.runtime.user.UsersManager"
                       id="org.ametys.runtime.plugins.core.CredentialsAwareLdapAndJdbc"
                       class="org.ametys.runtime.plugins.core.user.mixed.CredentialsAwareLdapAndJdbcUsersManager"
                       logger="org.ametys.runtime.plugins.core.user.mixed.ldap.and.jdbc.credential">
                <BaseUrl>runtime.datasource.core.ldap.baseUrl</BaseUrl>
                <UseSSL>runtime.datasource.core.ldap.useSSL</UseSSL>
                <BaseDN>runtime.datasource.core.ldap.baseDN</BaseDN>
                <AuthenticationMethod>runtime.datasource.core.ldap.authMethod</AuthenticationMethod>
                <AdminDN>runtime.datasource.core.ldap.adminDN</AdminDN>
                <AdminPassword>runtime.datasource.core.ldap.adminPasswd</AdminPassword>
                <AliasDereferencing>runtime.datasource.core.ldap.aliasDereferencing</AliasDereferencing>
                <FollowReferrals>runtime.datasource.core.ldap.followReferrals</FollowReferrals>
                
                <RelativeDN>runtime.users.ldap.peopleDN</RelativeDN>
                <Filter>runtime.users.ldap.baseFilter</Filter>
                <SearchScope>runtime.users.ldap.scope</SearchScope>
                <Login>runtime.users.ldap.loginAttr</Login>
                <Firstname>runtime.users.ldap.firstnameAttr</Firstname>
                <Lastname>runtime.users.ldap.lastnameAttr</Lastname>
                <Email mandatory="false">runtime.users.ldap.emailAttr</Email>
                <ServerSideSorting>runtime.users.ldap.serverSideSorting</ServerSideSorting>
                
                <!-- Fallback users manager configuration. -->
                <FallbackUsersManagerConfiguration>
                    <pool>runtime.datasource.core.jdbc.pool</pool>
                    <table>Users</table>
                    <param id="login"/>
                    <param id="password"/>
                    <param id="firstname"/>
                    <param id="lastname"/>
                    <param id="email"/>
                </FallbackUsersManagerConfiguration>
                
            </extension>
        </extensions>
    </feature>
    
    <feature name="runtime.util.ldap.scope.enumerator">
        <!-- 
            This feature provides a LDAP scope enumerator
         -->
    	<components>
    		<component role="org.ametys.runtime.plugins.core.util.ldap.ScopeEnumerator"
    		           class="org.ametys.runtime.plugins.core.util.ldap.ScopeEnumerator"/>
    	</components>
    </feature>
    
    <!-- +
         |  CURRENT USER PROVIDER
         + -->   
    <feature name="runtime.current-user">
        <!-- 
            This feature provides a non-null current user
         -->
		<extensions>
			<!-- Default extension for providing the current user -->
			<extension point="org.ametys.runtime.user.CurrentUserProvider"
			           id="org.ametys.runtime.plugins.core.user.AvalonCurrentUserProvider"
			           class="org.ametys.runtime.plugins.core.user.AvalonCurrentUserProvider">
				<user default="admin"/>
			</extension>
		</extensions>
    </feature>
        
    <!-- +
         |  GROUPS
         + -->   
    <feature name="runtime.groups">
        <!-- 
            This feature contains only the interaction for handling groups
         -->
        <extensions>
            <extension  point="org.ametys.runtime.workspaces.admin.DesktopManager" 
                        id="org.ametys.runtime.plugins.core.administrator.Groups"
                        class="org.ametys.runtime.plugins.core.ui.item.StaticAdminClientSideElement"
                        logger="org.ametys.runtime.plugins.core.ui.groups">
                <!-- 
                    This interaction allow to handle groups (read or read/write)
                 -->
                <class name="redirect">
					<param name="Link">administrator/groups/view.html</param>

					<param name="label" i18n="true">PLUGINS_CORE_GROUPS_LABEL</param>
					<param name="default-description" i18n="true">PLUGINS_CORE_GROUPS_DESCRIPTION</param>
					<param name="icon-small" file="true">img/administrator/groups/icon_dock.png</param>
					<param name="icon-medium" file="true">img/administrator/groups/icon_medium.gif</param>
					<param name="icon-large" file="true">img/administrator/groups/icon_large.png</param>
				</class>    				   
                <Url>groups/view\.html</Url>
            </extension>      
        </extensions>
    </feature>
    
    <feature name="runtime.groups.rights">
        <!-- 
            This feature brings the rights needed to manage groups
         -->
        <extensions>
            <extension point="org.ametys.runtime.plugins.core.right.RightsExtensionPoint"
                       id="runtime.use.rights.groups">
                <!-- FIXME does these rights must be defined here, in the runtime? -->
                <!-- 
                    Define the right for handling groups
                 -->
                <right id="Runtime_Rights_Group_Handle">
                    <label>PLUGINS_CORE_GROUPS_RIGHTS_HANDLE_LABEL</label>
                    <description>PLUGINS_CORE_GROUPS_RIGHTS_HANDLE_DESCRIPTION</description>
                    <category>PLUGINS_CORE_USERANDRIGHTS_CATEGORY</category>
                </right>
            </extension>
        </extensions>
    </feature>
    
    <feature name="runtime.groups.impl.empty">
        <!-- 
            This features defines an 'empty' groups to avoid group handling.
         -->
        <extensions>
            <extension point="org.ametys.runtime.group.GroupsManager"
                       id="org.ametys.runtime.plugins.core.group.Empty"
                       class="org.ametys.runtime.plugins.core.group.EmptyGroupsManager"
                       logger="org.ametys.runtime.plugins.core.group.empty"/>
        </extensions>
    </feature>
    
    <feature name="runtime.groups.impl.jdbc" depends="runtime.datasource.core">
        <!-- 
            This features defines the base jdbc implementation of groups (based on core database pool)
         -->
        <extensions>
            <extension point="org.ametys.runtime.group.GroupsManager"
                       id="org.ametys.runtime.plugins.core.group.ModifiableJdbcCore"
                       class="org.ametys.runtime.plugins.core.group.jdbc.ModifiableJdbcGroupsManager"
                       logger="org.ametys.runtime.plugins.core.group.jdbc">
                <pool>runtime.datasource.core.jdbc.pool</pool>
                <list>
                    <table>Groups</table>
                    <id>Id</id>
                    <label>Label</label>
                </list>
                <composition>
                    <table>Groups_Users</table>
                    <group>Group_Id</group>
                    <user>Login</user>
                </composition>
            </extension>                   
        </extensions>
    </feature>

    <feature name="runtime.groups.impl.ldap.groupDriven">
        <!-- 
            This features defines the base ldap implementation of groups where the group information is handle by the group object
         -->
        <config>
            <param-ref id="runtime.datasource.core.ldap.baseUrl"/>
            <param-ref id="runtime.datasource.core.ldap.useSSL"/>
            <param-ref id="runtime.datasource.core.ldap.baseDN"/>
            <param-ref id="runtime.datasource.core.ldap.authMethod"/>
            <param-ref id="runtime.datasource.core.ldap.adminDN"/>
            <param-ref id="runtime.datasource.core.ldap.adminPasswd"/>
            <param-ref id="runtime.datasource.core.ldap.aliasDereferencing"/>
            <param-ref id="runtime.datasource.core.ldap.followReferrals"/>
            
            <param-ref id="runtime.groups.ldap.groupDN"/>
            <param-ref id="runtime.groups.ldap.filter"/>
            <param-ref id="runtime.groups.ldap.scope"/>
            <param-ref id="runtime.groups.ldap.id"/>
            <param-ref id="runtime.groups.ldap.description"/>
            <param-ref id="runtime.groups.ldap.member"/>
            
            <param-ref id="runtime.users.ldap.peopleDN"/>
            <param-ref id="runtime.users.ldap.loginAttr"/>
        </config>
        <extensions>
            <extension point="org.ametys.runtime.group.GroupsManager"
                       id="org.ametys.runtime.plugins.core.group.GroupDrivenLdap"
                       class="org.ametys.runtime.plugins.core.group.ldap.GroupDrivenLdapGroupsManager"
                       logger="org.ametys.runtime.plugins.core.group.groupdriven">
                <BaseUrl>runtime.datasource.core.ldap.baseUrl</BaseUrl>
                <UseSSL>runtime.datasource.core.ldap.useSSL</UseSSL>
                <BaseDN>runtime.datasource.core.ldap.baseDN</BaseDN>
                <AuthenticationMethod>runtime.datasource.core.ldap.authMethod</AuthenticationMethod>
                <AdminDN>runtime.datasource.core.ldap.adminDN</AdminDN>
                <AdminPassword>runtime.datasource.core.ldap.adminPasswd</AdminPassword>
                <AliasDereferencing>runtime.datasource.core.ldap.aliasDereferencing</AliasDereferencing>
                <FollowReferrals>runtime.datasource.core.ldap.followReferrals</FollowReferrals>
                
                <RelativeDN>runtime.groups.ldap.groupDN</RelativeDN>
                <Filter>runtime.groups.ldap.filter</Filter>
                <SearchScope>runtime.groups.ldap.scope</SearchScope>
                <Id>runtime.groups.ldap.id</Id>
                <Description>runtime.groups.ldap.description</Description>
                <Member>runtime.groups.ldap.member</Member>
                
                <UsersRelativeDN>runtime.users.ldap.peopleDN</UsersRelativeDN>
                <Login>runtime.users.ldap.loginAttr</Login>
            </extension>
        </extensions>
    </feature>
                 
    <feature name="runtime.groups.impl.ldap.usersDriven">
        <!-- 
            This features defines the base ldap implementation of groups where the group information is handle by the user object
         -->
        <config>
            <param-ref id="runtime.datasource.core.ldap.baseUrl"/>
            <param-ref id="runtime.datasource.core.ldap.useSSL"/>
            <param-ref id="runtime.datasource.core.ldap.baseDN"/>
            <param-ref id="runtime.datasource.core.ldap.authMethod"/>
            <param-ref id="runtime.datasource.core.ldap.adminDN"/>
            <param-ref id="runtime.datasource.core.ldap.adminPasswd"/>
            <param-ref id="runtime.datasource.core.ldap.aliasDereferencing"/>
            <param-ref id="runtime.datasource.core.ldap.followReferrals"/>
            
            <param-ref id="runtime.groups.ldap.groupDN"/>
            <param-ref id="runtime.groups.ldap.filter"/>
            <param-ref id="runtime.groups.ldap.scope"/>
            <param-ref id="runtime.groups.ldap.id"/>
            <param-ref id="runtime.groups.ldap.description"/>
            <param-ref id="runtime.groups.ldap.memberof"/>
            
            <param-ref id="runtime.users.ldap.peopleDN"/>
            <param-ref id="runtime.users.ldap.baseFilter"/>
            <param-ref id="runtime.users.ldap.scope"/>
            <param-ref id="runtime.users.ldap.loginAttr"/>
        </config>
        <extensions>
            <extension point="org.ametys.runtime.group.GroupsManager"
                       id="org.ametys.runtime.plugins.core.group.UsersDrivenLdap"
                       class="org.ametys.runtime.plugins.core.group.ldap.UserDrivenLdapGroupsManager"
                       logger="org.ametys.runtime.plugins.core.group.usersdriven">
                <BaseUrl>runtime.datasource.core.ldap.baseUrl</BaseUrl>
                <UseSSL>runtime.datasource.core.ldap.useSSL</UseSSL>
                <BaseDN>runtime.datasource.core.ldap.baseDN</BaseDN>
                <AuthenticationMethod>runtime.datasource.core.ldap.authMethod</AuthenticationMethod>
                <AdminDN>runtime.datasource.core.ldap.adminDN</AdminDN>
                <AdminPassword>runtime.datasource.core.ldap.adminPasswd</AdminPassword>
                <AliasDereferencing>runtime.datasource.core.ldap.aliasDereferencing</AliasDereferencing>
                <FollowReferrals>runtime.datasource.core.ldap.followReferrals</FollowReferrals>
                
                <RelativeDN>runtime.groups.ldap.groupDN</RelativeDN>
                <Filter>runtime.groups.ldap.filter</Filter>
                <SearchScope>runtime.groups.ldap.scope</SearchScope>
                <Id>runtime.groups.ldap.id</Id>
                <Description>runtime.groups.ldap.description</Description>
                <MemberOf>runtime.groups.ldap.memberof</MemberOf>

                <UsersRelativeDN>runtime.users.ldap.peopleDN</UsersRelativeDN>
                <UsersFilter>runtime.users.ldap.baseFilter</UsersFilter>
                <UsersSearchScope>runtime.users.ldap.scope</UsersSearchScope>
                <UsersLogin>runtime.users.ldap.loginAttr</UsersLogin>
            </extension>
        </extensions>
    </feature>
    
    <feature name="runtime.groups.impl.ldap.and.jdbc.userDriven" depends="runtime.datasource.core">
        <!-- 
            This users manager will search for users into the ldap (users driven) and into the sql db.
            @see:plugin{feature/runtime.groups.impl.ldap.usersDriven}
            @see:plugin{feature/runtime.groups.impl.jdbc}
         -->
        <config>
            <param-ref id="runtime.datasource.core.jdbc.driver"/>
            <param-ref id="runtime.datasource.core.jdbc.url"/>
            <param-ref id="runtime.datasource.core.jdbc.user"/>
            <param-ref id="runtime.datasource.core.jdbc.passwd"/>
            
            <param-ref id="runtime.datasource.core.ldap.baseUrl"/>
            <param-ref id="runtime.datasource.core.ldap.useSSL"/>
            <param-ref id="runtime.datasource.core.ldap.baseDN"/>
            <param-ref id="runtime.datasource.core.ldap.authMethod"/>
            <param-ref id="runtime.datasource.core.ldap.adminDN"/>
            <param-ref id="runtime.datasource.core.ldap.adminPasswd"/>
            <param-ref id="runtime.datasource.core.ldap.aliasDereferencing"/>
            <param-ref id="runtime.datasource.core.ldap.followReferrals"/>
            
            <param-ref id="runtime.groups.ldap.groupDN"/>
            <param-ref id="runtime.groups.ldap.filter"/>
            <param-ref id="runtime.groups.ldap.scope"/>
            <param-ref id="runtime.groups.ldap.id"/>
            <param-ref id="runtime.groups.ldap.description"/>
            <param-ref id="runtime.groups.ldap.memberof"/>
            
            <param-ref id="runtime.users.ldap.peopleDN"/>
            <param-ref id="runtime.users.ldap.baseFilter"/>
            <param-ref id="runtime.users.ldap.scope"/>
            <param-ref id="runtime.users.ldap.loginAttr"/>
        </config>
        <extensions>
            <extension point="org.ametys.runtime.group.GroupsManager"
                       id="org.ametys.runtime.plugins.core.group.UserDrivenLdapAndJdbc"
                       class="org.ametys.runtime.plugins.core.group.mixed.UserDrivenLdapAndJdbcGroupsManager"
                       logger="org.ametys.runtime.plugins.core.group.userdriven.ldap.and.jdbc">
                <BaseUrl>runtime.datasource.core.ldap.baseUrl</BaseUrl>
                <UseSSL>runtime.datasource.core.ldap.useSSL</UseSSL>
                <BaseDN>runtime.datasource.core.ldap.baseDN</BaseDN>
                <AuthenticationMethod>runtime.datasource.core.ldap.authMethod</AuthenticationMethod>
                <AdminDN>runtime.datasource.core.ldap.adminDN</AdminDN>
                <AdminPassword>runtime.datasource.core.ldap.adminPasswd</AdminPassword>
                <AliasDereferencing>runtime.datasource.core.ldap.aliasDereferencing</AliasDereferencing>
                <FollowReferrals>runtime.datasource.core.ldap.followReferrals</FollowReferrals>
                
                <RelativeDN>runtime.groups.ldap.groupDN</RelativeDN>
                <Filter>runtime.groups.ldap.filter</Filter>
                <SearchScope>runtime.groups.ldap.scope</SearchScope>
                <Id>runtime.groups.ldap.id</Id>
                <Description>runtime.groups.ldap.description</Description>
                <MemberOf>runtime.groups.ldap.memberof</MemberOf>
                
                <UsersRelativeDN>runtime.users.ldap.peopleDN</UsersRelativeDN>
                <UsersFilter>runtime.users.ldap.baseFilter</UsersFilter>
                <UsersSearchScope>runtime.users.ldap.scope</UsersSearchScope>
                <UsersLogin>runtime.users.ldap.loginAttr</UsersLogin>
                
                <FallbackGroupsManagerConfiguration>
                    <pool>runtime.datasource.core.jdbc.pool</pool>
                    <list>
                        <table>Groups</table>
                        <id>Id</id>
                        <label>Label</label>
                    </list>
                    <composition>
                        <table>Groups_Users</table>
                        <group>Group_Id</group>
                        <user>Login</user>
                    </composition>
                </FallbackGroupsManagerConfiguration>
            </extension>
        </extensions>
    </feature>
    
    <feature name="runtime.groups.impl.ldap.and.jdbc.groupDriven" depends="runtime.datasource.core">
        <!-- 
            This users manager will search for users into the ldap (group driven) and into the sql db.
            @see:plugin{feature/runtime.groups.impl.ldap.groupDriven}
            @see:plugin{feature/runtime.groups.impl.jdbc}
         -->
        <config>
            <param-ref id="runtime.datasource.core.jdbc.driver"/>
            <param-ref id="runtime.datasource.core.jdbc.url"/>
            <param-ref id="runtime.datasource.core.jdbc.user"/>
            <param-ref id="runtime.datasource.core.jdbc.passwd"/>
            
            <param-ref id="runtime.datasource.core.ldap.baseUrl"/>
            <param-ref id="runtime.datasource.core.ldap.useSSL"/>
            <param-ref id="runtime.datasource.core.ldap.baseDN"/>
            <param-ref id="runtime.datasource.core.ldap.authMethod"/>
            <param-ref id="runtime.datasource.core.ldap.adminDN"/>
            <param-ref id="runtime.datasource.core.ldap.adminPasswd"/>
            <param-ref id="runtime.datasource.core.ldap.aliasDereferencing"/>
            <param-ref id="runtime.datasource.core.ldap.followReferrals"/>
            
            <param-ref id="runtime.groups.ldap.groupDN"/>
            <param-ref id="runtime.groups.ldap.filter"/>
            <param-ref id="runtime.groups.ldap.scope"/>
            <param-ref id="runtime.groups.ldap.id"/>
            <param-ref id="runtime.groups.ldap.description"/>
            <param-ref id="runtime.groups.ldap.member"/>
            
            <param-ref id="runtime.users.ldap.peopleDN"/>
            <param-ref id="runtime.users.ldap.loginAttr"/>
        </config>
        <extensions>
            <extension point="org.ametys.runtime.group.GroupsManager"
                       id="org.ametys.runtime.plugins.core.group.GroupDrivenLdapAndJdbc"
                       class="org.ametys.runtime.plugins.core.group.mixed.GroupDrivenLdapAndJdbcGroupsManager"
                       logger="org.ametys.runtime.plugins.core.group.userdriven.ldap.and.jdbc">
                <BaseUrl>runtime.datasource.core.ldap.baseUrl</BaseUrl>
                <UseSSL>runtime.datasource.core.ldap.useSSL</UseSSL>
                <BaseDN>runtime.datasource.core.ldap.baseDN</BaseDN>
                <AuthenticationMethod>runtime.datasource.core.ldap.authMethod</AuthenticationMethod>
                <AdminDN>runtime.datasource.core.ldap.adminDN</AdminDN>
                <AdminPassword>runtime.datasource.core.ldap.adminPasswd</AdminPassword>
                <AliasDereferencing>runtime.datasource.core.ldap.aliasDereferencing</AliasDereferencing>
                <FollowReferrals>runtime.datasource.core.ldap.followReferrals</FollowReferrals>
                
                <RelativeDN>runtime.groups.ldap.groupDN</RelativeDN>
                <Filter>runtime.groups.ldap.filter</Filter>
                <SearchScope>runtime.groups.ldap.scope</SearchScope>
                <Id>runtime.groups.ldap.id</Id>
                <Description>runtime.groups.ldap.description</Description>
                <Member>runtime.groups.ldap.member</Member>
                
                <UsersRelativeDN>runtime.users.ldap.peopleDN</UsersRelativeDN>
                <Login>runtime.users.ldap.loginAttr</Login>
                
                <FallbackGroupsManagerConfiguration>
                    <pool>runtime.datasource.core.jdbc.pool</pool>
                    <list>
                        <table>Groups</table>
                        <id>Id</id>
                        <label>Label</label>
                    </list>
                    <composition>
                        <table>Groups_Users</table>
                        <group>Group_Id</group>
                        <user>Login</user>
                    </composition>
                </FallbackGroupsManagerConfiguration>
            </extension>
        </extensions>
    </feature>
    
    <!-- +
         |  RIGHTS
         + -->   
    <feature name="runtime.rights">
        <!-- 
            This feature contains interactions to handle rights based on profiles
         -->
        <extensions>
            <extension  point="org.ametys.runtime.workspaces.admin.DesktopManager" 
                        id="org.ametys.runtime.plugins.core.administrator.right.Profiles"
                        class="org.ametys.runtime.plugins.core.ui.item.StaticAdminClientSideElement"
                        logger="org.ametys.runtime.plugins.core.ui.rights.profiled.profile">
                <!-- 
                    This extensions display the profile screen
                 -->
                <class name="redirect">
					<param name="Link">administrator/profiles/view.html</param>

					<param name="label" i18n="true">PLUGINS_CORE_RIGHTS_PROFILES_LABEL</param>
					<param name="default-description" i18n="true">PLUGINS_CORE_RIGHTS_PROFILES_DESCRIPTION</param>
					<param name="icon-small" file="true">img/administrator/profiles/icon_dock.png</param>
					<param name="icon-medium" file="true">img/administrator/profiles/icon_medium.gif</param>
					<param name="icon-large" file="true">img/administrator/profiles/icon_large.png</param>
				</class>    				   
                <Url>administrator/profiles/view\.html</Url>
            </extension>    
        </extensions>
    </feature>
    
    <feature name="runtime.rights.rights">
        <!-- 
            This feature declares rights for handling rights screens
         -->
        <extensions>
            <extension point="org.ametys.runtime.plugins.core.right.RightsExtensionPoint"
                       id="runtime.use.rights.profile">
                <!-- FIXME does these rights must be defined here, in the runtime? -->
                <!-- 
                    Defines rights for handling profile and handling rights
                 -->
                <!--
                <right id="Runtime_Rights_Rights_Profile_See">
                    <label>PLUGINS_CORE_PROFILE_RIGHTS_SEE_LABEL</label>
                    <description>PLUGINS_CORE_PROFILE_RIGHTS_SEE_DESCRIPTION</description>
                    <category>PLUGINS_CORE_USERANDRIGHTS_CATEGORY</category>
                </right>
                -->
                <!-- right id="Runtime_Rights_Rights_Profile_Handle">
                    <label>PLUGINS_CORE_PROFILE_RIGHTS_HANDLE_LABEL</label>
                    <description>PLUGINS_CORE_PROFILE_RIGHTS_HANDLE_DESCRIPTION</description>
                    <category>PLUGINS_CORE_USERANDRIGHTS_CATEGORY</category>
                </right-->
                <right id="Runtime_Rights_Rights_Handle">
                    <label>PLUGINS_CORE_RIGHTS_HANDLE_LABEL</label>
                    <description>PLUGINS_CORE_RIGHTS_HANDLE_DESCRIPTION</description>
                    <category>PLUGINS_CORE_USERANDRIGHTS_CATEGORY</category>
                </right>
            </extension>
        </extensions>
    </feature>
    
	<feature name="runtime.rights.context.impl.default">
        <!-- 
            This feature declares the default rights context manager
         -->
        <extensions>
            <extension point="org.ametys.runtime.right.RightsContextPrefixExtensionPoint"
                       id="org.ametys.runtime.plugins.core.right.context.Default"
                       class="org.ametys.runtime.right.DefaultRightsContextPrefix"
                       logger="org.ametys.runtime.plugins.core.right.context.default"/>
        </extensions>
    </feature>
                                
    <feature name="runtime.rights.impl.basic">
        <!-- 
            This feature declares the basic rights manager that always anwers OK
         -->
        <extensions>
            <extension point="org.ametys.runtime.right.RightsManager"
                       id="org.ametys.runtime.plugins.core.right.Basic"
                       class="org.ametys.runtime.plugins.core.right.BasicRightsManager"
                       logger="org.ametys.runtime.plugins.core.right.basic"/>
        </extensions>
    </feature>

    <feature name="runtime.rights.impl.profil" depends="runtime.datasource.core">
        <!-- 
            This feature declares the profile based rights manager.<br/>
            This manager use the core database pool.
            A profile is a set of atomic rights.
         -->
        <extensions>
            <extension point="org.ametys.runtime.right.RightsManager"
                       id="org.ametys.runtime.plugins.core.right.DefaultProfileBased"
                       class="org.ametys.runtime.plugins.core.right.profile.DefaultProfileBasedRightsManager"
                       logger="org.ametys.runtime.plugins.core.right.profil">
                <!--
                    See javadoc.<br/>
                    The configuration is handled in /WEB-INF/param/rights.xml.<br/>
                    The database pool is runtime.datasource.core.jdbc.pool
                 -->
                <rights config="/WEB-INF/param/rights.xml"/>
                <pool>runtime.datasource.core.jdbc.pool</pool>
            </extension>
        </extensions>
    </feature>

    <feature name="runtime.rights.impl.hierarchicalProfil" depends="runtime.datasource.core">
        <!-- 
            The same as runtime.rights.impl.profil but where rights are inherited in contexts :
            having the right on '/foo' gives the right on '/foo/subfoo'
            @see:plugin{feature/runtime.rights.impl.profil}
         -->
        <extensions>
            <extension point="org.ametys.runtime.right.RightsManager"
                       id="org.ametys.runtime.plugins.core.right.HierarchicalProfileBased"
                       class="org.ametys.runtime.plugins.core.right.profile.HierarchicalProfileBasedRightsManager"
                       logger="org.ametys.runtime.plugins.core.right.hierarchicalprofil">
                <rights config="/WEB-INF/param/rights.xml"/>
                <pool>runtime.datasource.core.jdbc.pool</pool>
            </extension>                       
        </extensions>
    </feature>
    
    <!-- +
         |  EXCEPTION
         + -->
    <feature name="runtime.exception.impl.default">
        <!-- 
            This feature has the default behavior on errors that display the embeded error pages.
         -->
        <extensions>
            <extension point="org.ametys.runtime.exception.ExceptionHandler"
                       id="org.ametys.runtime.plugins.core.exception.Default"
                       class="org.ametys.runtime.exception.DefaultExceptionHandler"
                       logger="org.ametys.runtime.exception.default"/>
        </extensions>
    </feature>
    
    <!-- +
         |  AUTHENTICATION
         + -->
    <feature name="runtime.authentication.impl.defined">
        <!-- 
            This feature defines a simple credential provider as it always answer that 'anonymous' is connected
         -->
        <extensions>
            <extension point="org.ametys.runtime.authentication.CredentialsProvider"
                       id="org.ametys.runtime.plugins.core.authentication.Defined"
                       class="org.ametys.runtime.plugins.core.authentication.DefinedCredentialsProvider"
                       logger="org.ametys.runtime.authentication.defined">
                <!-- 
                    See javadoc.<br/>
                    Configured so user is always 'anonymous'
                 -->
                <user>anonymous</user>
            </extension>
        </extensions>
    </feature>
         
    <feature name="runtime.authentication.impl.basic">
        <!-- 
            This feature defines the 'basic' credential provider (i.e. where the credential is requested to the user
            by the navigator - the incomming values are not trusted)
         -->
        <config>
            <param-ref id="runtime.authentication.basic.realm"/>
        </config>
        <extensions>
            <extension point="org.ametys.runtime.authentication.CredentialsProvider"
                       id="org.ametys.runtime.plugins.core.authentication.Basic"
                       class="org.ametys.runtime.authentication.BasicCredentialsProvider"
                       logger="org.ametys.runtime.authentication.basic"/>
        </extensions>
    </feature>

    <feature name="runtime.authentication.impl.formbased">
        <!-- 
        	This features defines the form based credential provider. Data are sent to the provider through a
        	html form. If the option is enabled, user's data can be stored with a cookie.
         -->
        <config>
			<param-ref id="runtime.authentication.form.security.level"/>
        </config>
        <extensions>
            <extension point="org.ametys.runtime.authentication.CredentialsProvider"
                       id="org.ametys.runtime.plugins.core.authentication.FormBased"
                       class="org.ametys.runtime.plugins.core.authentication.FormBasedCredentialsProvider"
                       logger="org.ametys.runtime.authentication.formbased">
            	<username-field>Username</username-field>
            	<password-field>Password</password-field>
            	<rememberMe-field>rememberMe</rememberMe-field>
            	<captchaKey-field>CaptchaKey</captchaKey-field>
				<captcha-field>Captcha</captcha-field>
            	<cookie>
            		<cookieEnabled>true</cookieEnabled>
            		<cookieLifeTime>604800</cookieLifeTime>
            		<cookieName>AmetysAuthentication</cookieName>
            	</cookie>
            	<loginUrl internal="true">login.html</loginUrl>
            	<loginFailedUrl provideLoginParameter="true" internal="true">login_failed.html</loginFailedUrl>
            </extension>
        </extensions>
    </feature>

    <feature name="runtime.authentication.impl.remote">
        <!-- 
            This feature defines the 'remote' credential provider (i.e. where the credential is automatically setted and trusted 
            by environment in the REMOTE_USER variable)
         -->
        <config>
            <param-ref id="runtime.authentication.remote.realm"/>
        </config>
        <extensions>
            <extension point="org.ametys.runtime.authentication.CredentialsProvider"
                       id="org.ametys.runtime.plugins.core.authentication.Remote"
                       class="org.ametys.runtime.plugins.core.authentication.RemoteUserCredentialsProvider"
                       logger="org.ametys.runtime.plugins.core.authentication.remote"/>
        </extensions>
    </feature>
        
    <feature name="runtime.authentication.impl.jcifs">
        <!-- 
            This feature defines the windows NT credential provider.<br/>
            Use its extension to automatically get the login of the user connected on the NT domain : 
            user is authenticated externally and trusted by the NT environment.
         -->
        <config>
            <param-ref id="runtime.authentication.remote.realm"/>
            <param-ref id="runtime.authentication.jcifs.production"/>
            <param-ref id="runtime.authentication.jcifs.clientDomain"/>
            <param-ref id="runtime.authentication.jcifs.netBios"/>
            <param-ref id="runtime.authentication.jcifs.domainController"/>
        </config>
        <extensions>
            <extension point="org.ametys.runtime.authentication.CredentialsProvider"
                       id="org.ametys.runtime.plugins.core.authentication.Jcifs"
                       class="org.ametys.runtime.plugins.core.authentication.JcifsCredentialsProvider"
                       logger="org.ametys.runtime.plugins.core.authentication.jcifs"/>
        </extensions>
    </feature>
        
    <feature name="runtime.authentication.impl.cas">
        <!-- 
            This feature defines the 'cas' credential provider (i.e. user is authenticated externally and
            trusted by a CAS Server)
         -->
        <config>
            <param-ref id="runtime.authentication.cas.serverUrl"/>
            <param-ref id="runtime.authentication.cas.authorizedProxyChain"/>
        </config>
        <extensions>
            <extension point="org.ametys.runtime.authentication.CredentialsProvider"
                       id="org.ametys.runtime.plugins.core.authentication.CAS"
                       class="org.ametys.runtime.plugins.core.authentication.CASCredentialsProvider"
                       logger="org.ametys.runtime.plugins.core.authentication.cas"/>
        </extensions>
    </feature>
        
    <feature name="runtime.authentication.impl.cas.gateway">
        <!-- 
            The same as runtime.authentication.impl.cas but where CAS is configured to be used as a gateway :<br/>
            An already authenticated user is trusted but a new one can also connect !<br/>
            To give the user the oppotunity to enter its credentials you will have to manually redirect to the CAS login page.
            @see:plugin{feature/runtime.authentication.impl.cas}
            @see:plugin{config/runtime.authentication.cas.serverUrl}
         -->
        <config>
            <param-ref id="runtime.authentication.cas.serverUrl"/>
            <param-ref id="runtime.authentication.cas.authorizedProxyChain"/>
        </config>
        <extensions>
            <extension point="org.ametys.runtime.authentication.CredentialsProvider"
                       id="org.ametys.runtime.plugins.core.authentication.GatewayCAS"
                       class="org.ametys.runtime.plugins.core.authentication.CASCredentialsProvider"
                       logger="org.ametys.runtime.plugins.core.authentication.casgateway">
                <gateway>true</gateway>
            </extension>
        </extensions>
    </feature>
    
    <feature name="runtime.authentication.impl.cas.gateway.and.basic">
        <!-- 
            The same as runtime.authentication.impl.cas.gateway but if the user is not already authenticated on cas, it will see a BASIC popup.
            @see:plugin{feature/runtime.authentication.impl.cas.gateway}
            @see:plugin{runtime.authentication.impl.basic}
         -->
        <config>
            <!-- CAS parameters -->
            <param-ref id="runtime.authentication.cas.serverUrl"/>
            <param-ref id="runtime.authentication.cas.authorizedProxyChain"/>
            <!-- Basic parameters. -->
            <param-ref id="runtime.authentication.basic.realm"/>
        </config>
        <extensions>
            <!-- Mixed CAS-gateway/Basic credentials provider. -->
            <extension point="org.ametys.runtime.authentication.CredentialsProvider"
                       id="org.ametys.runtime.plugins.core.authentication.GatewayCASBasic"
                       class="org.ametys.runtime.plugins.core.authentication.mixed.CASBasicCredentialsProvider"
                       logger="org.ametys.runtime.plugins.core.authentication.casgateway.and.basic">
                <gateway>true</gateway>
            </extension>
        </extensions>
    </feature>
    
    <feature name="runtime.sending.mail">
        <!-- 
            This feature provides configuration parameters for sending mail
         -->
        <config>
            <param-ref id="smtp.mail.host"/>
            <param-ref id="smtp.mail.port"/>
            <param-ref id="smtp.mail.security.protocol"/>
            <param-ref id="smtp.mail.user"/>
            <param-ref id="smtp.mail.password"/>
            <param-ref id="smtp.mail.from"/>
            <param-ref id="smtp.mail.sysadminto"/>
        </config>
    </feature>
        
    <!-- +
         |  InitRequestHandler
         + -->
    <feature name="runtime.request.impl.default">
        <!-- 
            The default request handler... doing nothing
         -->
        <extensions>
            <extension point="org.ametys.runtime.request.InitRequestHandler"
                       id="org.ametys.runtime.plugins.core.request.Default"
                       class="org.ametys.runtime.request.DefaultInitRequestHandler"
                       logger="org.ametys.runtime.request.default"/>
        </extensions>
    </feature>
        
    <!-- +
         |  Monitoring
         + -->
    <feature name="runtime.monitoring">
        <!-- 
            Timer task for populating RRDs
         -->
        <components>
            <component role="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.RRDsFeederTimerTask"
                       class="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.RRDsFeederTimerTask"
                       logger="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.RRDsFeederTimerTask"/>
        </components>
        
        <extensions>
        	<!-- Monitor the uptime of the JVM -->
            <extension point="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.MonitoringExtensionPoint"
                       id="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.sample.UptimeSampleManager"
                       class="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.sample.UptimeSampleManager"
                       logger="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.sample.UptimeSampleManager">
            	<id>uptime</id>
            	<label i18n="true">PLUGINS_CORE_ADMINISTRATOR_STATUS_MONITORING_UPTIME_LABEL</label>
            	<description i18n="true">PLUGINS_CORE_ADMINISTRATOR_STATUS_MONITORING_UPTIME_DESCRIPTION</description>
            </extension>
        	<!-- Monitor the throughput and the number of active HTTP requests -->
            <extension point="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.MonitoringExtensionPoint"
                       id="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.sample.HttpRequestSampleManager"
                       class="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.sample.HttpRequestSampleManager"
                       logger="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.sample.HttpRequestSampleManager">
            	<id>http-request</id>
            	<label i18n="true">PLUGINS_CORE_ADMINISTRATOR_STATUS_MONITORING_HTTPREQUEST_LABEL</label>
            	<description i18n="true">PLUGINS_CORE_ADMINISTRATOR_STATUS_MONITORING_HTTPREQUEST_DESCRIPTION</description>
            </extension>
        	<!-- Monitor the number of active HTTP sessions -->
            <extension point="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.MonitoringExtensionPoint"
                       id="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.sample.HttpSessionSampleManager"
                       class="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.sample.HttpSessionSampleManager"
                       logger="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.sample.HttpSessionSampleManager">
            	<id>http-session</id>
            	<label i18n="true">PLUGINS_CORE_ADMINISTRATOR_STATUS_MONITORING_HTTPSESSION_LABEL</label>
            	<description i18n="true">PLUGINS_CORE_ADMINISTRATOR_STATUS_MONITORING_HTTPSESSION_DESCRIPTION</description>
			</extension>
        	<!-- Monitor the number of live threads (total and daemon) -->
            <extension point="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.MonitoringExtensionPoint"
                       id="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.sample.ThreadSampleManager"
                       class="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.sample.ThreadSampleManager"
                       logger="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.sample.ThreadSampleManager">
            	<id>thread</id>
            	<label i18n="true">PLUGINS_CORE_ADMINISTRATOR_STATUS_MONITORING_THREAD_LABEL</label>
            	<description i18n="true">PLUGINS_CORE_ADMINISTRATOR_STATUS_MONITORING_THREAD_DESCRIPTION</description>
            </extension>
        	<!-- Monitor the JVM heap memory status -->
            <extension point="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.MonitoringExtensionPoint"
                       id="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.sample.HeapMemorySampleManager"
                       class="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.sample.HeapMemorySampleManager"
                       logger="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.sample.HeapMemorySampleManager">
            	<id>memory-heap</id>
            	<label i18n="true">PLUGINS_CORE_ADMINISTRATOR_STATUS_MONITORING_MEMORYHEAP_LABEL</label>
            	<description i18n="true">PLUGINS_CORE_ADMINISTRATOR_STATUS_MONITORING_MEMORYHEAP_DESCRIPTION</description>
            </extension>
        	<!-- Monitor the JVM non heap memory status -->
            <extension point="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.MonitoringExtensionPoint"
                       id="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.sample.NonHeapMemorySampleManager"
                       class="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.sample.NonHeapMemorySampleManager"
                       logger="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.sample.NonHeapMemorySampleManager">
            	<id>memory-non-heap</id>
            	<label i18n="true">PLUGINS_CORE_ADMINISTRATOR_STATUS_MONITORING_MEMORYNONHEAP_LABEL</label>
            	<description i18n="true">PLUGINS_CORE_ADMINISTRATOR_STATUS_MONITORING_MEMORYNONHEAP_DESCRIPTION</description>
            </extension>
        	<!-- Monitor the JVM non heap memory status -->
            <extension point="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.MonitoringExtensionPoint"
                       id="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.sample.CPUSampleManager"
                       class="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.sample.CPUSampleManager"
                       logger="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.sample.CPUSampleManager">
            	<id>cpu</id>
            	<label i18n="true">PLUGINS_CORE_ADMINISTRATOR_STATUS_MONITORING_CPU_LABEL</label>
            	<description i18n="true">PLUGINS_CORE_ADMINISTRATOR_STATUS_MONITORING_CPU_DESCRIPTION</description>
            </extension>
        	<!-- Monitor the disk I/O operations -->
            <extension point="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.MonitoringExtensionPoint"
                       id="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.sample.DiskIOSampleManager"
                       class="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.sample.DiskIOSampleManager"
                       logger="org.ametys.runtime.plugins.core.administrator.jvmstatus.monitoring.sample.DiskIOSampleManager">
            	<id>disk-io</id>
            	<label i18n="true">PLUGINS_CORE_ADMINISTRATOR_STATUS_MONITORING_DISKIO_LABEL</label>
            	<description i18n="true">PLUGINS_CORE_ADMINISTRATOR_STATUS_MONITORING_DISKIO_DESCRIPTION</description>
            </extension>
        </extensions>
    </feature>
    
    <feature name="runtime.user.preferences.manager">
        <components>
            <component role="org.ametys.runtime.plugins.core.userpref.UserPreferencesManager"
                       class="org.ametys.runtime.plugins.core.userpref.UserPreferencesManager"
                       logger="org.ametys.runtime.plugins.core.userpref.UserPreferencesManager">
                <default-storage-role>org.ametys.runtime.plugins.core.userpref.DefaultUserPreferencesStorage</default-storage-role>
            </component>
        </components>
    </feature>

    <feature name="runtime.user.preferences.empty">
        <!-- 
            A users'preferences manager that do not store anything. Usefull, if you do not user users prefs. 
        -->
    	<extensions>
    		<extension point="org.ametys.runtime.plugins.core.userpref.DefaultUserPreferencesStorage"
        	           id="org.ametys.runtime.plugins.core.userpref.EmptyUserPreferencesStorage"
        	           class="org.ametys.runtime.plugins.core.userpref.EmptyUserPreferencesStorage">
        	</extension>
    	</extensions>
    </feature>
    
    <feature name="runtime.user.preferences.default" depends="runtime.datasource.core">
        <!-- 
            The main users'preferences manager implementation, that do store users'prefs into a sql db. 
        -->
        	<extensions>
    		<extension point="org.ametys.runtime.plugins.core.userpref.DefaultUserPreferencesStorage"
        	           id="org.ametys.runtime.plugins.core.userpref.JdbcXmlUserPreferencesStorage"
        	           class="org.ametys.runtime.plugins.core.userpref.JdbcXmlUserPreferencesStorage">
	            <pool>runtime.datasource.core.jdbc.pool</pool>
        		<table>UserPreferences</table>
        	</extension>
    	</extensions>
    </feature>
    
    <feature name="observation">       
        <components>
            <component role="org.ametys.runtime.observation.ObservationManager"
                       class="org.ametys.runtime.observation.ObservationManager">
                <!-- Manager for dispatching Event instances to Observers -->
            </component>
        </components>
    </feature>
    
    <feature name="xslt.helpers">
        <components>
            <component class="org.ametys.runtime.plugins.core.ui.AmetysXSLTHelper" role="org.ametys.runtime.plugins.core.ui.AmetysXSLTHelper"/>
        </components>
    </feature>
    
</plugin>