<?xml version="1.0" encoding="UTF-8"?>
<!--
   Copyright 2015 Anyware Services

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
   -->
<plugin xmlns="http://www.ametys.org/schema/plugin"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.ametys.org/schema/plugin http://www.ametys.org/schema/plugin-4.0.xsd"
        runtimeVersion="4.0" version="4.0">
    
    <config>
    	<!-- +
             | ALLOW SYSTEM ALERTS
             + -->
    	<param id="runtime.system.alerts.enable" type="boolean" group-switch="true">
        	<!-- 
        		This parameter indicates if we enable the system alerts.
        	 -->
        	<label i18n="true">PLUGINS_ADMIN_SYSTEM_ALERT_CONFIG_ENABLE_LABEL</label>
            <description i18n="true">PLUGINS_ADMIN_SYSTEM_ALERT_CONFIG_ENABLE_DESCRIPTION</description>
        	<default-value>false</default-value>
        	<category i18n="true">PLUGINS_ADMIN_SYSTEM_ALERT_CONFIG_CATEGORY</category>
            <group i18n="true">PLUGINS_ADMIN_SYSTEM_ALERT_CONFIG_GROUP</group>
            <order>1</order>
        </param>
        
        <!-- tmp test -->
        <param id="runtime.test.long" type="long">
            <label i18n="false">Test pour les seuils long</label>
            <description i18n="false">Test pour les seuils long</description>      
            <default-value>1</default-value>
            <category i18n="true">PLUGINS_ADMIN_SYSTEM_ALERT_CONFIG_CATEGORY</category>
            <group i18n="true">PLUGINS_ADMIN_SYSTEM_ALERT_CONFIG_GROUP</group>
            <order>3</order>
        </param>
        <param id="runtime.test.double" type="double">
            <label i18n="false">Test pour les seuils double</label>
            <description i18n="false">Test pour les seuils double</description>      
            <default-value>1.5</default-value>
            <category i18n="true">PLUGINS_ADMIN_SYSTEM_ALERT_CONFIG_CATEGORY</category>
            <group i18n="true">PLUGINS_ADMIN_SYSTEM_ALERT_CONFIG_GROUP</group>
            <order>4</order>
        </param>
        
        <!-- +
             | AMETYS HOME THRESHOLD
             + -->
        <param id="runtime.system.alerts.diskspace.threshold" type="long">
            <!-- 
                The limit size of free disk space (in MegaBytes).
             -->
            <label i18n="true">PLUGINS_ADMIN_SYSTEM_ALERT_CONFIG_AMETYSHOME_LIMIT_SIZE_LABEL</label>
            <description i18n="true">PLUGINS_ADMIN_SYSTEM_ALERT_CONFIG_AMETYSHOME_LIMIT_SIZE_DESCRIPTION</description>      
            <default-value>2048</default-value>
            <category i18n="true">PLUGINS_ADMIN_SYSTEM_ALERT_CONFIG_CATEGORY</category>
            <group i18n="true">PLUGINS_ADMIN_SYSTEM_ALERT_CONFIG_GROUP</group>
            <order>2</order>
        </param>
    </config>
        
    <extension-points>
        <extension-point id="org.ametys.runtime.plugins.admin.jvmstatus.monitoring.MonitoringExtensionPoint"
                         class="org.ametys.runtime.plugins.admin.jvmstatus.monitoring.MonitoringExtensionPoint"
                         safe="true"/>
        
        <extension-point id="org.ametys.runtime.plugins.admin.notificator.AdministratorNotificatorExtensionPoint"
                         class="org.ametys.runtime.plugins.admin.notificator.AdministratorNotificatorExtensionPoint"
                         safe="true"/>
    </extension-points>
    
    <feature name="staticimports.misc" safe="true">
        <extensions>
            <extension id="org.ametys.runtime.plugins.admin.Misc"
                       point="org.ametys.core.ui.StaticFileImportsManager"
                       class="org.ametys.core.ui.StaticFileImportsClientSideElement">
                <scripts>
                    <file>js/Ametys/plugins/admin/Constants.js</file>
                </scripts>
            </extension>
        </extensions>
    </feature>
    
    <feature name="runtime.admin.notifications" safe="true">
        <extensions>
            <extension id="org.ametys.runtime.plugins.admin.AdministratorNotifications"
                       point="org.ametys.core.ui.StaticFileImportsManager"
                       class="org.ametys.core.ui.StaticFileImportsClientSideElement">
                <scripts>
                    <file>js/Ametys/plugins/admin/notificator/AdministratorNotificator.js</file>
                </scripts>
            </extension>
        </extensions>
    </feature>
    
    <!-- +
         |  WELCOME ANNOUNCEMENTS
         + --> 
    <feature name="runtime.admin.system" safe="true">
        <components>
            <component role="org.ametys.runtime.plugins.admin.system.SystemHelper"
                       id="org.ametys.runtime.plugins.admin.system.SystemHelper"
                       class="org.ametys.runtime.plugins.admin.system.SystemHelper"/>
        </components>
        
        <extensions>
            <extension id="org.ametys.plugins.admin.SystemTab"
                       point="org.ametys.core.ui.RibbonTabsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.tab.TabController">
                    <tool-id>^(uitool-admin-system)$</tool-id>
                </class>
            </extension>
            
            <extension id="org.ametys.plugins.admin.System"  
                       point="org.ametys.core.ui.RibbonControlsManager" 
                       class="org.ametys.runtime.plugins.admin.system.SystemAnnouncementClientSideElement">
                <!-- 
                    This interaction allows the administrator to handle the system welcoming message
                 -->
                 <class name="Ametys.plugins.admin.system.SystemAnnouncementController">
                    <opentool-id>uitool-admin-system</opentool-id>
                    
                    <label i18n="true">PLUGINS_ADMIN_SYSTEM_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_SYSTEM_DESCRIPTION</description>
                    
                    <announcement-on-description i18n="true">PLUGINS_ADMIN_SYSTEM_DESCRIPTION_ON</announcement-on-description>
                    <announcement-off-description i18n="true">PLUGINS_ADMIN_SYSTEM_DESCRIPTION_OFF</announcement-off-description>
                    
                    <icon-glyph>ametysicon-megaphone19</icon-glyph>
                    <icon-small file="true">img/system/announcement_16.png</icon-small>
                    <icon-medium file="true">img/system/announcement_32.png</icon-medium>
                    <icon-large file="true">img/system/announcement_48.png</icon-large>

                    <announcement-on-icon-small file="true">img/system/announcement_on_16.png</announcement-on-icon-small>
                    <announcement-on-icon-medium file="true">img/system/announcement_on_32.png</announcement-on-icon-medium>
                    <announcement-on-icon-large file="true">img/system/announcement_on_48.png</announcement-on-icon-large>
                    
                    <announcement-off-icon-small file="true">img/system/announcement_off_16.png</announcement-off-icon-small>
                    <announcement-off-icon-medium file="true">img/system/announcement_off_32.png</announcement-off-icon-medium>
                    <announcement-off-icon-large file="true">img/system/announcement_off_48.png</announcement-off-icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/system/SystemTool.js</file>
                    <file>js/Ametys/plugins/admin/system/SystemAnnouncementController.js</file>
                </scripts>
                <depends>
                    <org.ametys.core.ui.UIToolsFactoriesManager>uitool-admin-system</org.ametys.core.ui.UIToolsFactoriesManager>
                </depends>
            </extension> 
            
            <extension id="uitool-admin-system"
                       point="org.ametys.core.ui.UIToolsFactoriesManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.tool.factory.UniqueToolFactory">
                    <toolClass>Ametys.plugins.admin.tool.SystemTool</toolClass>
                    
                    <title i18n="true">PLUGINS_ADMIN_SYSTEM_LABEL</title>
                    <description i18n="true">PLUGINS_ADMIN_SYSTEM_DESCRIPTION</description>
                    
                    <icon-glyph>ametysicon-megaphone19</icon-glyph>
                    <icon-small file="true">img/system/announcement_16.png</icon-small>
                    <icon-medium file="true">img/system/announcement_32.png</icon-medium>
                    <icon-large file="true">img/system/announcement_48.png</icon-large>
                    
                    <default-location>cl</default-location>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/system/SystemTool.js</file>
                </scripts>
            </extension>
            
            <extension id="org.ametys.plugins.admin.system.Add"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.admin.system.SystemActions.addMessage</action>
                
                    <label i18n="true">PLUGINS_ADMIN_SYSTEM_ANNOUNCEMENT_ADD_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_SYSTEM_ANNOUNCEMENT_ADD_DESC</description>

                    <icon-glyph>ametysicon-megaphone19</icon-glyph>
                    <icon-decorator>decorator-ametysicon-add64</icon-decorator>
                    <icon-small file="true">img/system/add_announcement_16.png</icon-small>
                    <icon-medium file="true">img/system/add_announcement_32.png</icon-medium>
                    <icon-large file="true">img/system/add_announcement_48.png</icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/system/SystemActions.js</file>
                </scripts>
            </extension>
            
            <extension id="org.ametys.plugins.admin.system.Edit"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.admin.system.SystemActions.editMessage</action>
                
                    <selection-target-id>^system-announcement-message</selection-target-id>
                
                    <label i18n="true">PLUGINS_ADMIN_SYSTEM_ANNOUNCEMENT_EDIT_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_SYSTEM_ANNOUNCEMENT_EDIT_DESC</description>

                    <icon-glyph>ametysicon-megaphone19</icon-glyph>
                    <icon-decorator>decorator-ametysicon-edit45</icon-decorator>
                    <icon-small file="true">img/system/edit_announcement_16.png</icon-small>
                    <icon-medium file="true">img/system/edit_announcement_32.png</icon-medium>
                    <icon-large file="true">img/system/edit_announcement_48.png</icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/system/SystemActions.js</file>
                </scripts>
            </extension>
            
            <extension id="org.ametys.plugins.admin.system.Delete"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.admin.system.SystemActions.deleteMessage</action>
                
                    <selection-target-id>^system-announcement-message$</selection-target-id>
                    <selection-target-parameter>
                        <name>^language$</name>
                        <value>!\*</value>
                    </selection-target-parameter> 
                
                    <label i18n="true">PLUGINS_ADMIN_SYSTEM_ANNOUNCEMENT_DELETE_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_SYSTEM_ANNOUNCEMENT_DELETE_DESC</description>

                    <icon-glyph>ametysicon-megaphone19</icon-glyph>
                    <icon-decorator>decorator-ametysicon-remove11</icon-decorator>
                    <icon-small file="true">img/system/delete_announcement_16.png</icon-small>
                    <icon-medium file="true">img/system/delete_announcement_32.png</icon-medium>
                    <icon-large file="true">img/system/delete_announcement_48.png</icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/system/SystemActions.js</file>
                </scripts>
            </extension>
            
            <extension id="org.ametys.plugins.admin.system.SetAnnouncement"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.runtime.plugins.admin.system.SystemAnnouncementClientSideElement">
                <class name="Ametys.plugins.admin.system.SystemAnnouncementController">
                    <!--initialize>Ametys.plugins.admin.actions.SystemActions.initializeToggleState</initialize-->
                    <action>Ametys.plugins.admin.system.SystemActions.setAnnouncementAvailable</action>

                    <toggle-enabled>true</toggle-enabled>
                
                    <label i18n="true">PLUGINS_ADMIN_SYSTEM_ANNOUNCEMENT_SET_ANNOUNCEMENT_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_SYSTEM_ANNOUNCEMENT_SET_ANNOUNCEMENT_DESC</description>
                    <icon-glyph>ametysicon-megaphone19</icon-glyph>
                    <icon-small file="true">img/system/activate_16.png</icon-small>
                    <icon-medium file="true">img/system/activate_32.png</icon-medium>
                    <icon-large file="true">img/system/activate_48.png</icon-large>
                    
                    <announcement-on-icon-decorator>decorator-ametysicon-stop5</announcement-on-icon-decorator>
                    <announcement-on-description i18n="true">PLUGINS_ADMIN_SYSTEM_ANNOUNCEMENT_SET_ANNOUNCEMENT_OFF_DESC</announcement-on-description>
                    
                    <announcement-off-icon-decorator>decorator-ametysicon-check34</announcement-off-icon-decorator>
                    <announcement-off-description i18n="true">PLUGINS_ADMIN_SYSTEM_ANNOUNCEMENT_SET_ANNOUNCEMENT_ON_DESC</announcement-off-description>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/system/SystemActions.js</file>
                    <file>js/Ametys/plugins/admin/system/SystemAnnouncementController.js</file>
                </scripts>
            </extension>
        </extensions>
    </feature>
    
    <!-- +
         |  PLUGINS AND WORKSPACES
         + --> 
    <feature name="runtime.admin.plugins" safe="true">
        <extensions>
                      
            <extension id="org.ametys.plugins.admin.PluginsByFileTab"
                       point="org.ametys.core.ui.RibbonTabsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.tab.TabController">
                    <tool-id>^(uitool-admin-pluginsbyfile)$</tool-id>
                </class>
            </extension>
            
            <extension id="org.ametys.plugins.admin.PluginsByExtensionPointTab"
                       point="org.ametys.core.ui.RibbonTabsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.tab.TabController">
                    <tool-id>^(uitool-admin-pluginsbyextensionpoint)$</tool-id>
                </class>
            </extension>
            
            <!-- Tools -->
            <extension id="org.ametys.plugins.admin.PluginsByFile"  
                       point="org.ametys.core.ui.RibbonControlsManager" 
                       class="org.ametys.core.ui.StaticClientSideElement">
                <!-- 
                    This interaction allows the administrator to see plugins by file. Useful for developers.
                 -->
                <class name="Ametys.ribbon.element.ui.button.OpenToolButtonController">
                    <opentool-id>uitool-admin-pluginsbyfile</opentool-id>
                    
                    <label i18n="true">PLUGINS_ADMIN_TOOL_PLUGINSBYFILE_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_TOOL_PLUGINSBYFILE_DESC</description>
                    
                    <icon-glyph>ametysicon-puzzle-piece1</icon-glyph>
                    <icon-small file="true">img/plugins/plugins_16.png</icon-small>
                    <icon-medium file="true">img/plugins/plugins_32.png</icon-medium>
                    <icon-large file="true">img/plugins/plugins_48.png</icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/plugins/PluginsTool.js</file>
                </scripts>
                <depends>
                    <org.ametys.core.ui.UIToolsFactoriesManager>uitool-admin-pluginsbyfile</org.ametys.core.ui.UIToolsFactoriesManager>
                </depends>
            </extension>
            
            <extension id="uitool-admin-pluginsbyfile"  
                       point="org.ametys.core.ui.UIToolsFactoriesManager" 
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.tool.factory.UniqueToolFactory">
                    <toolClass>Ametys.plugins.admin.plugins.PluginsTool</toolClass>
                    
                    <proxyUrl>plugins-by-file</proxyUrl>
                    
                    <title i18n="true">PLUGINS_ADMIN_TOOL_PLUGINSBYFILE_LABEL</title>
                    <description i18n="true">PLUGINS_ADMIN_TOOL_PLUGINSBYFILE_DESC</description>
                    
                    <icon-glyph>ametysicon-puzzle-piece1</icon-glyph>
                    <icon-small file="true">img/plugins/plugins_16.png</icon-small>
                    <icon-medium file="true">img/plugins/plugins_32.png</icon-medium>
                    <icon-large file="true">img/plugins/plugins_48.png</icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/plugins/PluginsTool.js</file>
                    <file>js/Ametys/plugins/admin/plugins/PluginsDAO.js</file>
                    <file>js/Ametys/plugins/admin/plugins/PluginsActions.js</file>
                </scripts>
                <default-location>cl</default-location>
            </extension>
            
            <extension id="org.ametys.plugins.admin.PluginsByExtensionPoint"  
                       point="org.ametys.core.ui.RibbonControlsManager" 
                       class="org.ametys.core.ui.StaticClientSideElement">
                <!-- 
                    This interaction allows the administrator to see plugins by file. Useful for developers.
                 -->
                <class name="Ametys.ribbon.element.ui.button.OpenToolButtonController">
                    <opentool-id>uitool-admin-pluginsbyextensionpoint</opentool-id>
                    
                    <label i18n="true">PLUGINS_ADMIN_TOOL_PLUGINSBYEXTENSIONPOINT_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_TOOL_PLUGINSBYEXTENSIONPOINT_DESC</description>
                    
                    <icon-glyph>ametysicon-puzzle-piece1</icon-glyph>
                    <icon-small file="true">img/plugins/plugins_ep_16.png</icon-small>
                    <icon-medium file="true">img/plugins/plugins_ep_32.png</icon-medium>
                    <icon-large file="true">img/plugins/plugins_ep_48.png</icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/plugins/PluginsTool/Plugin.js</file>
                    <file>js/Ametys/plugins/admin/plugins/PluginsTool.js</file>
                </scripts>
                <depends>
                    <org.ametys.core.ui.UIToolsFactoriesManager>uitool-admin-pluginsbyextensionpoint</org.ametys.core.ui.UIToolsFactoriesManager>
                </depends>
            </extension>
            
            <extension id="uitool-admin-pluginsbyextensionpoint"  
                       point="org.ametys.core.ui.UIToolsFactoriesManager" 
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.tool.factory.UniqueToolFactory">
                    <toolClass>Ametys.plugins.admin.plugins.PluginsTool</toolClass>
                        
                    <proxyUrl>plugins-by-extension-point</proxyUrl>
                        
                    <title i18n="true">PLUGINS_ADMIN_TOOL_PLUGINSBYEXTENSIONPOINT_LABEL</title>
                    <description i18n="true">PLUGINS_ADMIN_TOOL_PLUGINSBYEXTENSIONPOINT_DESC</description>
                    
                    <icon-glyph>ametysicon-puzzle-piece1</icon-glyph>
                    <icon-small file="true">img/plugins/plugins_ep_16.png</icon-small>
                    <icon-medium file="true">img/plugins/plugins_ep_32.png</icon-medium>
                    <icon-large file="true">img/plugins/plugins_ep_48.png</icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/plugins/PluginsTool.js</file>
                    <file>js/Ametys/plugins/admin/plugins/PluginsDAO.js</file>
                    <file>js/Ametys/plugins/admin/plugins/PluginsActions.js</file>
                </scripts>
                <default-location>cl</default-location>
            </extension>
            
            <extension id="org.ametys.plugins.admin.Workspaces"  
                       point="org.ametys.core.ui.RibbonControlsManager" 
                       class="org.ametys.core.ui.StaticClientSideElement">
                <!-- 
                    This interaction allows the administrator to see workspaces. Useful for developers.
                 -->
                <class name="Ametys.ribbon.element.ui.button.OpenToolButtonController">
                    <opentool-id>uitool-admin-workspaces</opentool-id>
                    
                    <label i18n="true">PLUGINS_ADMIN_TOOL_WORKSPACES_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_TOOL_WORKSPACES_DESC</description>
                    
                    <icon-glyph>ametysicon-abecedary4</icon-glyph>
                    <icon-small file="true">img/plugins/workspaces_16.png</icon-small>
                    <icon-medium file="true">img/plugins/workspaces_32.png</icon-medium>
                    <icon-large file="true">img/plugins/workspaces_48.png</icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/plugins/WorkspacesTool/Workspace.js</file>
                    <file>js/Ametys/plugins/admin/plugins/WorkspacesTool.js</file>
                </scripts>
                <depends>
                    <org.ametys.core.ui.UIToolsFactoriesManager>uitool-admin-workspaces</org.ametys.core.ui.UIToolsFactoriesManager>
                </depends>
            </extension>
            
            <extension id="uitool-admin-workspaces"  
                       point="org.ametys.core.ui.UIToolsFactoriesManager" 
                       class="org.ametys.core.ui.StaticClientSideElement">
                <!-- 
                    This interaction allows the administrator to see plugins by file. Useful for developers.
                 -->
                <class name="Ametys.tool.factory.UniqueToolFactory">
                    <toolClass>Ametys.plugins.admin.tool.WorkspacesTool</toolClass>
                    
                    <title i18n="true">PLUGINS_ADMIN_TOOL_WORKSPACES_LABEL</title>
                    <description i18n="true">PLUGINS_ADMIN_TOOL_WORKSPACES_DESC</description>
                    
                    <icon-glyph>ametysicon-abecedary4</icon-glyph>
                    <icon-small file="true">img/plugins/workspaces_16.png</icon-small>
                    <icon-medium file="true">img/plugins/workspaces_32.png</icon-medium>
                    <icon-large file="true">img/plugins/workspaces_48.png</icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/plugins/WorkspacesTool.js</file>
                    <file>js/Ametys/plugins/admin/plugins/WorkspacesTool/Workspace.js</file>
                </scripts>
                <default-location>cl</default-location>
            </extension>
            
            <extension id="org.ametys.plugins.admin.plugins.Documentation"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.admin.plugins.PluginsActions.showDocumentation</action>
                    <selection-target-id>^(plugin-by-file-node|plugin-by-extension-point-node)$</selection-target-id>
                
                    <label i18n="true">PLUGINS_ADMIN_PLUGINS_DOCUMENTATION_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_PLUGINS_DOCUMENTATION_DESC</description>

                    <icon-glyph>ametysicon-question13</icon-glyph>
                    <icon-small file="true">img/plugins/documentation_16.png</icon-small>
                    <icon-medium file="true">img/plugins/documentation_32.png</icon-medium>
                    <icon-large file="true">img/plugins/documentation_48.png</icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/plugins/PluginsDAO.js</file>
                    <file>js/Ametys/plugins/admin/plugins/PluginsActions.js</file>
                </scripts>
            </extension>
            
            <extension id="org.ametys.plugins.admin.plugins.Activate"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.admin.plugins.PluginsActions.activate</action>
                    
                    <selection-target-id>^(plugin-by-file-node|plugin-by-extension-point-node)$</selection-target-id>
                    <selection-target-parameter>
                        <name>^inactiveFeature$</name>
                        <value>true</value>
                    </selection-target-parameter>                    
                
                    <label i18n="true">PLUGINS_ADMIN_PLUGINS_ACTIVATE_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_PLUGINS_ACTIVATE_DESC</description>

                    <icon-glyph>ametysicon-checked34</icon-glyph>
                    <icon-small file="true">img/plugins/activate_16.png</icon-small>
                    <icon-medium file="true">img/plugins/activate_32.png</icon-medium>
                    <icon-large file="true">img/plugins/activate_48.png</icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/plugins/PluginsDAO.js</file>
                    <file>js/Ametys/plugins/admin/plugins/PluginsActions.js</file>
                </scripts>
            </extension>
            
            <extension id="org.ametys.plugins.admin.plugins.Deactivate"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.admin.plugins.PluginsActions.deactivate</action>
                    
                    <selection-target-id>^(plugin-by-file-node|plugin-by-extension-point-node)$</selection-target-id>
                    <selection-target-parameter>
                        <name>^activeFeature$</name>
                        <value>true</value>
                    </selection-target-parameter>                    
                
                    <label i18n="true">PLUGINS_ADMIN_PLUGINS_DEACTIVATE_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_PLUGINS_DEACTIVATE_DESC</description>

                    <icon-glyph>ametysicon-stop5</icon-glyph>
                    <icon-small file="true">img/plugins/deactivate_16.png</icon-small>
                    <icon-medium file="true">img/plugins/deactivate_32.png</icon-medium>
                    <icon-large file="true">img/plugins/deactivate_48.png</icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/plugins/PluginsDAO.js</file>
                    <file>js/Ametys/plugins/admin/plugins/PluginsActions.js</file>
                </scripts>
            </extension>
            
            <extension id="org.ametys.plugins.admin.plugins.Select"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.admin.plugins.PluginsActions.select</action>
                    
                    <selection-target-id>^(plugin-by-file-node|plugin-by-extension-point-node)$</selection-target-id>
                    <selection-target-parameter>
                        <name>selectable</name>
                        <value>true</value>
                    </selection-target-parameter>                    
                
                    <label i18n="true">PLUGINS_ADMIN_PLUGINS_SELECT_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_PLUGINS_SELECT_DESC</description>

                    <icon-glyph>ametysicon-check51</icon-glyph>
                    <icon-small file="true">img/plugins/select_16.png</icon-small>
                    <icon-medium file="true">img/plugins/select_32.png</icon-medium>
                    <icon-large file="true">img/plugins/select_48.png</icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/plugins/PluginsDAO.js</file>
                    <file>js/Ametys/plugins/admin/plugins/PluginsActions.js</file>
                </scripts>
            </extension>
            
            <extension id="org.ametys.plugins.admin.plugins.SaveChanges"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.plugins.admin.plugins.SaveChangesController">
                    <action>Ametys.plugins.admin.plugins.PluginsActions.saveChanges</action>
                    
                    <disabled>true</disabled>
                    
                    <label i18n="true">PLUGINS_ADMIN_PLUGINS_SAVE_CHANGES_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_PLUGINS_SAVE_CHANGES_DESC</description>

                    <icon-glyph>ametysicon-save31</icon-glyph>
                    <icon-small file="true">img/plugins/save_16.png</icon-small>
                    <icon-medium file="true">img/plugins/save_32.png</icon-medium>
                    <icon-large file="true">img/plugins/save_48.png</icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/plugins/PluginsDAO.js</file>
                    <file>js/Ametys/plugins/admin/plugins/PluginsActions.js</file>
                    <file>js/Ametys/plugins/admin/plugins/SaveChangesController.js</file>
                </scripts>
            </extension>
            
            <extension id="org.ametys.plugins.admin.plugins.CancelChanges"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.plugins.admin.plugins.SaveChangesController">
                    <action>Ametys.plugins.admin.plugins.PluginsActions.cancelChanges</action>
                    
                    <disabled>true</disabled>
                    
                    <label i18n="true">PLUGINS_ADMIN_PLUGINS_CANCEL_CHANGES_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_PLUGINS_CANCEL_CHANGES_DESC</description>

                    <icon-glyph>ametysicon-save31</icon-glyph>
                    <icon-decorator>decorator-ametysicon-remove11</icon-decorator>
                    <icon-small file="true">img/plugins/unsave_16.png</icon-small>
                    <icon-medium file="true">img/plugins/unsave_32.png</icon-medium>
                    <icon-large file="true">img/plugins/unsave_48.png</icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/plugins/PluginsDAO.js</file>
                    <file>js/Ametys/plugins/admin/plugins/PluginsActions.js</file>
                    <file>js/Ametys/plugins/admin/plugins/SaveChangesController.js</file>
                </scripts>
            </extension>
        </extensions>
    </feature>
    
    <!-- +
         |  LOGS
         + -->   
    <feature name="runtime.admin.logs" safe="true">
        <extensions>
                
            <extension id="org.ametys.plugins.admin.LogsTab"
                       point="org.ametys.core.ui.RibbonTabsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.tab.TabController">
                    <tool-id>^(uitool-admin-logs)$</tool-id>
                </class>
            </extension>
            
            <extension id="org.ametys.plugins.admin.LogsLevelTab"
                       point="org.ametys.core.ui.RibbonTabsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.tab.TabController">
                    <tool-id>^(uitool-admin-logslevel)$</tool-id>
                </class>
            </extension>
            
            <extension id="org.ametys.plugins.admin.Logs"  
                       point="org.ametys.core.ui.RibbonControlsManager" 
                       class="org.ametys.core.ui.StaticClientSideElement">
                <!-- 
                    This button opens the logs' visualization tool
                 -->
                <class name="Ametys.ribbon.element.ui.button.OpenToolButtonController">
                    <opentool-id>uitool-admin-logs</opentool-id>
                    
                    <label i18n="true">PLUGINS_ADMIN_TOOL_LOGS_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_TOOL_LOGS_DESC</description>
                    
                    <icon-glyph>ametysicon-log1</icon-glyph>
                    <icon-small file="true">img/logs/logs_16.png</icon-small>
                    <icon-medium file="true">img/logs/logs_32.png</icon-medium>
                    <icon-large file="true">img/logs/logs_48.png</icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/logs/LogsTool/Log.js</file>
                    <file>js/Ametys/plugins/admin/logs/LogsTool.js</file>
                </scripts>
                <depends>
                    <org.ametys.core.ui.UIToolsFactoriesManager>uitool-admin-logs</org.ametys.core.ui.UIToolsFactoriesManager>
                </depends>
            </extension>
            
            <extension id="uitool-admin-logs"
                       point="org.ametys.core.ui.UIToolsFactoriesManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.tool.factory.UniqueToolFactory">
                    <toolClass>Ametys.plugins.admin.logs.LogsTool</toolClass>
                    
                    <title i18n="true">PLUGINS_ADMIN_TOOL_LOGS_LABEL</title>
                    <description i18n="true">PLUGINS_ADMIN_TOOL_LOGS_DESC</description>
                    
                    <icon-glyph>ametysicon-log1</icon-glyph>
                    <icon-small file="true">img/logs/logs_16.png</icon-small>
                    <icon-medium file="true">img/logs/logs_32.png</icon-medium>
                    <icon-large file="true">img/logs/logs_48.png</icon-large>
                    
                    <default-location>cl</default-location>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/logs/LogsTool.js</file>
                </scripts>
            </extension>
            
            <extension id="org.ametys.plugins.admin.LogsLevel"  
                       point="org.ametys.core.ui.RibbonControlsManager" 
                       class="org.ametys.core.ui.StaticClientSideElement">
                <!-- 
                    This button opens the logs' configuration tool
                 -->
                <class name="Ametys.ribbon.element.ui.button.OpenToolButtonController">
                    <opentool-id>uitool-admin-logslevel</opentool-id>
                    
                    <label i18n="true">PLUGINS_ADMIN_TOOL_LOGS_LEVEL_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_TOOL_LOGS_LEVEL_DESC</description>
                    
                    <icon-glyph>ametysicon-log1</icon-glyph>
                    <icon-decorator>decorator-ametysicon-gear39</icon-decorator>
                    <icon-small file="true">img/logs/loglevel_16.png</icon-small>
                    <icon-medium file="true">img/logs/loglevel_32.png</icon-medium>
                    <icon-large file="true">img/logs/loglevel_48.png</icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/logs/LogsLevelTool/Category.js</file>
                    <file>js/Ametys/plugins/admin/logs/LogsLevelTool.js</file>
                </scripts>
                <depends>
                    <org.ametys.core.ui.UIToolsFactoriesManager>uitool-admin-logslevel</org.ametys.core.ui.UIToolsFactoriesManager>
                </depends>
            </extension>
            
            <extension id="uitool-admin-logslevel"
                       point="org.ametys.core.ui.UIToolsFactoriesManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.tool.factory.UniqueToolFactory">
                    <toolClass>Ametys.plugins.admin.logs.LogsLevelTool</toolClass>
                    
                    <title i18n="true">PLUGINS_ADMIN_TOOL_LOGS_LEVEL_LABEL</title>
                    <description i18n="true">PLUGINS_ADMIN_TOOL_LOGS_LEVEL_DESC</description>
                    
                    <icon-glyph>ametysicon-log1</icon-glyph>
                    <icon-decorator>decorator-ametysicon-gear39</icon-decorator>
                    <icon-small file="true">img/logs/loglevel_16.png</icon-small>
                    <icon-medium file="true">img/logs/loglevel_32.png</icon-medium>
                    <icon-large file="true">img/logs/loglevel_48.png</icon-large>
                    
                    <default-location>cl</default-location>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/logs/LogsLevelTool.js</file>
                </scripts>
            </extension> 
            
            <extension id="org.ametys.plugins.admin.logs.View"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.admin.logs.LogsActions.view</action>
                    <selection-target-id>^logfile$</selection-target-id>
                    <selection-enable-multiselection>false</selection-enable-multiselection>

                    <label i18n="true">PLUGINS_ADMIN_LOGS_VIEW_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_LOGS_VIEW_DESC</description>

                    <icon-glyph>ametysicon-log1</icon-glyph>
                    <icon-small file="true">img/logs/view_16.png</icon-small>
                    <icon-medium file="true">img/logs/view_32.png</icon-medium>
                    <icon-large file="true">img/logs/view_48.png</icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/logs/LogsActions.js</file>
                </scripts>
            </extension>  
            
            <extension id="org.ametys.plugins.admin.logs.Download"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.admin.logs.LogsActions.download</action>
                    <selection-target-id>^logfile$</selection-target-id>

                    <label i18n="true">PLUGINS_ADMIN_LOGS_DOWNLOAD_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_LOGS_DOWNLOAD_DESC</description>

                    <icon-glyph>ametysicon-zip14</icon-glyph>
                    <icon-small file="true">img/logs/download_16.png</icon-small>
                    <icon-medium file="true">img/logs/download_32.png</icon-medium>
                    <icon-large file="true">img/logs/download_48.png</icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/logs/LogsActions.js</file>
                </scripts>
            </extension>                        
            
            <extension id="org.ametys.plugins.admin.logs.Delete"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.runtime.plugins.admin.logs.LogsClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.admin.logs.LogsActions.deleteFile</action>
                    <selection-target-id>^logfile$</selection-target-id>
                    
                    <label i18n="true">PLUGINS_ADMIN_LOGS_DELETE_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_LOGS_DELETE_DESC</description>

                    <icon-glyph>ametysicon-log1</icon-glyph>
                    <icon-decorator>decorator-ametysicon-remove11</icon-decorator>
                    <icon-small file="true">img/logs/delete_16.png</icon-small>
                    <icon-medium file="true">img/logs/delete_32.png</icon-medium>
                    <icon-large file="true">img/logs/delete_48.png</icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/logs/LogsActions.js</file>
                </scripts>
            </extension>                        
                                    
            <extension id="org.ametys.plugins.admin.logs.Purge"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.runtime.plugins.admin.logs.LogsClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.admin.logs.LogsActions.purge</action>
                
                    <label i18n="true">PLUGINS_ADMIN_LOGS_PURGE_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_LOGS_PURGE_DESC</description>

                    <icon-glyph>ametysicon-garbage11</icon-glyph>
                    <icon-small file="true">img/logs/clean_16.png</icon-small>
                    <icon-medium file="true">img/logs/clean_32.png</icon-medium>
                    <icon-large file="true">img/logs/clean_48.png</icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/logs/LogsActions.js</file>
                </scripts>
            </extension>
            
            <extension id="org.ametys.plugins.admin.logslevel.Debug"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.runtime.plugins.admin.logs.LogsClientSideElement">
                <class name="Ametys.plugins.admin.logs.LogLevelController">
                    <action>Ametys.plugins.admin.logs.LogsActions.changeLogLevel</action>
                    <selection-target-id>^(log-category)$</selection-target-id>
                    <selection-enable-multiselection>false</selection-enable-multiselection>
                    
                    <level>DEBUG</level>
                                        
                    <label i18n="true">PLUGINS_ADMIN_LOGS_LEVEL_DEBUG_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_LOGS_LEVEL_DEBUG_DESC</description>

                    <icon-small file="true">img/logs/level_debug_16.png</icon-small>
                    <icon-medium file="true">img/logs/level_debug_32.png</icon-medium>
                    <icon-large file="true">img/logs/level_debug_48.png</icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/logs/LogsActions.js</file>
                    <file>js/Ametys/plugins/admin/logs/LogLevelController.js</file>
                </scripts>
            </extension>
            
            <extension id="org.ametys.plugins.admin.logslevel.Info"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.runtime.plugins.admin.logs.LogsClientSideElement">
                <class name="Ametys.plugins.admin.logs.LogLevelController">
                    <action>Ametys.plugins.admin.logs.LogsActions.changeLogLevel</action>
                    <selection-target-id>^(log-category)$</selection-target-id>
                    <selection-enable-multiselection>false</selection-enable-multiselection>
                    
                    <level>INFO</level>
                
                    <label i18n="true">PLUGINS_ADMIN_LOGS_LEVEL_INFO_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_LOGS_LEVEL_INFO_DESC</description>

                    <icon-small file="true">img/logs/level_info_16.png</icon-small>
                    <icon-medium file="true">img/logs/level_info_32.png</icon-medium>
                    <icon-large file="true">img/logs/level_info_48.png</icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/logs/LogsActions.js</file>
                    <file>js/Ametys/plugins/admin/logs/LogLevelController.js</file>
                </scripts>
            </extension>
            
            <extension id="org.ametys.plugins.admin.logslevel.Warn"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.runtime.plugins.admin.logs.LogsClientSideElement">
                <class name="Ametys.plugins.admin.logs.LogLevelController">
                    <action>Ametys.plugins.admin.logs.LogsActions.changeLogLevel</action>
                    <selection-target-id>^(log-category)$</selection-target-id>
                    <selection-enable-multiselection>false</selection-enable-multiselection>
                    
                    <level>WARN</level>
                    
                    <label i18n="true">PLUGINS_ADMIN_LOGS_LEVEL_WARN_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_LOGS_LEVEL_WARN_DESC</description>

                    <icon-small file="true">img/logs/level_warn_16.png</icon-small>
                    <icon-medium file="true">img/logs/level_warn_32.png</icon-medium>
                    <icon-large file="true">img/logs/level_warn_48.png</icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/logs/LogsActions.js</file>
                    <file>js/Ametys/plugins/admin/logs/LogLevelController.js</file>
                </scripts>
            </extension>
            
            <extension id="org.ametys.plugins.admin.logslevel.Error"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.runtime.plugins.admin.logs.LogsClientSideElement">
                <class name="Ametys.plugins.admin.logs.LogLevelController">
                    <action>Ametys.plugins.admin.logs.LogsActions.changeLogLevel</action>
                    <selection-target-id>^(log-category)$</selection-target-id>
                    <selection-enable-multiselection>false</selection-enable-multiselection>
                    
                    <level>ERROR</level>
                
                    <label i18n="true">PLUGINS_ADMIN_LOGS_LEVEL_ERROR_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_LOGS_LEVEL_ERROR_DESC</description>

                    <icon-small file="true">img/logs/level_error_16.png</icon-small>
                    <icon-medium file="true">img/logs/level_error_32.png</icon-medium>
                    <icon-large file="true">img/logs/level_error_48.png</icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/logs/LogsActions.js</file>
                    <file>js/Ametys/plugins/admin/logs/LogLevelController.js</file>
                </scripts>
            </extension>
            
            <extension id="org.ametys.plugins.admin.logslevel.Inherit"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.runtime.plugins.admin.logs.LogsClientSideElement">
                <class name="Ametys.plugins.admin.logs.LogLevelController">
                    <action>Ametys.plugins.admin.logs.LogsActions.changeLogLevel</action>
                    <selection-target-id>^(log-category)$</selection-target-id>
                    <selection-enable-multiselection>false</selection-enable-multiselection>
                    
                    <level>INHERIT</level>
                
                    <label i18n="true">PLUGINS_ADMIN_LOGS_LEVEL_INHERIT_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_LOGS_LEVEL_INHERIT_DESC</description>

                    <icon-small file="true">img/logs/inherit_16.png</icon-small>
                    <icon-medium file="true">img/logs/inherit_32.png</icon-medium>
                    <icon-large file="true">img/logs/inherit_48.png</icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/logs/LogsActions.js</file>
                    <file>js/Ametys/plugins/admin/logs/LogLevelController.js</file>
                </scripts>
            </extension>
            
            <extension id="org.ametys.plugins.admin.logslevel.Force"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.runtime.plugins.admin.logs.LogsClientSideElement">
                <class name="Ametys.plugins.admin.logs.LogLevelController">
                    <action>Ametys.plugins.admin.logs.LogsActions.changeLogLevel</action>
                    <selection-target-id>^(log-category)$</selection-target-id>
                    <selection-enable-multiselection>false</selection-enable-multiselection>
                    
                    <level>FORCE</level>
                
                    <label i18n="true">PLUGINS_ADMIN_LOGS_LEVEL_FORCE_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_LOGS_LEVEL_FORCE_DESC</description>

                    <icon-small file="true">img/logs/force_16.png</icon-small>
                    <icon-medium file="true">img/logs/force_32.png</icon-medium>
                    <icon-large file="true">img/logs/force_48.png</icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/logs/LogsActions.js</file>
                    <file>js/Ametys/plugins/admin/logs/LogLevelController.js</file>
                </scripts>
            </extension>
        </extensions>
    </feature>
    
    <!-- +
         |  JVM STATUS
         + -->   
    <feature name="runtime.admin.jvmstatus" safe="true">
        <components>
            <component role="org.ametys.runtime.plugins.admin.jvmstatus.JVMStatusHelper"
                       id="org.ametys.runtime.plugins.admin.jvmstatus.JVMStatusHelper"
                       class="org.ametys.runtime.plugins.admin.jvmstatus.JVMStatusHelper"/>
        </components>
        
        <extensions>
            <extension id="org.ametys.plugins.admin.JVMStatus"  
                       point="org.ametys.core.ui.RibbonControlsManager" 
                       class="org.ametys.core.ui.StaticClientSideElement">
                <!-- 
                    This button opens the JVM status tool
                 -->
                <class name="Ametys.ribbon.element.ui.button.OpenToolButtonController">
                    <opentool-id>uitool-admin-jvmstatus</opentool-id>
                    
                    <label i18n="true">PLUGINS_ADMIN_TOOL_JVMSTATUS_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_TOOL_JVMSTATUS_DESC</description>
                    
                    <icon-glyph>ametysicon-transport10</icon-glyph>
                    <icon-small file="true">img/jvmstatus/jvmstatus_16.png</icon-small>
                    <icon-medium file="true">img/jvmstatus/jvmstatus_32.png</icon-medium>
                    <icon-large file="true">img/jvmstatus/jvmstatus_48.png</icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/jvmstatus/JVMStatusTool.js</file>
                </scripts>
                <depends>
                    <org.ametys.core.ui.UIToolsFactoriesManager>uitool-admin-jvmstatus</org.ametys.core.ui.UIToolsFactoriesManager>
                </depends>
            </extension>
            
            <extension id="uitool-admin-jvmstatus"
                       point="org.ametys.core.ui.UIToolsFactoriesManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.tool.factory.UniqueToolFactory">
                    <toolClass>Ametys.plugins.admin.jvmstatus.JVMStatusTool</toolClass>
                    
                    <title i18n="true">PLUGINS_ADMIN_TOOL_JVMSTATUS_LABEL</title>
                    <description i18n="true">PLUGINS_ADMIN_TOOL_JVMSTATUS_DESC</description>
                    
                    <icon-glyph>ametysicon-transport10</icon-glyph>
                    <icon-small file="true">img/jvmstatus/jvmstatus_16.png</icon-small>
                    <icon-medium file="true">img/jvmstatus/jvmstatus_32.png</icon-medium>
                    <icon-large file="true">img/jvmstatus/jvmstatus_48.png</icon-large>
                    
                    <default-location>cl</default-location>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/jvmstatus/JVMStatusTool.js</file>
                </scripts>
            </extension>
            
            <extension id="org.ametys.plugins.admin.SystemProperties"  
                       point="org.ametys.core.ui.RibbonControlsManager" 
                       class="org.ametys.core.ui.StaticClientSideElement">
                <!-- 
                    This button opens the system properties tool
                 -->
                <class name="Ametys.ribbon.element.ui.button.OpenToolButtonController">
                    <opentool-id>uitool-admin-systemproperties</opentool-id>
                    
                    <label i18n="true">PLUGINS_ADMIN_TOOL_SYSTEMPROPERTIES_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_TOOL_SYSTEMPROPERTIES_DESC</description>
                    
                    <icon-glyph>ametysicon-cpu6</icon-glyph>
                    <icon-small file="true">img/jvmstatus/properties_16.png</icon-small>
                    <icon-medium file="true">img/jvmstatus/properties_32.png</icon-medium>
                    <icon-large file="true">img/jvmstatus/properties_48.png</icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/jvmstatus/SystemPropertiesTool.js</file>
                </scripts>
                <depends>
                    <org.ametys.core.ui.UIToolsFactoriesManager>uitool-admin-systemproperties</org.ametys.core.ui.UIToolsFactoriesManager>
                </depends>
            </extension>
            
            <extension id="uitool-admin-systemproperties"
                       point="org.ametys.core.ui.UIToolsFactoriesManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.tool.factory.UniqueToolFactory">
                    <toolClass>Ametys.plugins.admin.jvmstatus.SystemPropertiesTool</toolClass>
                    
                    <title i18n="true">PLUGINS_ADMIN_TOOL_SYSTEMPROPERTIES_FACTORY_LABEL</title>
                    <description i18n="true">PLUGINS_ADMIN_TOOL_SYSTEMPROPERTIES_DESC</description>
                    
                    <icon-glyph>ametysicon-cpu6</icon-glyph>
                    <icon-small file="true">img/jvmstatus/properties_16.png</icon-small>
                    <icon-medium file="true">img/jvmstatus/properties_32.png</icon-medium>
                    <icon-large file="true">img/jvmstatus/properties_48.png</icon-large>
                    
                    <default-location>cl</default-location>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/jvmstatus/SystemPropertiesTool.js</file>
                </scripts>
            </extension>
            
            <extension id="org.ametys.plugins.admin.Monitoring"  
                       point="org.ametys.core.ui.RibbonControlsManager" 
                       class="org.ametys.core.ui.StaticClientSideElement">
                <!-- 
                    This button opens the monitoring tool
                 -->
                <class name="Ametys.ribbon.element.ui.button.OpenToolButtonController">
                    <opentool-id>uitool-admin-monitoring</opentool-id>
                    
                    <label i18n="true">PLUGINS_ADMIN_TOOL_MONITORING_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_TOOL_MONITORING_DESC</description>
                    
                    <icon-glyph>ametysicon-medical-equipment</icon-glyph>
                    <icon-small file="true">img/jvmstatus/monitoring_16.png</icon-small>
                    <icon-medium file="true">img/jvmstatus/monitoring_32.png</icon-medium>
                    <icon-large file="true">img/jvmstatus/monitoring_48.png</icon-large>
                </class>
                <depends>
                    <org.ametys.core.ui.UIToolsFactoriesManager>uitool-admin-monitoring</org.ametys.core.ui.UIToolsFactoriesManager>
                </depends>
            </extension>
            
            <extension id="uitool-admin-monitoring"
                       point="org.ametys.core.ui.UIToolsFactoriesManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.tool.factory.UniqueToolFactory">
                    <toolClass>Ametys.plugins.admin.jvmstatus.MonitoringTool</toolClass>
                    
                    <title i18n="true">PLUGINS_ADMIN_TOOL_MONITORING_LABEL</title>
                    <description i18n="true">PLUGINS_ADMIN_TOOL_MONITORING_DESC</description>
                    
                    <icon-glyph>ametysicon-medical-equipment</icon-glyph>
                    <icon-small file="true">img/jvmstatus/monitoring_16.png</icon-small>
                    <icon-medium file="true">img/jvmstatus/monitoring_32.png</icon-medium>
                    <icon-large file="true">img/jvmstatus/monitoring_48.png</icon-large>
                </class>
                <scripts>
                    <file plugin="extjs6">packages/charts/classic/charts.js</file>
                    <file>js/Ametys/plugins/admin/jvmstatus/MonitoringTool/DrawableCartesianChart.js</file>
                    <file>js/Ametys/plugins/admin/jvmstatus/MonitoringTool/TimeAxisPanZoom.js</file>
                    <file>js/Ametys/plugins/admin/jvmstatus/MonitoringTool.js</file>
                </scripts>
            </extension>
            
            <extension id="org.ametys.plugins.admin.monitoring.Tab"
                       point="org.ametys.core.ui.RibbonTabsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.tab.TabController">
                    <tool-id>^(uitool-admin-monitoring)$</tool-id>
                </class>
            </extension>
            
            <extension id="org.ametys.plugins.admin.monitoring.zoomLevel.Year"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.plugins.admin.jvmstatus.DrawModeAwareController">
                    <action>Ametys.plugins.admin.jvmstatus.MonitoringTool.setZoomYear</action>
                    <tool-id>^uitool-admin-monitoring$</tool-id>

                    <label i18n="true">PLUGINS_ADMIN_MONITORING_ZOOM_LEVEL_YEAR_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_MONITORING_ZOOM_LEVEL_YEAR_DESCRIPTION</description>
                    
                    <icon-glyph>ametysicon-calendar146</icon-glyph>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/jvmstatus/DrawModeAwareController.js</file>
                    <file>js/Ametys/plugins/admin/jvmstatus/MonitoringTool.js</file>
                </scripts>
            </extension>
            
            <extension id="org.ametys.plugins.admin.monitoring.zoomLevel.Month"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.plugins.admin.jvmstatus.DrawModeAwareController">
                    <action>Ametys.plugins.admin.jvmstatus.MonitoringTool.setZoomMonth</action>
                    <tool-id>^uitool-admin-monitoring$</tool-id>

                    <label i18n="true">PLUGINS_ADMIN_MONITORING_ZOOM_LEVEL_MONTH_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_MONITORING_ZOOM_LEVEL_MONTH_DESCRIPTION</description>
                    
                    <icon-glyph>ametysicon-calendar146</icon-glyph>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/jvmstatus/DrawModeAwareController.js</file>
                    <file>js/Ametys/plugins/admin/jvmstatus/MonitoringTool.js</file>
                </scripts>
            </extension>
            
            <extension id="org.ametys.plugins.admin.monitoring.zoomLevel.Week"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.plugins.admin.jvmstatus.DrawModeAwareController">
                    <action>Ametys.plugins.admin.jvmstatus.MonitoringTool.setZoomWeek</action>
                    <tool-id>^uitool-admin-monitoring$</tool-id>

                    <label i18n="true">PLUGINS_ADMIN_MONITORING_ZOOM_LEVEL_WEEK_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_MONITORING_ZOOM_LEVEL_WEEK_DESCRIPTION</description>
                    
                    <icon-glyph>ametysicon-calendar146</icon-glyph>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/jvmstatus/DrawModeAwareController.js</file>
                    <file>js/Ametys/plugins/admin/jvmstatus/MonitoringTool.js</file>
                </scripts>
            </extension>
            
            <extension id="org.ametys.plugins.admin.monitoring.zoomLevel.Day"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.plugins.admin.jvmstatus.DrawModeAwareController">
                    <action>Ametys.plugins.admin.jvmstatus.MonitoringTool.setZoomDay</action>
                    <tool-id>^uitool-admin-monitoring$</tool-id>

                    <label i18n="true">PLUGINS_ADMIN_MONITORING_ZOOM_LEVEL_DAY_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_MONITORING_ZOOM_LEVEL_DAY_DESCRIPTION</description>
                    
                    <icon-glyph>ametysicon-time33</icon-glyph>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/jvmstatus/DrawModeAwareController.js</file>
                    <file>js/Ametys/plugins/admin/jvmstatus/MonitoringTool.js</file>
                </scripts>
            </extension>
            
            <extension id="org.ametys.plugins.admin.monitoring.zoomLevel.Hour"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.plugins.admin.jvmstatus.DrawModeAwareController">
                    <action>Ametys.plugins.admin.jvmstatus.MonitoringTool.setZoomHour</action>
                    <tool-id>^uitool-admin-monitoring$</tool-id>

                    <label i18n="true">PLUGINS_ADMIN_MONITORING_ZOOM_LEVEL_HOUR_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_MONITORING_ZOOM_LEVEL_HOUR_DESCRIPTION</description>
                    
                    <icon-glyph>ametysicon-datetime</icon-glyph>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/jvmstatus/DrawModeAwareController.js</file>
                    <file>js/Ametys/plugins/admin/jvmstatus/MonitoringTool.js</file>
                </scripts>
            </extension>
            
            <extension id="org.ametys.plugins.admin.monitoring.moveToNow"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.plugins.admin.jvmstatus.DrawModeAwareController">
                    <action>Ametys.plugins.admin.jvmstatus.MonitoringTool.moveToNow</action>
                    <tool-id>^uitool-admin-monitoring$</tool-id>

                    <label i18n="true">PLUGINS_ADMIN_MONITORING_MOVE_TO_NOW_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_MONITORING_MOVE_TO_NOW_DESCRIPTION</description>
                    
                    <icon-glyph>ametysicon-next25</icon-glyph>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/jvmstatus/DrawModeAwareController.js</file>
                    <file>js/Ametys/plugins/admin/jvmstatus/MonitoringTool.js</file>
                </scripts>
            </extension>
            
            <extension id="org.ametys.plugins.admin.monitoring.drawMode.Switch"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.plugins.admin.jvmstatus.SwitchDrawModeController">
                    <toggle-enabled>true</toggle-enabled>
                    <action>Ametys.plugins.admin.jvmstatus.MonitoringTool.switchDrawMode</action>
                    <tool-id>^uitool-admin-monitoring$</tool-id>

                    <label i18n="true">PLUGINS_ADMIN_MONITORING_DRAW_MODE_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_MONITORING_DRAW_MODE_DISABLE_DESCRIPTION</description>
                    <enabled-description i18n="true">PLUGINS_ADMIN_MONITORING_DRAW_MODE_ENABLE_DESCRIPTION</enabled-description>
                    <disabled-description i18n="true">PLUGINS_ADMIN_MONITORING_DRAW_MODE_DISABLE_DESCRIPTION</disabled-description>
                    
                    <icon-glyph>ametysicon-edit5</icon-glyph>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/jvmstatus/SwitchDrawModeController.js</file>
                    <file>js/Ametys/plugins/admin/jvmstatus/MonitoringTool.js</file>
                </scripts>
            </extension>
            
            <extension id="org.ametys.plugins.admin.monitoring.reloadGraphs"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.admin.jvmstatus.MonitoringTool.reloadGraphs</action>
                    <tool-id>^uitool-admin-monitoring$</tool-id>

                    <label i18n="true">PLUGINS_ADMIN_MONITORING_RELOAD_GRAPHS_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_MONITORING_RELOAD_GRAPHS_DESCRIPTION</description>
                    
                    <icon-glyph>ametysicon-stats144</icon-glyph>
                    <icon-decorator>decorator-ametysicon-arrows130</icon-decorator>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/jvmstatus/MonitoringTool.js</file>
                </scripts>
            </extension>
        </extensions>
    </feature>
    
    <!-- +
         |  ADMIN CONFIGURATION
         + -->
    <feature name="runtime.admin.config" safe="true">
        
        <extensions>
            <extension id="org.ametys.plugins.admin.config.Tab"
                       point="org.ametys.core.ui.RibbonTabsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.tab.TabController">
                    <tool-id>^(uitool-admin-config)$</tool-id>
                </class>
            </extension>
        
            <extension id="org.ametys.plugins.admin.config.Open"  
                       point="org.ametys.core.ui.RibbonControlsManager" 
                       class="org.ametys.core.ui.StaticClientSideElement">
                <!-- 
                    This button opens the configuration tool 
                 -->
                <class name="Ametys.ribbon.element.ui.button.OpenToolButtonController">
                    <opentool-id>uitool-admin-config</opentool-id>
                    
                    <label i18n="true">PLUGINS_ADMIN_CONFIG_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_CONFIG_DESCRIPTION</description>
                    
                    <icon-glyph>ametysicon-hammer2</icon-glyph>
                    <icon-small file="true">img/config/config_16.png</icon-small>
                    <icon-medium file="true">img/config/config_32.png</icon-medium>
                    <icon-large file="true">img/config/config_48.png</icon-large>
                </class>
                <depends>
                    <org.ametys.core.ui.UIToolsFactoriesManager>uitool-admin-config</org.ametys.core.ui.UIToolsFactoriesManager>
                </depends>
            </extension>
            
            <extension id="uitool-admin-config"
                       point="org.ametys.core.ui.UIToolsFactoriesManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.tool.factory.UniqueToolFactory">
                    <toolClass>Ametys.plugins.admin.config.ConfigTool</toolClass>
                    
                    <title i18n="true">PLUGINS_ADMIN_CONFIG_LABEL</title>
                    <description i18n="true">PLUGINS_ADMIN_CONFIG_DESCRIPTION</description>
                    
                    <icon-glyph>ametysicon-hammer2</icon-glyph>
                    <icon-small file="true">img/config/config_16.png</icon-small>
                    <icon-medium file="true">img/config/config_32.png</icon-medium>
                    <icon-large file="true">img/config/config_48.png</icon-large>
                    
                    <default-location>cl</default-location>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/config/ConfigTool.js</file>
                </scripts>
            </extension>
            
            <extension id="org.ametys.plugins.admin.config.Save"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.admin.config.SaveConfigAction.save</action>
                    <tool-id>uitool-admin-config</tool-id>
                    <selection-target-id>^configuration$</selection-target-id>

                    <label i18n="true">PLUGINS_ADMIN_CONFIG_HANDLE_SAVE</label>
                    <description i18n="true">PLUGINS_ADMIN_CONFIG_HANDLE_SAVE_DESC</description>
                    
                    <icon-glyph>ametysicon-save31</icon-glyph>
                    <icon-decorator>decorator-ametysicon-gear39</icon-decorator>
                    <icon-small file="true">img/config/save_16.png</icon-small>
                    <icon-medium file="true">img/config/save_32.png</icon-medium>
                    <icon-large file="true">img/config/save_48.png</icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/config/SaveConfigAction.js</file>
                </scripts>
            </extension>
        </extensions>
    </feature>
    
    <!-- +
         |  Restart
         + -->
    <feature name="runtime.admin.restart" safe="true">
        <extensions>
            <extension id="org.ametys.plugins.admin.restart.Restart"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.admin.restart.RestartActions.forceNormalMode</action>
                    
                    <label i18n="true">PLUGINS_ADMIN_RESTART_RESTART_BUTTON_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_RESTART_RESTART_BUTTON_DESC</description>
                    
                    <icon-glyph>ametysicon-power110</icon-glyph>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/restart/RestartActions.js</file>
                </scripts>
            </extension>
            
            <extension id="org.ametys.plugins.admin.restart.ForceSafeMode"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.admin.restart.RestartActions.forceSafeMode</action>
                    
                    <label i18n="true">PLUGINS_ADMIN_RESTART_SAFE_MODE_RESTART_BUTTON_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_RESTART_SAFE_MODE_RESTART_BUTTON_DESC</description>
                    
                    <icon-glyph>ametysicon-power110</icon-glyph>
                    <icon-decorator>decorator-ametysicon-three115</icon-decorator>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/restart/RestartActions.js</file>
                </scripts>
            </extension>
        </extensions>
    </feature>
    
    <!-- +
         | SUPER USER
         + -->
     <feature name="core.superuser">
        <extensions>
            <extension id="org.ametys.runtime.plugins.admin.superuser.Affect"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.runtime.plugins.admin.superuser.SuperUserClientSideElement">
                <class name="Ametys.ribbon.element.ui.ButtonController">
                    <action>Ametys.plugins.admin.superuser.SuperUserActions.act</action>
                    
                    <label i18n="true">PLUGINS_ADMIN_SUPERUSER_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_SUPERUSER_DESCRIPTION</description>
                    
                    <workspaceName>admin</workspaceName>
                    
                    <icon-glyph>ametysicon-tie6</icon-glyph>                    
                    <icon-small file="true">img/superuser/super_user_16.png</icon-small>
                    <icon-medium file="true">img/superuser/super_user_32.png</icon-medium>
                    <icon-large file="true">img/superuser/super_user_48.png</icon-large>
                </class>
                <scripts>
                    <file>js/Ametys/plugins/admin/superuser/SuperUserActions.js</file>
                </scripts>
            </extension>
        </extensions>
     </feature>

    <!-- +
         |  Monitoring
         + -->
    <feature name="runtime.monitoring">
    	<config>
            <param-ref id="runtime.system.alerts.enable"/> 
            <param-ref id="runtime.system.alerts.diskspace.threshold"/> 
        </config>
        <components>
	        <!-- 
	            Timer task for populating RRDs
	         -->
            <component role="org.ametys.runtime.plugins.admin.jvmstatus.monitoring.RRDsFeederTimerTask"
                       id="org.ametys.runtime.plugins.admin.jvmstatus.monitoring.RRDsFeederTimerTask"
                       class="org.ametys.runtime.plugins.admin.jvmstatus.monitoring.RRDsFeederTimerTask"
                       logger="org.ametys.runtime.plugins.admin.jvmstatus.monitoring.RRDsFeederTimerTask"/>
                       
            <component role="org.ametys.runtime.plugins.admin.jvmstatus.monitoring.DiskSpaceHelper"
            		   id="org.ametys.runtime.plugins.admin.jvmstatus.monitoring.DiskSpaceHelper"
            		   class="org.ametys.runtime.plugins.admin.jvmstatus.monitoring.DiskSpaceHelper"/>
        </components>
        
        <extensions>
            <!-- Monitor the uptime of the JVM -->
            <extension point="org.ametys.runtime.plugins.admin.jvmstatus.monitoring.MonitoringExtensionPoint"
                       id="uptime"
                       class="org.ametys.runtime.plugins.admin.jvmstatus.monitoring.sample.UptimeSampleManager"
                       logger="org.ametys.runtime.plugins.admin.jvmstatus.monitoring.sample.UptimeSampleManager">
                <label i18n="true">PLUGINS_ADMIN_STATUS_MONITORING_UPTIME_LABEL</label>
                <description i18n="true">PLUGINS_ADMIN_STATUS_MONITORING_UPTIME_DESCRIPTION</description>
            </extension>
            <!-- Monitor the throughput and the number of active HTTP requests -->
            <extension point="org.ametys.runtime.plugins.admin.jvmstatus.monitoring.MonitoringExtensionPoint"
                       id="http-request"
                       class="org.ametys.runtime.plugins.admin.jvmstatus.monitoring.sample.HttpRequestSampleManager"
                       logger="org.ametys.runtime.plugins.admin.jvmstatus.monitoring.sample.HttpRequestSampleManager">
                <label i18n="true">PLUGINS_ADMIN_STATUS_MONITORING_HTTPREQUEST_LABEL</label>
                <description i18n="true">PLUGINS_ADMIN_STATUS_MONITORING_HTTPREQUEST_DESCRIPTION</description>
            </extension>
            <!-- Monitor the number of active HTTP sessions -->
            <extension point="org.ametys.runtime.plugins.admin.jvmstatus.monitoring.MonitoringExtensionPoint"
                       id="http-session"
                       class="org.ametys.runtime.plugins.admin.jvmstatus.monitoring.sample.HttpSessionSampleManager"
                       logger="org.ametys.runtime.plugins.admin.jvmstatus.monitoring.sample.HttpSessionSampleManager">
                <label i18n="true">PLUGINS_ADMIN_STATUS_MONITORING_HTTPSESSION_LABEL</label>
                <description i18n="true">PLUGINS_ADMIN_STATUS_MONITORING_HTTPSESSION_DESCRIPTION</description>
            </extension>
            <!-- Monitor the number of live threads (total and daemon) -->
            <extension point="org.ametys.runtime.plugins.admin.jvmstatus.monitoring.MonitoringExtensionPoint"
                       id="thread"
                       class="org.ametys.runtime.plugins.admin.jvmstatus.monitoring.sample.ThreadSampleManager"
                       logger="org.ametys.runtime.plugins.admin.jvmstatus.monitoring.sample.ThreadSampleManager">
                <label i18n="true">PLUGINS_ADMIN_STATUS_MONITORING_THREAD_LABEL</label>
                <description i18n="true">PLUGINS_ADMIN_STATUS_MONITORING_THREAD_DESCRIPTION</description>
            </extension>
            <!-- Monitor the JVM heap memory status -->
            <extension point="org.ametys.runtime.plugins.admin.jvmstatus.monitoring.MonitoringExtensionPoint"
                       id="memory-heap"
                       class="org.ametys.runtime.plugins.admin.jvmstatus.monitoring.sample.HeapMemorySampleManager"
                       logger="org.ametys.runtime.plugins.admin.jvmstatus.monitoring.sample.HeapMemorySampleManager">
                <label i18n="true">PLUGINS_ADMIN_STATUS_MONITORING_MEMORYHEAP_LABEL</label>
                <description i18n="true">PLUGINS_ADMIN_STATUS_MONITORING_MEMORYHEAP_DESCRIPTION</description>
            </extension>
            <!-- Monitor the JVM non heap memory status -->
            <extension point="org.ametys.runtime.plugins.admin.jvmstatus.monitoring.MonitoringExtensionPoint"
                       id="memory-non-heap"
                       class="org.ametys.runtime.plugins.admin.jvmstatus.monitoring.sample.NonHeapMemorySampleManager"
                       logger="org.ametys.runtime.plugins.admin.jvmstatus.monitoring.sample.NonHeapMemorySampleManager">
                <label i18n="true">PLUGINS_ADMIN_STATUS_MONITORING_MEMORYNONHEAP_LABEL</label>
                <description i18n="true">PLUGINS_ADMIN_STATUS_MONITORING_MEMORYNONHEAP_DESCRIPTION</description>
            </extension>
            <!-- Monitor the JVM non heap memory status -->
            <extension point="org.ametys.runtime.plugins.admin.jvmstatus.monitoring.MonitoringExtensionPoint"
                       id="cpu"
                       class="org.ametys.runtime.plugins.admin.jvmstatus.monitoring.sample.CPUSampleManager"
                       logger="org.ametys.runtime.plugins.admin.jvmstatus.monitoring.sample.CPUSampleManager">
                <label i18n="true">PLUGINS_ADMIN_STATUS_MONITORING_CPU_LABEL</label>
                <description i18n="true">PLUGINS_ADMIN_STATUS_MONITORING_CPU_DESCRIPTION</description>
            </extension>
            <!-- Monitor the disk I/O operations -->
            <extension point="org.ametys.runtime.plugins.admin.jvmstatus.monitoring.MonitoringExtensionPoint"
                       id="disk-io"
                       class="org.ametys.runtime.plugins.admin.jvmstatus.monitoring.sample.DiskIOSampleManager"
                       logger="org.ametys.runtime.plugins.admin.jvmstatus.monitoring.sample.DiskIOSampleManager">
                <label i18n="true">PLUGINS_ADMIN_STATUS_MONITORING_DISKIO_LABEL</label>
                <description i18n="true">PLUGINS_ADMIN_STATUS_MONITORING_DISKIO_DESCRIPTION</description>
            </extension>
            <!-- Monitor the disk space -->
            <extension point="org.ametys.runtime.plugins.admin.jvmstatus.monitoring.MonitoringExtensionPoint"
                       id="disk-space"
                       class="org.ametys.runtime.plugins.admin.jvmstatus.monitoring.sample.DiskSpaceSampleManager"
                       logger="org.ametys.runtime.plugins.admin.jvmstatus.monitoring.sample.DiskSpaceSampleManager">
                <label i18n="true">PLUGINS_ADMIN_STATUS_MONITORING_DISKSPACE_LABEL</label>
                <description i18n="true">PLUGINS_ADMIN_STATUS_MONITORING_DISKSPACE_DESCRIPTION</description>
                <mailSubject i18n="true">PLUGINS_ADMIN_SYSTEM_ALERT_AMETYSHOME_LIMIT_SIZE_MAIL_SUBJECT</mailSubject>
                <mailBody i18n="true">PLUGINS_ADMIN_SYSTEM_ALERT_AMETYSHOME_LIMIT_SIZE_MAIL_BODY</mailBody>
            </extension>
        </extensions>
    </feature>
    
    <!-- +
         |  DATASOURCES
         + -->
    <feature name="runtime.admin.datasource" safe="true">
        <extensions>
            <extension id="org.ametys.plugins.admin.DataSource"
                   point="org.ametys.core.ui.RibbonControlsManager"
                   class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.ui.button.OpenToolButtonController">
                    <opentool-id>uitool-datasource</opentool-id>
                    <label i18n="true">PLUGINS_ADMIN_UITOOL_DATASOURCE_LABEL</label>
                    <description i18n="true">PLUGINS_ADMIN_UITOOL_DATASOURCE_DESCRIPTION</description>
                    
                    <help>org.ametys.plugins.admin.datasource</help>
                    <icon-glyph>ametysicon-data112</icon-glyph>
                </class>
                <depends>
                    <org.ametys.core.ui.UIToolsFactoriesManager>uitool-datasource</org.ametys.core.ui.UIToolsFactoriesManager>
                </depends>
            </extension>
                
            <extension id="uitool-datasource"
                       point="org.ametys.core.ui.UIToolsFactoriesManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.tool.factory.UniqueToolFactory">
                    <toolClass>Ametys.plugins.admin.datasource.DataSourceTool</toolClass>
                    
                    <title i18n="true">PLUGINS_ADMIN_UITOOL_DATASOURCE_LABEL</title>
                    <description i18n="true">PLUGINS_ADMIN_UITOOL_DATASOURCE_DESCRIPTION</description>
                    
                    <help>org.ametys.plugins.admin.datasource</help>
                    <icon-glyph>ametysicon-data112</icon-glyph>
                </class>
                <scripts>
                    <file plugin="core">js/Ametys/plugins/core/datasource/DataSourceDAO.js</file>
                    <file>js/Ametys/plugins/admin/datasource/DataSourceTool.js</file>
                    <file>js/Ametys/plugins/admin/datasource/DataSourceTool/DataSource.js</file>
                </scripts>
                <css>
                    <file plugin="core-ui">css/Ametys/ui/tool/datasource.css</file>
                </css>
            </extension>

            <extension id="org.ametys.plugins.admin.datasources.Tab"
                       point="org.ametys.core.ui.RibbonTabsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
                <class name="Ametys.ribbon.element.tab.TabController">
                    <tool-id>^(uitool-datasource)$</tool-id>
                </class>
            </extension>

            <extension id="org.ametys.plugins.admin.datasources.sql.Add"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
               <class name="Ametys.ribbon.element.ui.ButtonController">
                   <action>Ametys.plugins.admin.datasource.DataSourceActions.add</action>
                   <type>SQL</type>
                   
                   <label i18n="true">PLUGINS_ADMIN_UITOOL_DATASOURCE_SQL_ADD_LABEL</label>
                   <description i18n="true">PLUGINS_ADMIN_UITOOL_DATASOURCE_SQL_ADD_DESCRIPTION</description>
                   
                   <icon-glyph>ametysicon-data110</icon-glyph>
                   <icon-decorator>decorator-ametysicon-add64</icon-decorator>
               </class>             
               <scripts>
                   <file plugin="core">js/Ametys/plugins/core/datasource/DataSourceDAO.js</file>
                   <file>js/Ametys/plugins/admin/datasource/EditSQLDataSourceHelper.js</file>
                   <file>js/Ametys/plugins/admin/datasource/DataSourceActions.js</file>
               </scripts>                       
            </extension>
            
            <extension id="org.ametys.plugins.admin.datasources.ldap.Add"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
               <class name="Ametys.ribbon.element.ui.ButtonController">
                   <action>Ametys.plugins.admin.datasource.DataSourceActions.add</action>
                   <type>LDAP</type>
                   
                   <label i18n="true">PLUGINS_ADMIN_UITOOL_DATASOURCE_LDAP_ADD_LABEL</label>
                   <description i18n="true">PLUGINS_ADMIN_UITOOL_DATASOURCE_LDAP_ADD_DESCRIPTION</description>
                   <icon-glyph>ametysicon-agenda3</icon-glyph>
                   <icon-decorator>decorator-ametysicon-add64</icon-decorator>
               </class>             
               <scripts>
                   <file plugin="core">js/Ametys/plugins/core/datasource/DataSourceDAO.js</file>
                   <file>js/Ametys/plugins/admin/datasource/EditLDAPDataSourceHelper.js</file>
                   <file>js/Ametys/plugins/admin/datasource/DataSourceActions.js</file>
               </scripts>                       
            </extension>
            
            <extension id="org.ametys.plugins.admin.datasources.Add"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.SimpleMenu">
               <class name="Ametys.ribbon.element.ui.ButtonController">
                   <label i18n="true">PLUGINS_ADMIN_UITOOL_DATASOURCE_ADD_LABEL</label>
                   <description i18n="true">PLUGINS_ADMIN_UITOOL_DATASOURCE_ADD_DESCRIPTION</description>
                   <icon-glyph>ametysicon-data110</icon-glyph>
                   <icon-decorator>decorator-ametysicon-add64</icon-decorator>
               </class>             
               <menu-items>
                    <item ref="org.ametys.plugins.admin.datasources.sql.Add"/>
                    <item ref="org.ametys.plugins.admin.datasources.ldap.Add"/>
                </menu-items>
            </extension>
            
            <extension id="org.ametys.plugins.admin.datasources.Edit"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
               <class name="Ametys.ribbon.element.ui.ButtonController">
                   <action>Ametys.plugins.admin.datasource.DataSourceActions.edit</action>
                   <type>SQL</type>

                   <selection-enable-multiselection>false</selection-enable-multiselection>
                   <selection-target-id>^datasource$</selection-target-id>
                   <selection-target-parameter>
                       <name>^id$</name>
                       <value>!^(SQL-ametys-internal)$</value>
                   </selection-target-parameter>

                   <label i18n="true">PLUGINS_ADMIN_UITOOL_DATASOURCE_EDIT_LABEL</label>
                   <description i18n="true">PLUGINS_ADMIN_UITOOL_DATASOURCE_EDIT_DESCRIPTION</description>
                   <icon-glyph>ametysicon-data110</icon-glyph>
                   <icon-decorator>decorator-ametysicon-edit45</icon-decorator>
               </class>             
               <scripts>
                   <file plugin="core">js/Ametys/plugins/core/datasource/DataSourceDAO.js</file>
                   <file>js/Ametys/plugins/admin/datasource/EditLDAPDataSourceHelper.js</file>
                   <file>js/Ametys/plugins/admin/datasource/EditSQLDataSourceHelper.js</file>
                   <file>js/Ametys/plugins/admin/datasource/DataSourceActions.js</file>
               </scripts>                       
            </extension>
            
            <extension id="org.ametys.plugins.admin.datasources.Delete"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.runtime.plugins.admin.datasource.DeleteDataSourceClientSideElement">
               <class name="Ametys.plugins.admin.datasource.DeleteDataSourceController">
                   <action>Ametys.plugins.admin.datasource.DataSourceActions.remove</action>
                   <selection-target-id>^datasource$</selection-target-id>
                   
                   <label i18n="true">PLUGINS_ADMIN_UITOOL_DATASOURCE_REMOVE_LABEL</label>
                   <description i18n="true">PLUGINS_ADMIN_UITOOL_DATASOURCE_REMOVE_DESCRIPTION</description>
                   <allright-start-description i18n="true">PLUGINS_ADMIN_UITOOL_DATASOURCE_REMOVE_ALLRIGHT_START_DESCRIPTION</allright-start-description>
                   <allright-end-description i18n="true">PLUGINS_ADMIN_UITOOL_DATASOURCE_REMOVE_ALLRIGHT_END_DESCRIPTION</allright-end-description>
                   <inuse-start-description i18n="true">PLUGINS_ADMIN_UITOOL_DATASOURCE_REMOVE_INUSE_START_DESCRIPTION</inuse-start-description>
                   <inuse-end-description i18n="true">PLUGINS_ADMIN_UITOOL_DATASOURCE_REMOVE_INUSE_END_DESCRIPTION</inuse-end-description>
                   <internal-start-description i18n="true">PLUGINS_ADMIN_UITOOL_DATASOURCE_REMOVE_INTERNAL_START_DESCRIPTION</internal-start-description>
                   <internal-end-description i18n="true">PLUGINS_ADMIN_UITOOL_DATASOURCE_REMOVE_INTERNAL_END_DESCRIPTION</internal-end-description>
                   <icon-glyph>ametysicon-data110</icon-glyph>
                   <icon-decorator>decorator-ametysicon-remove11</icon-decorator>
               </class>             
               <scripts>
                    <file>js/Ametys/plugins/admin/datasource/DeleteDataSourceController.js</file>
                   <file>js/Ametys/plugins/admin/datasource/DataSourceActions.js</file>
                   <file plugin="core">js/Ametys/plugins/core/datasource/DataSourceDAO.js</file>
               </scripts>                       
            </extension>
            
            <extension id="org.ametys.plugins.admin.datasources.SetDefault"
                       point="org.ametys.core.ui.RibbonControlsManager"
                       class="org.ametys.core.ui.StaticClientSideElement">
               <class name="Ametys.plugins.admin.datasource.SetDefaultDataSourceController">
                   <action>Ametys.plugins.admin.datasource.DataSourceActions.setDefault</action>
                   
                   <selection-enable-multiselection>false</selection-enable-multiselection>
                   <selection-target-id>^datasource$</selection-target-id>
                   
                   <label i18n="true">PLUGINS_ADMIN_UITOOL_DATASOURCE_SET_DEFAULT_LABEL</label>
                   <description i18n="true">PLUGINS_ADMIN_UITOOL_DATASOURCE_SET_DEFAULT_DESCRIPTION</description>

                   <icon-glyph>ametysicon-data110</icon-glyph>
                   <enabled-icon-decorator>decorator-ametysicon-checked34</enabled-icon-decorator>
                   <disabled-icon-decorator>decorator-ametysicon-letterx5</disabled-icon-decorator>
               </class>             
               <scripts>
                   <file>js/Ametys/plugins/admin/datasource/SetDefaultDataSourceController.js</file>
                   <file>js/Ametys/plugins/admin/datasource/DataSourceActions.js</file>
                   <file plugin="core">js/Ametys/plugins/core/datasource/DataSourceDAO.js</file>
               </scripts>                       
            </extension>
            
            <extension id="org.ametys.plugins.admin.datasources.notificator.invalid"
                       point="org.ametys.runtime.plugins.admin.notificator.AdministratorNotificatorExtensionPoint"
                       class="org.ametys.runtime.plugins.admin.datasource.InvalidDataSourceNotificator">
                <type>warn</type>
                <icon-glyph>ametysicon-data110</icon-glyph>
                <title i18n="true">PLUGINS_ADMIN_DATASOURCES_UNEXISTING_DATABASE_NOTIFICATION_TITLE</title>
                <message i18n="true">PLUGINS_ADMIN_DATASOURCES_UNEXISTING_DATABASE_NOTIFICATION_MESSAGE</message>
                <action>Ext.bind(Ametys.tool.ToolsManager.openTool, Ametys.tool.ToolsManager, ['uitool-datasource', {}])</action>
            </extension>
        </extensions>
    </feature>
    
    <feature name="rights" safe="true">
        <extensions>
            <extension point="org.ametys.core.right.RightsExtensionPoint"
                       id="admin">
                <right id="Runtime_Rights_Admin_Access">
                    <label>PLUGINS_ADMIN_RIGHTS_ACCESS_LABEL</label>
                    <description>PLUGINS_ADMIN_RIGHTS_ACCESS_DESCRIPTION</description>
                    <category>PLUGINS_ADMIN_RIGHTS_CATEGORY</category>
                </right>
            </extension>
        </extensions>
    </feature>
                
    <feature name="right.assignment.context.admin" depends="core/runtime.core.sql.profile.init">
        <config>
            <param-ref id="runtime.rights.datasource"/>
        </config>
        <extensions>
        
            <extension id="org.ametys.plugins.admin.rights.JdbcProfileAssignmentStorage"
                       class="org.ametys.plugins.core.impl.right.JdbcProfileAssignmentStorage"
                       point="org.ametys.core.right.ProfileAssignmentStorageExtensionPoint">
                <datasource type="config">runtime.rights.datasource</datasource>
                <sqlMap resource="/org/ametys/plugins/core/impl/right/profile-assignment.xml" />
                <context>/admin</context>
            </extension>

            <extension id="right.assignment.context.admin"
                       point="org.ametys.core.right.RightAssignmentContextExtensionPoint"
                       class="org.ametys.plugins.core.impl.right.StringRightAssignmentContext">
                <workspace>^admin$</workspace>
                <class name="Ametys.plugins.coreui.profiles.StringRightAssignmentContext">
                    <label i18n="true">PLUGINS_CORE_RIGHT_ASSIGNMENT_CONTEXT_ADMINISTRATOR_LABEL</label>
                    <description i18n="true">PLUGINS_CORE_RIGHT_ASSIGNMENT_CONTEXT_ADMINISTRATOR_MESSAGE</description>
                    <hint i18n="true">PLUGINS_CORE_RIGHT_ASSIGNMENT_CONTEXT_ADMINISTRATOR_HINT</hint>
                    <context>/admin</context>
                </class>
                <scripts>
                    <file plugin="core-ui">js/Ametys/plugins/coreui/profiles/StringRightAssignmentContext.js</file>
                </scripts>
            </extension>
        </extensions>
    </feature>
</plugin>